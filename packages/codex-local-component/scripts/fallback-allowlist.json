{
  "version": 1,
  "entries": [
    {
      "description": "Default includeTurns to false for thread/read requests to avoid unexpectedly large responses when callers omit the flag.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_6c9ddb2b6265",
      "file": "src/app-server/client.ts",
      "line": 117,
      "col": 19,
      "kind": "nullish-coalescing",
      "snippet": "params.includeTurns ?? false",
      "context": "return buildClientRequest(\"thread/read\", id, { threadId: params.threadId, includeTurns: params.includeTurns ?? false, });"
    },
    {
      "description": "Default ThreadListParams to an empty object so list requests remain valid and rely on server-side defaults when optional filters are omitted.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_f6a960cdf1c7",
      "file": "src/app-server/client.ts",
      "line": 123,
      "col": 3,
      "kind": "parameter-default",
      "snippet": "params: ThreadListParams = {}",
      "context": "export function buildThreadListRequest( id: number, params: ThreadListParams = {}, ): RequestFor<\"thread/list\"> { return buildClientRequest(\"thread/list\", id, params); }"
    },
    {
      "description": "Default ThreadLoadedListParams to an empty object to preserve backward compatibility for callers that do not pass pagination or filtering arguments.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_c815a6956025",
      "file": "src/app-server/client.ts",
      "line": 130,
      "col": 3,
      "kind": "parameter-default",
      "snippet": "params: ThreadLoadedListParams = {}",
      "context": "export function buildThreadLoadedListRequest( id: number, params: ThreadLoadedListParams = {}, ): RequestFor<\"thread/loaded/list\"> { return buildClientRequest(\"thread/loaded/lis..."
    },
    {
      "description": "Defaults refreshToken to false for account/read to avoid unexpected auth refresh side effects when callers omit the flag.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_1af98041539a",
      "file": "src/app-server/client.ts",
      "line": 192,
      "col": 19,
      "kind": "nullish-coalescing",
      "snippet": "params?.refreshToken ?? false",
      "context": "requestParams: GetAccountParams = { refreshToken: params?.refreshToken ?? false, }"
    },
    {
      "description": "Initializes per-table delete counters at 0 while aggregating batch results; standard accumulator default.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_4ccf333487d6",
      "file": "src/component/deletionCascade.ts",
      "line": 130,
      "col": 39,
      "kind": "nullish-coalescing",
      "snippet": "deletedByTable[step.tableName] ?? 0",
      "context": "deletedByTable[step.tableName] = (deletedByTable[step.tableName] ?? 0) + deleted;"
    },
    {
      "description": "Uses a bounded default deletion batch size when callers do not provide one.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_7b83e7e1383a",
      "file": "src/component/deletionInternal.ts",
      "line": 16,
      "col": 31,
      "kind": "nullish-coalescing",
      "snippet": "batchSize ?? DELETE_BATCH_DEFAULT",
      "context": "return Math.max(1, Math.min(batchSize ?? DELETE_BATCH_DEFAULT, DELETE_BATCH_MAX));"
    },
    {
      "description": "Applies default deletion grace delay and clamps to min/max bounds for safe scheduling.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_3881decc6019",
      "file": "src/component/deletionUtils.ts",
      "line": 29,
      "col": 14,
      "kind": "nullish-coalescing",
      "snippet": "delayMs ?? DEFAULT_DELETE_GRACE_MS",
      "context": "return Math.max( MIN_DELETE_GRACE_MS, Math.min(delayMs ?? DEFAULT_DELETE_GRACE_MS, MAX_DELETE_GRACE_MS), );"
    },
    {
      "description": "Initializes merged deletion-count totals at 0 while combining count maps.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_ad638580edb9",
      "file": "src/component/deletionUtils.ts",
      "line": 79,
      "col": 26,
      "kind": "nullish-coalescing",
      "snippet": "merged[tableName] ?? 0",
      "context": "merged[tableName] = (merged[tableName] ?? 0) + count;"
    },
    {
      "description": "Falls back to existing message status when durableMessage status is missing; may hide upstream payload incompleteness.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_7687134cd737",
      "file": "src/component/ingest/applyMessages.ts",
      "line": 59,
      "col": 16,
      "kind": "nullish-coalescing",
      "snippet": "event.durableMessage?.status ?? existing.status",
      "context": "return event.durableMessage?.status ?? existing.status;"
    },
    {
      "description": "Defaults missing reasoning text delta to empty string to keep segment insertion stable.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_2c290886c26f",
      "file": "src/component/ingest/applyMessages.ts",
      "line": 112,
      "col": 13,
      "kind": "nullish-coalescing",
      "snippet": "event.reasoningDelta.delta ?? \"\"",
      "context": "await ingest.ctx.db.insert(\"codex_reasoning_segments\", { userScope: userScopeFromActor(ingest.args.actor), ...(ingest.args.actor.userId !== undefined ? { userId: ingest.args.act..."
    },
    {
      "description": "Defaults expected stream cursor to 0 for unseen streams; correct for first event but sensitive if stream identity mapping is wrong.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_aaabcd8a6f19",
      "file": "src/component/ingest/applyStreams.ts",
      "line": 101,
      "col": 32,
      "kind": "nullish-coalescing",
      "snippet": "ingest.streamState.expectedCursorByStreamId.get(event.streamId) ?? 0",
      "context": "streamExpectedCursor = ingest.streamState.expectedCursorByStreamId.get(event.streamId) ?? 0"
    },
    {
      "description": "Defaults checkpoint cursor to 0 when no prior checkpoint exists for this stream.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_2a8a37204e9d",
      "file": "src/component/ingest/applyStreams.ts",
      "line": 120,
      "col": 9,
      "kind": "nullish-coalescing",
      "snippet": "ingest.streamState.streamCheckpointCursorByStreamId.get(event.streamId) ?? 0",
      "context": "ingest.streamState.streamCheckpointCursorByStreamId.set( event.streamId, Math.max( ingest.streamState.streamCheckpointCursorByStreamId.get(event.streamId) ?? 0, Number(existingS..."
    },
    {
      "description": "Defaults checkpoint cursor to 0 when no prior checkpoint exists for this stream.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_2c0c8f0db694",
      "file": "src/component/ingest/applyStreams.ts",
      "line": 185,
      "col": 14,
      "kind": "nullish-coalescing",
      "snippet": "ingest.streamState.streamCheckpointCursorByStreamId.get(event.streamId) ?? 0",
      "context": "ingest.streamState.streamCheckpointCursorByStreamId.set( event.streamId, Math.max(ingest.streamState.streamCheckpointCursorByStreamId.get(event.streamId) ?? 0, event.cursorEnd), );"
    },
    {
      "description": "Uses payload turnId when available, otherwise event turnId; can mask inconsistencies between payload and envelope turn identifiers.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_a745ef4c8e9d",
      "file": "src/component/ingest/normalize.ts",
      "line": 49,
      "col": 30,
      "kind": "nullish-coalescing",
      "snippet": "payloadTurnId ?? event.turnId",
      "context": "resolvedTurnId = payloadTurnId ?? event.turnId"
    },
    {
      "description": "For lifecycle events, omits turnId when payload does not provide a canonical turn id.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_41673d0e27bb",
      "file": "src/component/ingest/normalize.ts",
      "line": 64,
      "col": 28,
      "kind": "nullish-coalescing",
      "snippet": "payloadTurnId ?? undefined",
      "context": "resolvedTurnId = payloadTurnId ?? undefined"
    },
    {
      "description": "Returns null when sync error code prefix is absent; explicit sentinel for unknown error format.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_bb2b531066ea",
      "file": "src/component/ingest/sessionGuard.ts",
      "line": 25,
      "col": 10,
      "kind": "nullish-coalescing",
      "snippet": "match?.[1] ?? null",
      "context": "return match?.[1] ?? null;"
    },
    {
      "description": "Returns empty cursor when thread is missing so paginated message response remains valid and done.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_9d87e8cb985b",
      "file": "src/component/messages.ts",
      "line": 24,
      "col": 27,
      "kind": "nullish-coalescing",
      "snippet": "args.paginationOpts.cursor ?? \"\"",
      "context": "return { page: [], isDone: true, continueCursor: args.paginationOpts.cursor ?? \"\", };"
    },
    {
      "description": "Preserves existing pagination cursor or empty string when page is empty to maintain Convex PaginationResult contract.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_4ec916ac2c69",
      "file": "src/component/pagination.ts",
      "line": 44,
      "col": 10,
      "kind": "nullish-coalescing",
      "snippet": "paginationOpts.cursor ?? \"\"",
      "context": "continueCursor = page.length > 0 ? encodeKeysetCursor(getCursor(page[page.length - 1]!)) : (paginationOpts.cursor ?? \"\")"
    },
    {
      "description": "Defaults pending server-request list limit to 100 and clamps to [1,200].",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_b5cfdf9ced62",
      "file": "src/component/serverRequests.ts",
      "line": 220,
      "col": 45,
      "kind": "nullish-coalescing",
      "snippet": "args.limit ?? 100",
      "context": "limit = Math.max(1, Math.min(200, args.limit ?? 100))"
    },
    {
      "description": "Uses generic stream timeout reason when interruption reason is missing; useful fallback but may hide root cause detail.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_5a211791bf85",
      "file": "src/component/streams.ts",
      "line": 85,
      "col": 16,
      "kind": "nullish-coalescing",
      "snippet": "args.reason ?? \"stream timeout\"",
      "context": "await ctx.scheduler.runAfter( 0, makeFunctionReference<\"mutation\">(\"turnsInternal:reconcileTerminalArtifacts\"), { userScope: args.userScope, threadId: String(stream.threadId), t..."
    },
    {
      "description": "Defaults finished-stream cleanup batch size and clamps to configured bounds.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_a78a528dfbfc",
      "file": "src/component/streams.ts",
      "line": 103,
      "col": 16,
      "kind": "nullish-coalescing",
      "snippet": "args.batchSize ?? STREAM_CLEANUP_BATCH_SIZE_DEFAULT",
      "context": "batchSize = Math.max( 1, Math.min(args.batchSize ?? STREAM_CLEANUP_BATCH_SIZE_DEFAULT, STREAM_CLEANUP_BATCH_SIZE_MAX), )"
    },
    {
      "description": "Defaults expired-delta cleanup batch size to 1000 with upper/lower clamps.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_511674e14a50",
      "file": "src/component/streams.ts",
      "line": 202,
      "col": 44,
      "kind": "nullish-coalescing",
      "snippet": "args.batchSize ?? 1000",
      "context": "batchSize = Math.max(1, Math.min(args.batchSize ?? 1000, 5000))"
    },
    {
      "description": "Defaults data-hygiene sample size to 1000 with upper/lower clamps.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_0ba80707296a",
      "file": "src/component/streams.ts",
      "line": 238,
      "col": 45,
      "kind": "nullish-coalescing",
      "snippet": "args.sampleSize ?? 1000",
      "context": "sampleSize = Math.max(1, Math.min(args.sampleSize ?? 1000, 5000))"
    },
    {
      "description": "Defaults ensureLastEventCursor to 0 and clamps non-negative so safe-ingest replay checks always have a baseline cursor.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_13c1f7a035f4",
      "file": "src/component/syncIngest.ts",
      "line": 67,
      "col": 47,
      "kind": "nullish-coalescing",
      "snippet": "args.ensureLastEventCursor ?? 0",
      "context": "ensureCursor = Math.max(0, Math.floor(args.ensureLastEventCursor ?? 0))"
    },
    {
      "description": "Uses checkpoint ackedCursor default 0 when no checkpoint exists for a stream replay window.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_72bb34aa3d7a",
      "file": "src/component/syncReplay.ts",
      "line": 90,
      "col": 63,
      "kind": "nullish-coalescing",
      "snippet": "checkpoint?.ackedCursor ?? 0",
      "context": "effectiveCursor = Math.max(args.requestedCursor, Number(checkpoint?.ackedCursor ?? 0))"
    },
    {
      "description": "Runtime option default: do not persist stream text deltas unless explicitly enabled.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_8440806446fc",
      "file": "src/component/syncRuntime.ts",
      "line": 52,
      "col": 23,
      "kind": "nullish-coalescing",
      "snippet": "options?.saveStreamDeltas ?? false",
      "context": "return { saveStreamDeltas: options?.saveStreamDeltas ?? false, saveReasoningDeltas: options?.saveReasoningDeltas ?? true, exposeRawReasoningDeltas: options?.exposeRawReasoningDe..."
    },
    {
      "description": "Runtime option default: persist reasoning summary deltas unless explicitly disabled.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_2e91802b1372",
      "file": "src/component/syncRuntime.ts",
      "line": 53,
      "col": 26,
      "kind": "nullish-coalescing",
      "snippet": "options?.saveReasoningDeltas ?? true",
      "context": "return { saveStreamDeltas: options?.saveStreamDeltas ?? false, saveReasoningDeltas: options?.saveReasoningDeltas ?? true, exposeRawReasoningDeltas: options?.exposeRawReasoningDe..."
    },
    {
      "description": "Runtime option default: do not expose raw reasoning deltas unless explicitly enabled.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_20182f20f364",
      "file": "src/component/syncRuntime.ts",
      "line": 54,
      "col": 31,
      "kind": "nullish-coalescing",
      "snippet": "options?.exposeRawReasoningDeltas ?? false",
      "context": "return { saveStreamDeltas: options?.saveStreamDeltas ?? false, saveReasoningDeltas: options?.saveReasoningDeltas ?? true, exposeRawReasoningDeltas: options?.exposeRawReasoningDe..."
    },
    {
      "description": "Runtime option default for finished-stream delete delay uses configured constant when unset.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_86bcb55cd47a",
      "file": "src/component/syncRuntime.ts",
      "line": 66,
      "col": 9,
      "kind": "nullish-coalescing",
      "snippet": "options?.finishedStreamDeleteDelayMs ?? DEFAULT_FINISHED_STREAM_DELETE_DELAY_MS",
      "context": "return { saveStreamDeltas: options?.saveStreamDeltas ?? false, saveReasoningDeltas: options?.saveReasoningDeltas ?? true, exposeRawReasoningDeltas: options?.exposeRawReasoningDe..."
    },
    {
      "description": "Thread update preserves existing model when caller omits model in patch args.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_625d670e7a7e",
      "file": "src/component/threadHelpers.ts",
      "line": 46,
      "col": 14,
      "kind": "nullish-coalescing",
      "snippet": "args.model ?? existing.model",
      "context": "await ctx.db.patch(existing._id, { status: \"active\", updatedAt: ts, model: args.model ?? existing.model, cwd: args.cwd ?? existing.cwd, personality: args.personality ?? existing..."
    },
    {
      "description": "Thread update preserves existing cwd when caller omits cwd in patch args.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_8fcb8bd00d2c",
      "file": "src/component/threadHelpers.ts",
      "line": 47,
      "col": 12,
      "kind": "nullish-coalescing",
      "snippet": "args.cwd ?? existing.cwd",
      "context": "await ctx.db.patch(existing._id, { status: \"active\", updatedAt: ts, model: args.model ?? existing.model, cwd: args.cwd ?? existing.cwd, personality: args.personality ?? existing..."
    },
    {
      "description": "Thread update preserves existing personality when caller omits personality in patch args.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_925e73428268",
      "file": "src/component/threadHelpers.ts",
      "line": 48,
      "col": 20,
      "kind": "nullish-coalescing",
      "snippet": "args.personality ?? existing.personality",
      "context": "await ctx.db.patch(existing._id, { status: \"active\", updatedAt: ts, model: args.model ?? existing.model, cwd: args.cwd ?? existing.cwd, personality: args.personality ?? existing..."
    },
    {
      "description": "Thread update preserves existing localThreadId when caller omits localThreadId in patch args.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_48d1e80aed4e",
      "file": "src/component/threadHelpers.ts",
      "line": 49,
      "col": 22,
      "kind": "nullish-coalescing",
      "snippet": "args.localThreadId ?? existing.localThreadId",
      "context": "await ctx.db.patch(existing._id, { status: \"active\", updatedAt: ts, model: args.model ?? existing.model, cwd: args.cwd ?? existing.cwd, personality: args.personality ?? existing..."
    },
    {
      "description": "Uses generic interrupted reason when no explicit reason is provided during interrupt flow; useful default but may hide richer interruption context.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_5a4288b746ff",
      "file": "src/component/turns.ts",
      "line": 81,
      "col": 16,
      "kind": "nullish-coalescing",
      "snippet": "args.reason ?? \"interrupted\"",
      "context": "await ctx.scheduler.runAfter( 0, makeFunctionReference<\"mutation\">(\"turnsInternal:reconcileTerminalArtifacts\"), { userScope: userScopeFromActor(args.actor), threadId: args.threa..."
    },
    {
      "description": "Terminal artifact reconciliation falls back to existing turn error/status when new error is absent; can preserve stale error semantics if upstream omits error unexpectedly.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_0c02b1623346",
      "file": "src/component/turnsInternal.ts",
      "line": 66,
      "col": 11,
      "kind": "nullish-coalescing",
      "snippet": "args.error ?? (typeof turn.error === \"string\" && turn.error.length > 0 ? turn.error : status)",
      "context": "error = status === \"completed\" ? undefined : args.error ?? (typeof turn.error === \"string\" && turn.error.length > 0 ? turn.error : status)"
    },
    {
      "description": "Aborted stream reason falls back to terminal status when explicit error is unavailable; acceptable fallback but loses detailed cause.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_4898b000cc25",
      "file": "src/component/turnsInternal.ts",
      "line": 139,
      "col": 45,
      "kind": "nullish-coalescing",
      "snippet": "error ?? status",
      "context": "await ctx.db.patch(stream._id, { state: { kind: \"aborted\", reason: error ?? status, endedAt: ts }, endedAt: ts, cleanupScheduledAt: ts, cleanupFnId, });"
    },
    {
      "description": "Error code parser returns null when bracketed code prefix is missing; explicit unknown-code sentinel.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_08f60dbcff9a",
      "file": "src/errors.ts",
      "line": 14,
      "col": 10,
      "kind": "nullish-coalescing",
      "snippet": "match?.[1] ?? null",
      "context": "return match?.[1] ?? null;"
    },
    {
      "description": "Host slice enables hooks by default when features.hooks is omitted; broadens exposed surface unless integrator opts out.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_8e6128d87322",
      "file": "src/host/convexPreset.ts",
      "line": 70,
      "col": 12,
      "kind": "nullish-coalescing",
      "snippet": "options.features?.hooks ?? true",
      "context": "features: Required<CodexHostSliceFeatures> = { hooks: options.features?.hooks ?? true, approvals: options.features?.approvals ?? true, serverRequests: options.features?.serverRe..."
    },
    {
      "description": "Host slice enables approvals by default when features.approvals is omitted; changes behavior toward approval tracking unless explicitly disabled.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_e7ebc2a0f7af",
      "file": "src/host/convexPreset.ts",
      "line": 71,
      "col": 16,
      "kind": "nullish-coalescing",
      "snippet": "options.features?.approvals ?? true",
      "context": "features: Required<CodexHostSliceFeatures> = { hooks: options.features?.hooks ?? true, approvals: options.features?.approvals ?? true, serverRequests: options.features?.serverRe..."
    },
    {
      "description": "Host slice enables serverRequests by default when features.serverRequests is omitted; may add queue/persistence overhead unless disabled.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_af851bf7f82d",
      "file": "src/host/convexPreset.ts",
      "line": 72,
      "col": 21,
      "kind": "nullish-coalescing",
      "snippet": "options.features?.serverRequests ?? true",
      "context": "features: Required<CodexHostSliceFeatures> = { hooks: options.features?.hooks ?? true, approvals: options.features?.approvals ?? true, serverRequests: options.features?.serverRe..."
    },
    {
      "description": "Host slice enables reasoning by default when features.reasoning is omitted; may increase persisted data volume unless disabled.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_5dfae2334ceb",
      "file": "src/host/convexPreset.ts",
      "line": 73,
      "col": 16,
      "kind": "nullish-coalescing",
      "snippet": "options.features?.reasoning ?? true",
      "context": "features: Required<CodexHostSliceFeatures> = { hooks: options.features?.hooks ?? true, approvals: options.features?.approvals ?? true, serverRequests: options.features?.serverRe..."
    },
    {
      "description": "Host slice enables hygiene by default when features.hygiene is omitted; schedules extra checks unless disabled.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_d0c557fffe8a",
      "file": "src/host/convexPreset.ts",
      "line": 74,
      "col": 14,
      "kind": "nullish-coalescing",
      "snippet": "options.features?.hygiene ?? true",
      "context": "features: Required<CodexHostSliceFeatures> = { hooks: options.features?.hooks ?? true, approvals: options.features?.approvals ?? true, serverRequests: options.features?.serverRe..."
    },
    {
      "description": "Host slice enables tokenUsage by default when features.tokenUsage is omitted; may increase tracking/storage unless disabled.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_0c49294dad0e",
      "file": "src/host/convexPreset.ts",
      "line": 75,
      "col": 17,
      "kind": "nullish-coalescing",
      "snippet": "options.features?.tokenUsage ?? true",
      "context": "features: Required<CodexHostSliceFeatures> = { hooks: options.features?.hooks ?? true, approvals: options.features?.approvals ?? true, serverRequests: options.features?.serverRe..."
    },
    {
      "description": "Uses a synthetic preflight thread id in validateHostWiring when no threadId is supplied, so wiring checks can run without real thread data.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_a5372d1f7b03",
      "file": "src/host/convexPreset.ts",
      "line": 89,
      "col": 29,
      "kind": "nullish-coalescing",
      "snippet": "args.threadId ?? \"__codex_host_wiring_preflight__\"",
      "context": "checkThreadId = args.threadId ?? \"__codex_host_wiring_preflight__\""
    },
    {
      "description": "Falls back to original key when no alias exists while mapping internal definition keys to public names.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_c4791ca956e1",
      "file": "src/host/convexPreset.ts",
      "line": 437,
      "col": 49,
      "kind": "nullish-coalescing",
      "snippet": "aliases[key] ?? key",
      "context": "([key, value]) => [aliases[key] ?? key, value]"
    },
    {
      "description": "Falls back to public mutation key when no internal alias mapping exists.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_8ca294bbea83",
      "file": "src/host/convexPreset.ts",
      "line": 487,
      "col": 9,
      "kind": "nullish-coalescing",
      "snippet": "Object.entries(HOST_MUTATION_INTERNAL_ALIASES).find( ([, pub]) => pub === publicKey, )?.[0] ?? publicKey",
      "context": "internalKey = Object.entries(HOST_MUTATION_INTERNAL_ALIASES).find( ([, pub]) => pub === publicKey, )?.[0] ?? publicKey"
    },
    {
      "description": "Falls back to public query key when no internal alias mapping exists.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_32308579ae35",
      "file": "src/host/convexPreset.ts",
      "line": 496,
      "col": 9,
      "kind": "nullish-coalescing",
      "snippet": "Object.entries(HOST_QUERY_INTERNAL_ALIASES).find( ([, pub]) => pub === publicKey, )?.[0] ?? publicKey",
      "context": "internalKey = Object.entries(HOST_QUERY_INTERNAL_ALIASES).find( ([, pub]) => pub === publicKey, )?.[0] ?? publicKey"
    },
    {
      "description": "When resolving threads, defaults externalThreadId to threadId if external id is absent; useful interoperability fallback but may blur id-source intent.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_6f27a1e3e6ba",
      "file": "src/host/convexSlice.ts",
      "line": 448,
      "col": 28,
      "kind": "nullish-coalescing",
      "snippet": "args.externalThreadId ?? args.threadId",
      "context": "externalThreadId = args.externalThreadId ?? args.threadId"
    },
    {
      "description": "When resolving threads, defaults localThreadId to externalThreadId if local id is absent; can hide missing local-id propagation.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_ad074976b1c5",
      "file": "src/host/convexSlice.ts",
      "line": 449,
      "col": 25,
      "kind": "nullish-coalescing",
      "snippet": "args.threadId ?? externalThreadId",
      "context": "localThreadId = args.threadId ?? externalThreadId"
    },
    {
      "description": "Initial runtime state sets externalThreadId to null when not provided to keep explicit empty-state semantics.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_8074841b1b39",
      "file": "src/host/runtime.ts",
      "line": 68,
      "col": 29,
      "kind": "nullish-coalescing",
      "snippet": "startArgs.externalThreadId ?? null",
      "context": "core.externalThreadId = startArgs.externalThreadId ?? null;"
    },
    {
      "description": "Defaults ingest flush interval to 250ms for balanced batching latency when unset.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_daeb85a2d036",
      "file": "src/host/runtime.ts",
      "line": 71,
      "col": 26,
      "kind": "nullish-coalescing",
      "snippet": "startArgs.ingestFlushMs ?? 250",
      "context": "core.ingestFlushMs = startArgs.ingestFlushMs ?? 250;"
    },
    {
      "description": "Runtime start resolves cwd from start args first, then bridge config fallback.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_17dfe9cc0a6f",
      "file": "src/host/runtime.ts",
      "line": 77,
      "col": 25,
      "kind": "nullish-coalescing",
      "snippet": "startArgs.cwd ?? args.bridge?.cwd",
      "context": "resolvedCwd = startArgs.cwd ?? args.bridge?.cwd"
    },
    {
      "description": "Process-exit handler defaults unknown exit code text when runtime provides no code; preserves error emission but loses exact cause.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_aba5fe93908c",
      "file": "src/host/runtime.ts",
      "line": 95,
      "col": 59,
      "kind": "nullish-coalescing",
      "snippet": "code ?? \"unknown\"",
      "context": "core.setProcessExitError(code ?? \"unknown\");"
    },
    {
      "description": "Runtime start defaults thread strategy to \"start\" when caller does not specify strategy.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_a27f85f6c892",
      "file": "src/host/runtime.ts",
      "line": 104,
      "col": 22,
      "kind": "nullish-coalescing",
      "snippet": "startArgs.threadStrategy ?? \"start\"",
      "context": "strategy = startArgs.threadStrategy ?? \"start\""
    },
    {
      "description": "sendTurn ensures thread binding with runtimeThreadId when present, otherwise undefined to avoid forcing invalid placeholder ids.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_7fd11c8bfed2",
      "file": "src/host/runtime.ts",
      "line": 131,
      "col": 36,
      "kind": "nullish-coalescing",
      "snippet": "core.runtimeThreadId ?? undefined",
      "context": "await core.ensureThreadBinding(core.runtimeThreadId ?? undefined);"
    },
    {
      "description": "Thread resume/fork helper defaults optional params object to empty object for request construction.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_5a5f63b1e1dc",
      "file": "src/host/runtime.ts",
      "line": 147,
      "col": 95,
      "kind": "nullish-coalescing",
      "snippet": "params ?? {}",
      "context": "return core.sendRequest(buildThreadResumeRequest(core.requestIdFn(), { threadId: tid, ...(params ?? {}) }));"
    },
    {
      "description": "Thread resume/fork helper defaults optional params object to empty object for request construction.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_3f11a40cc193",
      "file": "src/host/runtime.ts",
      "line": 151,
      "col": 93,
      "kind": "nullish-coalescing",
      "snippet": "params ?? {}",
      "context": "return core.sendRequest(buildThreadForkRequest(core.requestIdFn(), { threadId: tid, ...(params ?? {}) }));"
    },
    {
      "description": "readThread defaults includeTurns to false to avoid large turn payloads unless explicitly requested.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_468a22d91bb3",
      "file": "src/host/runtime.ts",
      "line": 165,
      "col": 66,
      "kind": "parameter-default",
      "snippet": "includeTurns = false",
      "context": "async (tid, includeTurns = false) => core.sendRequest(buildThreadReadRequest(core.requestIdFn(), { threadId: tid, includeTurns }))"
    },
    {
      "description": "ChatGPT plan type defaults to null when omitted to satisfy response schema explicitly.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_efbf77a458af",
      "file": "src/host/runtime.ts",
      "line": 204,
      "col": 158,
      "kind": "nullish-coalescing",
      "snippet": "a.chatgptPlanType ?? null",
      "context": "core.sendMessage(buildChatgptAuthTokensRefreshResponse(a.requestId, { accessToken: a.accessToken, chatgptAccountId: a.chatgptAccountId, chatgptPlanType: a.chatgptPlanType ?? nul..."
    },
    {
      "description": "Ingest metric counter initialization defaults missing kind count to 0 before incrementing.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_1de11ca9f9b2",
      "file": "src/host/runtimeCore.ts",
      "line": 87,
      "col": 93,
      "kind": "nullish-coalescing",
      "snippet": "counts.get(kind) ?? 0",
      "context": "counts.set(kind, (counts.get(kind) ?? 0) + 1);"
    },
    {
      "description": "Thread binding chooses preferred runtime thread id first, then current runtimeThreadId fallback; may mask caller omission in some flows.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_da4601297393",
      "file": "src/host/runtimeCore.ts",
      "line": 173,
      "col": 18,
      "kind": "nullish-coalescing",
      "snippet": "preferred ?? runtimeThreadId",
      "context": "next = preferred ?? runtimeThreadId"
    },
    {
      "description": "Persistence ensureThread defaults externalThreadId to resolved next id when absent; practical fallback but can hide external-id loss.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_569a92615021",
      "file": "src/host/runtimeCore.ts",
      "line": 174,
      "col": 84,
      "kind": "nullish-coalescing",
      "snippet": "externalThreadId ?? next",
      "context": "binding = await args.persistence.ensureThread({ actor, externalThreadId: externalThreadId ?? next, ...(startupModel !== undefined ? { model: startupModel } : {}), ...(startupCwd..."
    },
    {
      "description": "When persistence returns no externalThreadId, runtime falls back to the requested thread id to keep binding continuity; may hide backend omission.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_c049176b38dd",
      "file": "src/host/runtimeCore.ts",
      "line": 175,
      "col": 53,
      "kind": "nullish-coalescing",
      "snippet": "binding.externalThreadId ?? next",
      "context": "externalThreadId = binding.externalThreadId ?? next;"
    },
    {
      "description": "Defaults dispatch claim owner to \"runtime-owner\" when sessionId is unavailable.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_e8b471931fbb",
      "file": "src/host/runtimeCore.ts",
      "line": 196,
      "col": 101,
      "kind": "nullish-coalescing",
      "snippet": "sessionId ?? \"runtime-owner\"",
      "context": "claimed = await args.persistence.claimNextTurnDispatch({ actor, threadId, claimOwner: sessionId ?? \"runtime-owner\" })"
    },
    {
      "description": "Persisted-turn resolver falls back to runtime turn id when no mapping exists; can mask mapping gaps during turn remap flows.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_b643d3539303",
      "file": "src/host/runtimeCore.ts",
      "line": 230,
      "col": 87,
      "kind": "nullish-coalescing",
      "snippet": "dispatchByTurnId.get(rtid)?.persistedTurnId ?? rtid",
      "context": "return dispatchByTurnId.get(rtid)?.persistedTurnId ?? rtid;"
    },
    {
      "description": "In flushQueue, fallback to bound thread id when a batched delta lacks threadId; preserves ingestion but can hide malformed batch rows.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_cd488f88bb25",
      "file": "src/host/runtimeCoreHandlers.ts",
      "line": 161,
      "col": 83,
      "kind": "nullish-coalescing",
      "snippet": "batch[i]?.threadId ?? at",
      "context": "(d, i) => ({ ...d, threadId: batch[i]?.threadId ?? at })"
    },
    {
      "description": "turn/started handling falls back to runtime event turnId when persisted mapping is missing.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_dd6cf201fa9c",
      "file": "src/host/runtimeCoreHandlers.ts",
      "line": 208,
      "col": 18,
      "kind": "nullish-coalescing",
      "snippet": "ctx.resolvePersistedTurnId(event.turnId) ?? event.turnId",
      "context": "ptid = ctx.resolvePersistedTurnId(event.turnId) ?? event.turnId"
    },
    {
      "description": "expireTurnServerRequests uses current runtime threadId, falling back to event.threadId when runtime thread binding is absent.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_cc8c906326dc",
      "file": "src/host/runtimeCoreHandlers.ts",
      "line": 241,
      "col": 52,
      "kind": "nullish-coalescing",
      "snippet": "ctx.threadId ?? event.threadId",
      "context": "await ctx.expireTurnServerRequests({ threadId: ctx.threadId ?? event.threadId, ...(event.turnId ? { turnId: event.turnId } : {}) });"
    },
    {
      "description": "expireTurnServerRequests uses current runtime threadId, falling back to event.threadId when runtime thread binding is absent.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_c8878b55f199",
      "file": "src/host/runtimeCoreHandlers.ts",
      "line": 262,
      "col": 52,
      "kind": "nullish-coalescing",
      "snippet": "ctx.threadId ?? event.threadId",
      "context": "await ctx.expireTurnServerRequests({ threadId: ctx.threadId ?? event.threadId, ...(event.turnId ? { turnId: event.turnId } : {}) });"
    },
    {
      "description": "Managed server request handling falls back to parsed server-request turnId when normalized event.turnId is absent.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_7f6be3843e85",
      "file": "src/host/runtimeCoreHandlers.ts",
      "line": 268,
      "col": 18,
      "kind": "nullish-coalescing",
      "snippet": "event.turnId ?? psr.turnId",
      "context": "rtid = event.turnId ?? psr.turnId"
    },
    {
      "description": "Managed server request turn mapping falls back to parsed request turnId when persisted-turn resolution misses.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_13fd32cb908e",
      "file": "src/host/runtimeCoreHandlers.ts",
      "line": 269,
      "col": 18,
      "kind": "nullish-coalescing",
      "snippet": "ctx.resolvePersistedTurnId(rtid) ?? psr.turnId",
      "context": "ptid = ctx.resolvePersistedTurnId(rtid) ?? psr.turnId"
    },
    {
      "description": "Token-usage handler falls back from envelope.params to envelope root for compatibility with variant payload shapes.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_cfa6e6bc902d",
      "file": "src/host/runtimeCoreHandlers.ts",
      "line": 277,
      "col": 71,
      "kind": "nullish-coalescing",
      "snippet": "asObject(envelope.params) ?? envelope",
      "context": "payload = envelope ? asObject(envelope.params) ?? envelope : null"
    },
    {
      "description": "Token-usage upsert falls back to current runtime turnId if event turnId cannot be remapped.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_7ba289b4032a",
      "file": "src/host/runtimeCoreHandlers.ts",
      "line": 278,
      "col": 80,
      "kind": "nullish-coalescing",
      "snippet": "ctx.resolvePersistedTurnId(event.turnId) ?? ctx.turnId",
      "context": "rtid = ctx.resolvePersistedTurnId(event.turnId) ?? ctx.turnId"
    },
    {
      "description": "On thread lifecycle responses, ensureThreadBinding is called with runtimeThreadId if present, else undefined.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_0fa7ffd8785c",
      "file": "src/host/runtimeCoreHandlers.ts",
      "line": 307,
      "col": 39,
      "kind": "nullish-coalescing",
      "snippet": "ctx.runtimeThreadId ?? undefined",
      "context": "await ctx.ensureThreadBinding(ctx.runtimeThreadId ?? undefined);"
    },
    {
      "description": "Dispatch mapping falls back persistedTurnId to runtime turn id when pending.turnId is missing.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_17c2515b85a8",
      "file": "src/host/runtimeCoreHandlers.ts",
      "line": 334,
      "col": 131,
      "kind": "nullish-coalescing",
      "snippet": "pending.turnId ?? rtid",
      "context": "ctx.dispatchByTurnId.set(rtid, { dispatchId: pending.dispatchId, claimToken: pending.claimToken, persistedTurnId: pending.turnId ?? rtid });"
    },
    {
      "description": "Tauri command mapping returns null for unsupported commands instead of throwing.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_51dc7cd4cbc4",
      "file": "src/host/tauri.ts",
      "line": 208,
      "col": 10,
      "kind": "nullish-coalescing",
      "snippet": "TAURI_TO_HELPER_COMMAND[tauriCommand] ?? null",
      "context": "return TAURI_TO_HELPER_COMMAND[tauriCommand] ?? null;"
    },
    {
      "description": "Tauri account/read invoke sends empty config object when no config is provided.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_2856cd3c501b",
      "file": "src/host/tauri.ts",
      "line": 297,
      "col": 49,
      "kind": "nullish-coalescing",
      "snippet": "config ?? {}",
      "context": "return invoke(\"read_account\", { config: config ?? {} });"
    },
    {
      "description": "Local bridge executable resolution falls back from explicit config to CODEX_BIN env var and then \"codex\"; misconfiguration can silently target unintended binary.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_2066bbd57d27",
      "file": "src/local-adapter/bridge.ts",
      "line": 65,
      "col": 17,
      "kind": "nullish-coalescing",
      "snippet": "this.config.codexBin ?? process.env.CODEX_BIN ?? \"codex\"",
      "context": "bin = this.config.codexBin ?? process.env.CODEX_BIN ?? \"codex\""
    },
    {
      "description": "Local bridge executable resolution falls back from explicit config to CODEX_BIN env var before defaulting to bundled command name.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_b02910c76950",
      "file": "src/local-adapter/bridge.ts",
      "line": 65,
      "col": 17,
      "kind": "nullish-coalescing",
      "snippet": "this.config.codexBin ?? process.env.CODEX_BIN",
      "context": "bin = this.config.codexBin ?? process.env.CODEX_BIN ?? \"codex\""
    },
    {
      "description": "Bridge event normalization synthesizes streamId from thread/turn when protocol streamId is absent; useful but can hide protocol shape regressions.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_bb8805d28c5f",
      "file": "src/local-adapter/bridge.ts",
      "line": 122,
      "col": 30,
      "kind": "nullish-coalescing",
      "snippet": "streamId ?? (turnId ? `${threadId}:${turnId}:0` : undefined)",
      "context": "resolvedStreamId = streamId ?? (turnId ? `${threadId}:${turnId}:0` : undefined)"
    },
    {
      "description": "Reasoning segment key uses \"none\" sentinel when summaryIndex is missing to keep key deterministic.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_1c6f4343a417",
      "file": "src/mapping.ts",
      "line": 98,
      "col": 5,
      "kind": "nullish-coalescing",
      "snippet": "args.summaryIndex ?? \"none\"",
      "context": "return [ args.turnId, args.itemId, args.channel, args.segmentType, args.summaryIndex ?? \"none\", args.contentIndex ?? \"none\", ].join(\":\");"
    },
    {
      "description": "Reasoning segment key uses \"none\" sentinel when contentIndex is missing to keep key deterministic.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_3e615557dd87",
      "file": "src/mapping.ts",
      "line": 99,
      "col": 5,
      "kind": "nullish-coalescing",
      "snippet": "args.contentIndex ?? \"none\"",
      "context": "return [ args.turnId, args.itemId, args.channel, args.segmentType, args.summaryIndex ?? \"none\", args.contentIndex ?? \"none\", ].join(\":\");"
    },
    {
      "description": "Reasoning segment sort treats missing summaryIndex as MAX_SAFE_INTEGER so indexed segments sort before unindexed tails.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_6c51ca86fb4e",
      "file": "src/mapping.ts",
      "line": 131,
      "col": 23,
      "kind": "nullish-coalescing",
      "snippet": "left.summaryIndex ?? Number.MAX_SAFE_INTEGER",
      "context": "leftSummary = left.summaryIndex ?? Number.MAX_SAFE_INTEGER"
    },
    {
      "description": "Reasoning segment sort treats missing summaryIndex as MAX_SAFE_INTEGER for stable ordering.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_f00d79120a8b",
      "file": "src/mapping.ts",
      "line": 132,
      "col": 24,
      "kind": "nullish-coalescing",
      "snippet": "right.summaryIndex ?? Number.MAX_SAFE_INTEGER",
      "context": "rightSummary = right.summaryIndex ?? Number.MAX_SAFE_INTEGER"
    },
    {
      "description": "Reasoning segment sort treats missing contentIndex as MAX_SAFE_INTEGER for stable ordering.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_a3070f6ae9ef",
      "file": "src/mapping.ts",
      "line": 136,
      "col": 23,
      "kind": "nullish-coalescing",
      "snippet": "left.contentIndex ?? Number.MAX_SAFE_INTEGER",
      "context": "leftContent = left.contentIndex ?? Number.MAX_SAFE_INTEGER"
    },
    {
      "description": "Reasoning segment sort treats missing contentIndex as MAX_SAFE_INTEGER so explicit indexes win ordering.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_b34b56f57ea7",
      "file": "src/mapping.ts",
      "line": 137,
      "col": 24,
      "kind": "nullish-coalescing",
      "snippet": "right.contentIndex ?? Number.MAX_SAFE_INTEGER",
      "context": "rightContent = right.contentIndex ?? Number.MAX_SAFE_INTEGER"
    },
    {
      "description": "Overlay extraction defaults missing durable messageId to null and skips entry; protects integrity but may hide malformed payloads.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_1d81e766f491",
      "file": "src/mapping.ts",
      "line": 157,
      "col": 25,
      "kind": "nullish-coalescing",
      "snippet": "durableDelta?.messageId ?? null",
      "context": "messageId = durableDelta?.messageId ?? null"
    },
    {
      "description": "Overlay extraction defaults missing text delta to null and skips entry; avoids corrupt merges but can hide malformed payloads.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_55f0dd7dd787",
      "file": "src/mapping.ts",
      "line": 158,
      "col": 25,
      "kind": "nullish-coalescing",
      "snippet": "durableDelta?.delta ?? null",
      "context": "textDelta = durableDelta?.delta ?? null"
    },
    {
      "description": "Overlay message text concatenation defaults missing existing text to empty string.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_b3e2645adcb8",
      "file": "src/mapping.ts",
      "line": 167,
      "col": 18,
      "kind": "nullish-coalescing",
      "snippet": "existing?.text ?? \"\"",
      "context": "byKey.set(key, { turnId, messageId, text: `${existing?.text ?? \"\"}${textDelta}`, status: existing?.status ?? \"streaming\", ...(existing?.error ? { error: existing.error } : {}), ..."
    },
    {
      "description": "Overlay message status defaults to streaming when no existing status is present; can mask absent status transitions in malformed streams.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_0ed2b78b0b6e",
      "file": "src/mapping.ts",
      "line": 168,
      "col": 17,
      "kind": "nullish-coalescing",
      "snippet": "existing?.status ?? \"streaming\"",
      "context": "byKey.set(key, { turnId, messageId, text: `${existing?.text ?? \"\"}${textDelta}`, status: existing?.status ?? \"streaming\", ...(existing?.error ? { error: existing.error } : {}), ..."
    },
    {
      "description": "When item text is absent, merge falls back to existing overlay text (or empty) which may conceal incomplete payload text fields.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_80a1edd0f220",
      "file": "src/mapping.ts",
      "line": 183,
      "col": 24,
      "kind": "nullish-coalescing",
      "snippet": "message.text ?? (existing?.text ?? \"\")",
      "context": "nextText = message.text ?? (existing?.text ?? \"\")"
    },
    {
      "description": "Overlay message text concatenation defaults missing existing text to empty string.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_1193dc5ab70c",
      "file": "src/mapping.ts",
      "line": 183,
      "col": 41,
      "kind": "nullish-coalescing",
      "snippet": "existing?.text ?? \"\"",
      "context": "nextText = message.text ?? (existing?.text ?? \"\")"
    },
    {
      "description": "Overlay message status defaults to streaming when no existing status is present; can mask absent status transitions in malformed streams.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_93bb2e189bc4",
      "file": "src/mapping.ts",
      "line": 188,
      "col": 51,
      "kind": "nullish-coalescing",
      "snippet": "existing?.status ?? \"streaming\"",
      "context": "byKey.set(key, { turnId, messageId: message.messageId, text: nextText, status: message.status === \"streaming\" ? (existing?.status ?? \"streaming\") : \"completed\", ...(existing?.er..."
    },
    {
      "description": "Reasoning overlay aggregation excludes raw channel by default unless includeRaw is explicitly enabled.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_f6df5ade3a2a",
      "file": "src/mapping.ts",
      "line": 226,
      "col": 22,
      "kind": "nullish-coalescing",
      "snippet": "options?.includeRaw ?? false",
      "context": "includeRaw = options?.includeRaw ?? false"
    },
    {
      "description": "Overlay message text concatenation defaults missing existing text to empty string.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_1f9aece01330",
      "file": "src/mapping.ts",
      "line": 268,
      "col": 16,
      "kind": "nullish-coalescing",
      "snippet": "existing?.text ?? \"\"",
      "context": "byKey.set(key, { turnId, itemId: reasoningDelta.itemId, channel: reasoningDelta.channel, segmentType: reasoningDelta.segmentType, text: reasoningDelta.segmentType === \"textDelta..."
    },
    {
      "description": "Reasoning textDelta concatenation defaults missing delta fragment to empty string.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_c729e01078bf",
      "file": "src/mapping.ts",
      "line": 268,
      "col": 39,
      "kind": "nullish-coalescing",
      "snippet": "reasoningDelta.delta ?? \"\"",
      "context": "byKey.set(key, { turnId, itemId: reasoningDelta.itemId, channel: reasoningDelta.channel, segmentType: reasoningDelta.segmentType, text: reasoningDelta.segmentType === \"textDelta..."
    },
    {
      "description": "Reasoning overlay aggregation excludes raw channel by default unless includeRaw is explicitly enabled.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_ff5b630ce31a",
      "file": "src/mapping.ts",
      "line": 287,
      "col": 22,
      "kind": "nullish-coalescing",
      "snippet": "options?.includeRaw ?? false",
      "context": "includeRaw = options?.includeRaw ?? false"
    },
    {
      "description": "Status-priority comparison treats unknown overlay status as priority 0.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_310953dae2c2",
      "file": "src/mapping.ts",
      "line": 350,
      "col": 8,
      "kind": "nullish-coalescing",
      "snippet": "STATUS_PRIORITY[overlayStatus] ?? 0",
      "context": "if ((STATUS_PRIORITY[overlayStatus] ?? 0) > (STATUS_PRIORITY[durableStatus] ?? 0)) { return overlayStatus; }"
    },
    {
      "description": "Status-priority comparison treats unknown durable status as priority 0.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_546c20846f5c",
      "file": "src/mapping.ts",
      "line": 350,
      "col": 48,
      "kind": "nullish-coalescing",
      "snippet": "STATUS_PRIORITY[durableStatus] ?? 0",
      "context": "if ((STATUS_PRIORITY[overlayStatus] ?? 0) > (STATUS_PRIORITY[durableStatus] ?? 0)) { return overlayStatus; }"
    },
    {
      "description": "Risk: synthesizing messageId from turnId/orderInTurn hides upstream missing IDs and can cause unexpected dedupe collisions if ordering invariants drift.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_330008495556",
      "file": "src/mapping.ts",
      "line": 374,
      "col": 16,
      "kind": "nullish-coalescing",
      "snippet": "message.messageId ?? `${message.turnId}:${message.orderInTurn}`",
      "context": "return { messageId: message.messageId ?? `${message.turnId}:${message.orderInTurn}`, turnId: message.turnId, role: message.role, status: message.status, ...(message.sourceItemTy..."
    },
    {
      "description": "Durable text for mcpToolCall falls back to server/tool identifier when item.error.message is missing; useful but may lose actionable error detail.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_eb8ff043bca6",
      "file": "src/protocol/events.ts",
      "line": 215,
      "col": 14,
      "kind": "nullish-coalescing",
      "snippet": "item.error?.message ?? `${item.server}/${item.tool}`",
      "context": "return item.error?.message ?? `${item.server}/${item.tool}`;"
    },
    {
      "description": "Turn-id extraction returns undefined when params.turn.id is absent, preserving explicit missing-turn semantics.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_2afa9802ba21",
      "file": "src/protocol/events.ts",
      "line": 315,
      "col": 14,
      "kind": "nullish-coalescing",
      "snippet": "getStringField(params.turn, \"id\") ?? undefined",
      "context": "return getStringField(params.turn, \"id\") ?? undefined;"
    },
    {
      "description": "Turn-id extraction returns undefined when params.turnId is missing for turn/item thread-scoped events.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_5cf0df84b354",
      "file": "src/protocol/events.ts",
      "line": 320,
      "col": 14,
      "kind": "nullish-coalescing",
      "snippet": "getStringField(params, \"turnId\") ?? undefined",
      "context": "return getStringField(params, \"turnId\") ?? undefined;"
    },
    {
      "description": "Turn-id extraction returns undefined when params.turnId is missing for turn/item thread-scoped events.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_259756b60ee3",
      "file": "src/protocol/events.ts",
      "line": 338,
      "col": 14,
      "kind": "nullish-coalescing",
      "snippet": "getStringField(params, \"turnId\") ?? undefined",
      "context": "return getStringField(params, \"turnId\") ?? undefined;"
    },
    {
      "description": "Payload turn-id extractor returns null when parsed message has no turn id.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_247212fb661e",
      "file": "src/protocol/events.ts",
      "line": 349,
      "col": 10,
      "kind": "nullish-coalescing",
      "snippet": "extractTurnId(parsed) ?? null",
      "context": "return extractTurnId(parsed) ?? null;"
    },
    {
      "description": "Risk: inferring status when payload omits it can hide schema regressions and misclassify malformed item payloads as valid inProgress/completed states.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_a6b31c24f6c9",
      "file": "src/protocol/events.ts",
      "line": 570,
      "col": 13,
      "kind": "nullish-coalescing",
      "snippet": "status ?? (message.method === \"item/started\" ? \"inProgress\" : \"completed\")",
      "context": "return { itemId: item.id, itemType: item.type, status: status ?? (message.method === \"item/started\" ? \"inProgress\" : \"completed\"), payloadJson: JSON.stringify(message), cursorEn..."
    },
    {
      "description": "Item snapshot status fallback derives inProgress/completed from event kind when payload status is absent; may hide schema regressions.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_b51aef2c67cd",
      "file": "src/protocol/events.ts",
      "line": 595,
      "col": 13,
      "kind": "nullish-coalescing",
      "snippet": "status ?? (kind === \"item/started\" ? \"inProgress\" : \"completed\")",
      "context": "return { itemId: parsed.params.item.id, itemType: parsed.params.item.type, status: status ?? (kind === \"item/started\" ? \"inProgress\" : \"completed\"), payloadJson, cursorEnd, };"
    },
    {
      "description": "AJV error formatter defaults missing error message text to \"invalid\" for stable diagnostics.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_b0d22014ddb4",
      "file": "src/protocol/parser.ts",
      "line": 60,
      "col": 24,
      "kind": "nullish-coalescing",
      "snippet": "err.message ?? \"invalid\"",
      "context": "return `${at}: ${err.message ?? \"invalid\"}`;"
    },
    {
      "description": "Activity authority helper defaults message timestamp resolver to createdAt-based candidate timestamp.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_1a259ca4c67c",
      "file": "src/react/activityAuthority.ts",
      "line": 104,
      "col": 3,
      "kind": "parameter-default",
      "snippet": "resolveTimestamp: (message: CodexThreadActivityMessageLike) => number = (message) => candidateTimestamp(message.createdAt)",
      "context": "function latestMessageByStatus( messages: CodexThreadActivityMessageLike[], status: CodexThreadActivityMessageLike[\"status\"], resolveTimestamp: (message: CodexThreadActivityMess..."
    },
    {
      "description": "Dispatch activity timestamp prefers updatedAt, falling back to createdAt when updatedAt is missing.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_1801f2cd9ef7",
      "file": "src/react/activityAuthority.ts",
      "line": 134,
      "col": 37,
      "kind": "nullish-coalescing",
      "snippet": "dispatch.updatedAt ?? dispatch.createdAt",
      "context": "candidate: Candidate = { timestamp: candidateTimestamp(dispatch.updatedAt ?? dispatch.createdAt), ...(dispatch.turnId !== undefined ? { activeTurnId: dispatch.turnId } : {}), }"
    },
    {
      "description": "Activity authority helper defaults turn timestamp resolver to startedAt-based candidate timestamp.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_79604f830a94",
      "file": "src/react/activityAuthority.ts",
      "line": 147,
      "col": 3,
      "kind": "parameter-default",
      "snippet": "resolveTimestamp: (turn: CodexThreadActivityTurnLike) => number = (turn) => candidateTimestamp(turn.startedAt)",
      "context": "function latestTurnByStatus( turns: CodexThreadActivityTurnLike[], predicate: (status: string) => boolean, resolveTimestamp: (turn: CodexThreadActivityTurnLike) => number = (tur..."
    },
    {
      "description": "Activity derivation defaults missing recentMessages collection to empty list.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_475868f7fd8f",
      "file": "src/react/activityAuthority.ts",
      "line": 215,
      "col": 20,
      "kind": "nullish-coalescing",
      "snippet": "state?.recentMessages ?? []",
      "context": "messages = state?.recentMessages ?? []"
    },
    {
      "description": "Activity derivation defaults missing dispatches collection to empty list.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_72e158fe21a0",
      "file": "src/react/activityAuthority.ts",
      "line": 216,
      "col": 22,
      "kind": "nullish-coalescing",
      "snippet": "state?.dispatches ?? []",
      "context": "dispatches = state?.dispatches ?? []"
    },
    {
      "description": "Activity derivation defaults missing turns collection to empty list.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_b04ed36848e2",
      "file": "src/react/activityAuthority.ts",
      "line": 217,
      "col": 17,
      "kind": "nullish-coalescing",
      "snippet": "state?.turns ?? []",
      "context": "turns = state?.turns ?? []"
    },
    {
      "description": "Activity derivation defaults missing pendingApprovals collection to empty list.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_95e2a9d9f4d2",
      "file": "src/react/activityAuthority.ts",
      "line": 218,
      "col": 28,
      "kind": "nullish-coalescing",
      "snippet": "state?.pendingApprovals ?? []",
      "context": "pendingApprovals = state?.pendingApprovals ?? []"
    },
    {
      "description": "Activity derivation defaults missing streamStats collection to empty list.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_5f7d92338b29",
      "file": "src/react/activityAuthority.ts",
      "line": 219,
      "col": 23,
      "kind": "nullish-coalescing",
      "snippet": "state?.streamStats ?? []",
      "context": "streamStats = state?.streamStats ?? []"
    },
    {
      "description": "Activity derivation defaults missing activeStreams collection to empty list.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_79170986d6c5",
      "file": "src/react/activityAuthority.ts",
      "line": 220,
      "col": 25,
      "kind": "nullish-coalescing",
      "snippet": "state?.activeStreams ?? []",
      "context": "activeStreams = state?.activeStreams ?? []"
    },
    {
      "description": "Activity derivation defaults missing lifecycleMarkers collection to empty list.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_df214c77063f",
      "file": "src/react/activityAuthority.ts",
      "line": 221,
      "col": 28,
      "kind": "nullish-coalescing",
      "snippet": "state?.lifecycleMarkers ?? []",
      "context": "lifecycleMarkers = state?.lifecycleMarkers ?? []"
    },
    {
      "description": "Terminal message timestamp prioritizes completedAt then updatedAt then createdAt; fallback chain can mask incomplete terminal timestamps.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_520a01b9995d",
      "file": "src/react/activityAuthority.ts",
      "line": 229,
      "col": 24,
      "kind": "nullish-coalescing",
      "snippet": "message.completedAt ?? message.updatedAt ?? message.createdAt",
      "context": "(message: CodexThreadActivityMessageLike): number => candidateTimestamp(message.completedAt ?? message.updatedAt ?? message.createdAt)"
    },
    {
      "description": "Terminal message timestamp falls back from completedAt to updatedAt when completion timestamp is missing.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_3aa394c3c351",
      "file": "src/react/activityAuthority.ts",
      "line": 229,
      "col": 24,
      "kind": "nullish-coalescing",
      "snippet": "message.completedAt ?? message.updatedAt",
      "context": "(message: CodexThreadActivityMessageLike): number => candidateTimestamp(message.completedAt ?? message.updatedAt ?? message.createdAt)"
    },
    {
      "description": "Terminal turn timestamp falls back from completedAt to startedAt when completion timestamp is missing.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_edb58ae3cfdc",
      "file": "src/react/activityAuthority.ts",
      "line": 231,
      "col": 24,
      "kind": "nullish-coalescing",
      "snippet": "turn.completedAt ?? turn.startedAt",
      "context": "(turn: CodexThreadActivityTurnLike): number => candidateTimestamp(turn.completedAt ?? turn.startedAt)"
    },
    {
      "description": "Latest terminal boundary timestamp defaults to 0 when no terminal boundary candidate exists.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_590cea09300b",
      "file": "src/react/activityAuthority.ts",
      "line": 260,
      "col": 36,
      "kind": "nullish-coalescing",
      "snippet": "latestTerminalBoundary?.timestamp ?? 0",
      "context": "latestTerminalBoundaryTs = latestTerminalBoundary?.timestamp ?? 0"
    },
    {
      "description": "Streaming-state arbitration uses 0 timestamp when no active stream candidate is present.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_1bdf6dbc79cc",
      "file": "src/react/activityAuthority.ts",
      "line": 284,
      "col": 33,
      "kind": "nullish-coalescing",
      "snippet": "activeStream?.timestamp ?? 0",
      "context": "activeStreamTimestamp = activeStream?.timestamp ?? 0"
    },
    {
      "description": "Streaming-state arbitration uses -1 when no stream-drain marker exists so real stream timestamps win.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_ac21cd43ae9e",
      "file": "src/react/activityAuthority.ts",
      "line": 285,
      "col": 76,
      "kind": "nullish-coalescing",
      "snippet": "streamDrainCompleted?.timestamp ?? -1",
      "context": "if ((hasActiveStreams || canStreamFromStats) && activeStreamTimestamp > (streamDrainCompleted?.timestamp ?? -1)) { return { phase: \"streaming\", ...(activeStream?.activeTurnId !=..."
    },
    {
      "description": "Branch activity selection defaults explicit turnIds list to empty list when omitted.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_2c1d46a83e3f",
      "file": "src/react/branchActivity.ts",
      "line": 34,
      "col": 24,
      "kind": "nullish-coalescing",
      "snippet": "options.turnIds ?? []",
      "context": "for (const turnId of options.turnIds ?? []) { if (turnId) { selected.add(turnId); } }"
    },
    {
      "description": "Branch activity selection defaults descendantTurnIds list to empty list when omitted.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_0e9990cda45c",
      "file": "src/react/branchActivity.ts",
      "line": 39,
      "col": 24,
      "kind": "nullish-coalescing",
      "snippet": "options.descendantTurnIds ?? []",
      "context": "for (const turnId of options.descendantTurnIds ?? []) { if (turnId) { selected.add(turnId); } }"
    },
    {
      "description": "Branch activity defaults includeDescendants to true; omitted option broadens selected turn set by startedAt lineage.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_75c4b28ddc0f",
      "file": "src/react/branchActivity.ts",
      "line": 48,
      "col": 30,
      "kind": "nullish-coalescing",
      "snippet": "options.includeDescendants ?? true",
      "context": "includeDescendants = options.includeDescendants ?? true"
    },
    {
      "description": "Branch activity defaults missing turns collection to empty list before filtering by selected branch.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_66a513c3c847",
      "file": "src/react/branchActivity.ts",
      "line": 53,
      "col": 17,
      "kind": "nullish-coalescing",
      "snippet": "state?.turns ?? []",
      "context": "turns = state?.turns ?? []"
    },
    {
      "description": "Branch activity normalizes missing options to empty object for deterministic branching behavior.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_22b65b00f8ad",
      "file": "src/react/branchActivity.ts",
      "line": 79,
      "col": 23,
      "kind": "nullish-coalescing",
      "snippet": "options ?? {}",
      "context": "nextOptions = options ?? {}"
    },
    {
      "description": "Branch activity defaults missing pendingApprovals collection to empty list before branch filtering.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_a73421f3d8b5",
      "file": "src/react/branchActivity.ts",
      "line": 90,
      "col": 24,
      "kind": "nullish-coalescing",
      "snippet": "state?.pendingApprovals ?? []",
      "context": "filteredState: CodexBranchActivityThreadState = { pendingApprovals: (state?.pendingApprovals ?? []).filter( (approval) => hasTurnId(approval) && typeof approval.turnId === \"stri..."
    },
    {
      "description": "Branch activity defaults missing recentMessages collection to empty list before branch filtering.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_dd72ef9b7bc8",
      "file": "src/react/branchActivity.ts",
      "line": 94,
      "col": 22,
      "kind": "nullish-coalescing",
      "snippet": "state?.recentMessages ?? []",
      "context": "filteredState: CodexBranchActivityThreadState = { pendingApprovals: (state?.pendingApprovals ?? []).filter( (approval) => hasTurnId(approval) && typeof approval.turnId === \"stri..."
    },
    {
      "description": "Branch activity defaults missing dispatches collection to empty list before branch filtering.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_266be21d9925",
      "file": "src/react/branchActivity.ts",
      "line": 97,
      "col": 18,
      "kind": "nullish-coalescing",
      "snippet": "state?.dispatches ?? []",
      "context": "filteredState: CodexBranchActivityThreadState = { pendingApprovals: (state?.pendingApprovals ?? []).filter( (approval) => hasTurnId(approval) && typeof approval.turnId === \"stri..."
    },
    {
      "description": "Branch activity defaults missing streamStats collection to empty list.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_a0785fd6f13d",
      "file": "src/react/branchActivity.ts",
      "line": 100,
      "col": 18,
      "kind": "nullish-coalescing",
      "snippet": "state?.streamStats ?? []",
      "context": "filteredState: CodexBranchActivityThreadState = { pendingApprovals: (state?.pendingApprovals ?? []).filter( (approval) => hasTurnId(approval) && typeof approval.turnId === \"stri..."
    },
    {
      "description": "Branch activity defaults missing activeStreams collection to empty list before branch filtering.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_e60a00224e0f",
      "file": "src/react/branchActivity.ts",
      "line": 101,
      "col": 21,
      "kind": "nullish-coalescing",
      "snippet": "state?.activeStreams ?? []",
      "context": "filteredState: CodexBranchActivityThreadState = { pendingApprovals: (state?.pendingApprovals ?? []).filter( (approval) => hasTurnId(approval) && typeof approval.turnId === \"stri..."
    },
    {
      "description": "Branch activity defaults missing lifecycleMarkers collection to empty list before branch filtering.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_af4ae7038b8b",
      "file": "src/react/branchActivity.ts",
      "line": 104,
      "col": 24,
      "kind": "nullish-coalescing",
      "snippet": "state?.lifecycleMarkers ?? []",
      "context": "filteredState: CodexBranchActivityThreadState = { pendingApprovals: (state?.pendingApprovals ?? []).filter( (approval) => hasTurnId(approval) && typeof approval.turnId === \"stri..."
    },
    {
      "description": "Branch activity defaults missing turns collection to empty list before filtering by selected branch.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_c26cf32d36a5",
      "file": "src/react/branchActivity.ts",
      "line": 107,
      "col": 13,
      "kind": "nullish-coalescing",
      "snippet": "state?.turns ?? []",
      "context": "filteredState: CodexBranchActivityThreadState = { pendingApprovals: (state?.pendingApprovals ?? []).filter( (approval) => hasTurnId(approval) && typeof approval.turnId === \"stri..."
    },
    {
      "description": "Branch signal check treats missing pendingApprovals length as 0.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_0b4c6a09d559",
      "file": "src/react/branchActivity.ts",
      "line": 113,
      "col": 6,
      "kind": "nullish-coalescing",
      "snippet": "filteredState.pendingApprovals?.length ?? 0",
      "context": "hasBranchSignals = (filteredState.pendingApprovals?.length ?? 0) > 0 || (filteredState.recentMessages?.length ?? 0) > 0 || (filteredState.dispatches?.length ?? 0) > 0 || (filter..."
    },
    {
      "description": "Branch signal check treats missing recentMessages length as 0.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_37b1e9e72c56",
      "file": "src/react/branchActivity.ts",
      "line": 114,
      "col": 6,
      "kind": "nullish-coalescing",
      "snippet": "filteredState.recentMessages?.length ?? 0",
      "context": "hasBranchSignals = (filteredState.pendingApprovals?.length ?? 0) > 0 || (filteredState.recentMessages?.length ?? 0) > 0 || (filteredState.dispatches?.length ?? 0) > 0 || (filter..."
    },
    {
      "description": "Branch signal check treats missing dispatches length as 0.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_62e92379917d",
      "file": "src/react/branchActivity.ts",
      "line": 115,
      "col": 6,
      "kind": "nullish-coalescing",
      "snippet": "filteredState.dispatches?.length ?? 0",
      "context": "hasBranchSignals = (filteredState.pendingApprovals?.length ?? 0) > 0 || (filteredState.recentMessages?.length ?? 0) > 0 || (filteredState.dispatches?.length ?? 0) > 0 || (filter..."
    },
    {
      "description": "Branch signal check treats missing activeStreams length as 0.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_bac8457c2255",
      "file": "src/react/branchActivity.ts",
      "line": 116,
      "col": 6,
      "kind": "nullish-coalescing",
      "snippet": "filteredState.activeStreams?.length ?? 0",
      "context": "hasBranchSignals = (filteredState.pendingApprovals?.length ?? 0) > 0 || (filteredState.recentMessages?.length ?? 0) > 0 || (filteredState.dispatches?.length ?? 0) > 0 || (filter..."
    },
    {
      "description": "Branch signal check treats missing lifecycleMarkers length as 0.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_00045fc73dc3",
      "file": "src/react/branchActivity.ts",
      "line": 117,
      "col": 6,
      "kind": "nullish-coalescing",
      "snippet": "filteredState.lifecycleMarkers?.length ?? 0",
      "context": "hasBranchSignals = (filteredState.pendingApprovals?.length ?? 0) > 0 || (filteredState.recentMessages?.length ?? 0) > 0 || (filteredState.dispatches?.length ?? 0) > 0 || (filter..."
    },
    {
      "description": "Branch signal check treats missing turns length as 0.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_652adf099970",
      "file": "src/react/branchActivity.ts",
      "line": 118,
      "col": 6,
      "kind": "nullish-coalescing",
      "snippet": "filteredState.turns?.length ?? 0",
      "context": "hasBranchSignals = (filteredState.pendingApprovals?.length ?? 0) > 0 || (filteredState.recentMessages?.length ?? 0) > 0 || (filteredState.dispatches?.length ?? 0) > 0 || (filter..."
    },
    {
      "description": "Provider default initialNumItems is 30 when caller does not specify pagination size.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_ee1c28c31903",
      "file": "src/react/CodexProvider.tsx",
      "line": 26,
      "col": 3,
      "kind": "binding-default",
      "snippet": "initialNumItems = 30",
      "context": "export function CodexProvider<Actor extends Record<string, unknown> = Record<string, unknown>>({ api, actor, initialNumItems = 30, stream = true, children, }: CodexProviderProps..."
    },
    {
      "description": "Provider defaults streaming mode to true unless explicitly overridden.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_039a793b7acb",
      "file": "src/react/CodexProvider.tsx",
      "line": 27,
      "col": 3,
      "kind": "binding-default",
      "snippet": "stream = true",
      "context": "export function CodexProvider<Actor extends Record<string, unknown> = Record<string, unknown>>({ api, actor, initialNumItems = 30, stream = true, children, }: CodexProviderProps..."
    },
    {
      "description": "Provider falls back actor to empty object with cast when actor is omitted; convenient but can mask missing actor wiring.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_a2352c551807",
      "file": "src/react/CodexProvider.tsx",
      "line": 32,
      "col": 14,
      "kind": "nullish-coalescing",
      "snippet": "actor ?? ({} as Record<string, unknown>)",
      "context": "() => ({ actor: actor ?? ({} as Record<string, unknown>), listThreadMessages: api.listThreadMessages as CodexMessagesQuery<unknown>, threadSnapshotSafe: api.threadSnapshotSafe a..."
    },
    {
      "description": "Dynamic tool derivation defaults missing request list to empty array.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_94053e4e451b",
      "file": "src/react/dynamicTools.ts",
      "line": 75,
      "col": 16,
      "kind": "nullish-coalescing",
      "snippet": "requests ?? []",
      "context": "list = requests ?? []"
    },
    {
      "description": "Ingest health defaults missing streamStats to empty list.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_6332c4bed1ea",
      "file": "src/react/ingestHealth.ts",
      "line": 99,
      "col": 23,
      "kind": "nullish-coalescing",
      "snippet": "state.streamStats ?? []",
      "context": "streamStats = state.streamStats ?? []"
    },
    {
      "description": "Ingest health defaults missing recentMessages to empty list.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_95465ae2091f",
      "file": "src/react/ingestHealth.ts",
      "line": 100,
      "col": 20,
      "kind": "nullish-coalescing",
      "snippet": "state.recentMessages ?? []",
      "context": "messages = state.recentMessages ?? []"
    },
    {
      "description": "Ingest health defaults missing pendingApprovals to empty list.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_a44ae17ba99d",
      "file": "src/react/ingestHealth.ts",
      "line": 101,
      "col": 28,
      "kind": "nullish-coalescing",
      "snippet": "state.pendingApprovals ?? []",
      "context": "pendingApprovals = state.pendingApprovals ?? []"
    },
    {
      "description": "Ingest health defaults missing dispatches to empty list.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_51968000b049",
      "file": "src/react/ingestHealth.ts",
      "line": 102,
      "col": 22,
      "kind": "nullish-coalescing",
      "snippet": "state.dispatches ?? []",
      "context": "dispatches = state.dispatches ?? []"
    },
    {
      "description": "Ingest health defaults missing turns to empty list.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_df01c11b114f",
      "file": "src/react/ingestHealth.ts",
      "line": 103,
      "col": 17,
      "kind": "nullish-coalescing",
      "snippet": "state.turns ?? []",
      "context": "turns = state.turns ?? []"
    },
    {
      "description": "Optimistic send scans empty page list when query page data is absent.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_a762714aaa04",
      "file": "src/react/optimisticallySendCodexMessage.ts",
      "line": 50,
      "col": 29,
      "kind": "nullish-coalescing",
      "snippet": "q.value?.page ?? []",
      "context": "for (const message of q.value?.page ?? []) { if (message.turnId !== args.turnId) { continue; } maxOrderInTurn = Math.max(maxOrderInTurn, message.orderInTurn); }"
    },
    {
      "description": "Optimistic user message id defaults to generated random id when not provided.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_1926502fb735",
      "file": "src/react/optimisticallySendCodexMessage.ts",
      "line": 60,
      "col": 27,
      "kind": "nullish-coalescing",
      "snippet": "args.messageId ?? randomId()",
      "context": "userMessageId = args.messageId ?? randomId()"
    },
    {
      "description": "Optimistic assistant placeholder id defaults to generated random id when not provided.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_1a3f02e42ff2",
      "file": "src/react/optimisticallySendCodexMessage.ts",
      "line": 88,
      "col": 32,
      "kind": "nullish-coalescing",
      "snippet": "args.assistantPlaceholderId ?? randomId()",
      "context": "assistantMessageId = args.assistantPlaceholderId ?? randomId()"
    },
    {
      "description": "Token usage modelContextWindow defaults to null when latest turn omits the field.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_ea5024892acc",
      "file": "src/react/tokenUsage.ts",
      "line": 45,
      "col": 25,
      "kind": "nullish-coalescing",
      "snippet": "latest.modelContextWindow ?? null",
      "context": "return { status: \"ready\", turns: rawTurns, cumulative: latest.total, modelContextWindow: latest.modelContextWindow ?? null, };"
    },
    {
      "description": "useCodex assumes actorReady=true by default unless explicitly set false.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_6ac2fed55648",
      "file": "src/react/useCodex.ts",
      "line": 55,
      "col": 22,
      "kind": "nullish-coalescing",
      "snippet": "options.actorReady ?? true",
      "context": "actorReady = options.actorReady ?? true"
    },
    {
      "description": "useCodex falls back initialNumItems to provider default when option is omitted.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_70c005d71f05",
      "file": "src/react/useCodex.ts",
      "line": 56,
      "col": 27,
      "kind": "nullish-coalescing",
      "snippet": "options.initialNumItems ?? ctx.defaultInitialNumItems",
      "context": "initialNumItems = options.initialNumItems ?? ctx.defaultInitialNumItems"
    },
    {
      "description": "useCodex falls back stream option to provider default when option is omitted.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_0277a86feadd",
      "file": "src/react/useCodex.ts",
      "line": 57,
      "col": 18,
      "kind": "nullish-coalescing",
      "snippet": "options.stream ?? ctx.defaultStream",
      "context": "stream = options.stream ?? ctx.defaultStream"
    },
    {
      "description": "useCodexChat initializes disabledTools from config, defaulting to empty list.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_6724fe804730",
      "file": "src/react/useCodexChat.ts",
      "line": 171,
      "col": 23,
      "kind": "nullish-coalescing",
      "snippet": "config.dynamicTools?.disabledTools ?? []",
      "context": "() => normalizeToolList(config.dynamicTools?.disabledTools ?? [])"
    },
    {
      "description": "useCodexChat merges dynamic tool handlers with empty object when config handlers are absent.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_0b15ea8640bd",
      "file": "src/react/useCodexChat.ts",
      "line": 264,
      "col": 11,
      "kind": "nullish-coalescing",
      "snippet": "config.dynamicTools?.handlers ?? {}",
      "context": "handlers: CodexDynamicToolsHandlerMap = { ...(config.dynamicTools?.handlers ?? {}), ...toolOverrides, }"
    },
    {
      "description": "Conversation controller falls back dynamic-tools query to thread-state query when dedicated dynamic query is absent; may couple tool handling to thread query shape.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_9b0fb18fdd37",
      "file": "src/react/useCodexConversationController.ts",
      "line": 118,
      "col": 5,
      "kind": "nullish-coalescing",
      "snippet": "config.dynamicTools?.query ?? config.threadState.query",
      "context": "dynamicToolsQuery: FunctionReference<\"query\", \"public\", Record<string, unknown>, unknown> = config.dynamicTools?.query ?? config.threadState.query"
    },
    {
      "description": "Conversation controller defaults dynamic-tools args to \"skip\" when args are omitted, disabling dynamic tool request fetch by default.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_8814d9448b26",
      "file": "src/react/useCodexConversationController.ts",
      "line": 119,
      "col": 28,
      "kind": "nullish-coalescing",
      "snippet": "config.dynamicTools?.args ?? \"skip\"",
      "context": "dynamicToolsArgs = config.dynamicTools?.args ?? \"skip\""
    },
    {
      "description": "Conversation controller initializes composer text to empty string when no initialValue is configured.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_7ec850979210",
      "file": "src/react/useCodexConversationController.ts",
      "line": 131,
      "col": 54,
      "kind": "nullish-coalescing",
      "snippet": "config.composer?.initialValue ?? \"\"",
      "context": "[composerValue, setComposerValue] = useState(config.composer?.initialValue ?? \"\")"
    },
    {
      "description": "Conversation controller defaults pending approvals list to empty array before filtering approval-like items.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_b83e06df605a",
      "file": "src/react/useCodexConversationController.ts",
      "line": 139,
      "col": 17,
      "kind": "nullish-coalescing",
      "snippet": "threadState?.pendingApprovals ?? []",
      "context": "raw = threadState?.pendingApprovals ?? []"
    },
    {
      "description": "Composer send path uses current composer value when overrideText is not provided.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_57e53bbf3ed9",
      "file": "src/react/useCodexConversationController.ts",
      "line": 148,
      "col": 21,
      "kind": "nullish-coalescing",
      "snippet": "overrideText ?? composerValue",
      "context": "text = (overrideText ?? composerValue).trim()"
    },
    {
      "description": "Dynamic tools hook defaults enabled=true, so auto-processing is active unless explicitly disabled.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_b32bafc7b6fa",
      "file": "src/react/useCodexDynamicTools.ts",
      "line": 139,
      "col": 10,
      "kind": "nullish-coalescing",
      "snippet": "options.enabled ?? true",
      "context": "if ((options.enabled ?? true) !== true) { return; }"
    },
    {
      "description": "Dynamic tools hook defaults autoHandle=true, enabling automatic handler execution by default.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_262f7eaa688c",
      "file": "src/react/useCodexDynamicTools.ts",
      "line": 142,
      "col": 10,
      "kind": "nullish-coalescing",
      "snippet": "options.autoHandle ?? true",
      "context": "if ((options.autoHandle ?? true) !== true) { return; }"
    },
    {
      "description": "Dynamic tools hook returns empty requests list when query data is missing.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_756b40812fd5",
      "file": "src/react/useCodexDynamicTools.ts",
      "line": 171,
      "col": 17,
      "kind": "nullish-coalescing",
      "snippet": "requests ?? []",
      "context": "() => ({ requests: requests ?? [], calls, pendingCount: calls.length, runningRequestIds, lastError, runCall, respond, })"
    },
    {
      "description": "Runtime bridge hook starts from a default disconnected initial state when none is supplied.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_7167255f5e8d",
      "file": "src/react/useCodexRuntimeBridge.ts",
      "line": 49,
      "col": 5,
      "kind": "nullish-coalescing",
      "snippet": "options?.initialState ?? { running: false, threadId: null, turnId: null, lastError: null }",
      "context": "[state, setState] = useState<CodexRuntimeBridgeState>( options?.initialState ?? { running: false, threadId: null, turnId: null, lastError: null }, )"
    },
    {
      "description": "Streaming messages overlay is enabled by default unless options.enabled is explicitly false.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_155d2b1b5177",
      "file": "src/react/useCodexStreamingMessages.ts",
      "line": 17,
      "col": 54,
      "kind": "nullish-coalescing",
      "snippet": "options?.enabled ?? true",
      "context": "overlay = useCodexStreamOverlay(query, args, options?.enabled ?? true, { ...(options?.startOrder !== undefined ? { startOrder: options.startOrder } : {}), })"
    },
    {
      "description": "Streaming reasoning overlay is enabled by default unless options.enabled is explicitly false.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_3f212cd85464",
      "file": "src/react/useCodexStreamingReasoning.ts",
      "line": 20,
      "col": 54,
      "kind": "nullish-coalescing",
      "snippet": "options?.enabled ?? true",
      "context": "overlay = useCodexStreamOverlay(query, args, options?.enabled ?? true, { ...(options?.startOrder !== undefined ? { startOrder: options.startOrder } : {}), })"
    },
    {
      "description": "Streaming reasoning excludes raw reasoning segments by default unless includeRaw is explicitly enabled.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_ad31f76759f7",
      "file": "src/react/useCodexStreamingReasoning.ts",
      "line": 26,
      "col": 19,
      "kind": "nullish-coalescing",
      "snippet": "options?.includeRaw ?? false",
      "context": "byKey = extractCodexReasoningOverlaySegments(overlay.deltas, { includeRaw: options?.includeRaw ?? false, })"
    },
    {
      "description": "Stream overlay initializes per-stream cursor baseline to 0 when merging checkpoint cursors.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_3491d4737d9f",
      "file": "src/react/useCodexStreamOverlay.ts",
      "line": 90,
      "col": 9,
      "kind": "nullish-coalescing",
      "snippet": "nextOnly[checkpoint.streamId] ?? 0",
      "context": "nextOnly[checkpoint.streamId] = Math.max( nextOnly[checkpoint.streamId] ?? 0, checkpoint.cursor, );"
    },
    {
      "description": "Stream overlay treats missing current cursor as 0 when applying incoming deltas for a stream.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_fa32be130908",
      "file": "src/react/useCodexStreamOverlay.ts",
      "line": 135,
      "col": 27,
      "kind": "nullish-coalescing",
      "snippet": "nextCursors[delta.streamId] ?? 0",
      "context": "currentCursor = nextCursors[delta.streamId] ?? 0"
    },
    {
      "description": "Stream overlay initializes checkpoint merge cursor to 0 when current stream cursor is absent.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_8afe387b2384",
      "file": "src/react/useCodexStreamOverlay.ts",
      "line": 150,
      "col": 7,
      "kind": "nullish-coalescing",
      "snippet": "nextCursors[checkpoint.streamId] ?? 0",
      "context": "nextCursors[checkpoint.streamId] = Math.max( nextCursors[checkpoint.streamId] ?? 0, checkpoint.cursor, );"
    },
    {
      "description": "Stream overlay query args default each stream cursor to 0 when cursor map entry is missing.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_df288cecfccb",
      "file": "src/react/useCodexStreamOverlay.ts",
      "line": 205,
      "col": 19,
      "kind": "nullish-coalescing",
      "snippet": "overlayState.cursorsByStreamId[streamId] ?? 0",
      "context": "(streamId) => ({ streamId, cursor: overlayState.cursorsByStreamId[streamId] ?? 0, })"
    },
    {
      "description": "Threads hook initializes selected thread to null when no initialSelectedThreadId is provided.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_55823dfa3f1d",
      "file": "src/react/useCodexThreads.ts",
      "line": 42,
      "col": 5,
      "kind": "nullish-coalescing",
      "snippet": "config.initialSelectedThreadId ?? null",
      "context": "[selectedThreadId, setSelectedThreadId] = useState<string | null>( config.initialSelectedThreadId ?? null, )"
    }
  ]
}
