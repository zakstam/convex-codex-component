{
  "version": 1,
  "entries": [
    {
      "description": "Default includeTurns to false for thread/read requests to avoid unexpectedly large responses when callers omit the flag.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_6c9ddb2b6265",
      "file": "src/app-server/client.ts",
      "line": 127,
      "col": 19,
      "kind": "nullish-coalescing",
      "snippet": "params.includeTurns ?? false",
      "context": "return buildClientRequest(\"thread/read\", id, { threadId: params.threadId, includeTurns: params.includeTurns ?? false, });"
    },
    {
      "description": "Default ThreadListParams to an empty object so list requests remain valid and rely on server-side defaults when optional filters are omitted.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_f6a960cdf1c7",
      "file": "src/app-server/client.ts",
      "line": 133,
      "col": 3,
      "kind": "parameter-default",
      "snippet": "params: ThreadListParams = {}",
      "context": "export function buildThreadListRequest( id: number, params: ThreadListParams = {}, ): RequestFor<\"thread/list\"> { return buildClientRequest(\"thread/list\", id, params); }"
    },
    {
      "description": "Default ThreadLoadedListParams to an empty object to preserve backward compatibility for callers that do not pass pagination or filtering arguments.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_c815a6956025",
      "file": "src/app-server/client.ts",
      "line": 140,
      "col": 3,
      "kind": "parameter-default",
      "snippet": "params: ThreadLoadedListParams = {}",
      "context": "export function buildThreadLoadedListRequest( id: number, params: ThreadLoadedListParams = {}, ): RequestFor<\"thread/loaded/list\"> { return buildClientRequest(\"thread/loaded/lis..."
    },
    {
      "description": "Defaults refreshToken to false for account/read to avoid unexpected auth refresh side effects when callers omit the flag.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_1af98041539a",
      "file": "src/app-server/client.ts",
      "line": 284,
      "col": 19,
      "kind": "nullish-coalescing",
      "snippet": "params?.refreshToken ?? false",
      "context": "requestParams: GetAccountParams = { refreshToken: params?.refreshToken ?? false, }"
    },
    {
      "description": "Initializes per-table delete counters at 0 while aggregating batch results; standard accumulator default.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_4ccf333487d6",
      "file": "src/component/deletionCascade.ts",
      "line": 141,
      "col": 39,
      "kind": "nullish-coalescing",
      "snippet": "deletedByTable[step.tableName] ?? 0",
      "context": "deletedByTable[step.tableName] = (deletedByTable[step.tableName] ?? 0) + deleted;"
    },
    {
      "description": "Uses a bounded default deletion batch size when callers do not provide one.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_7b83e7e1383a",
      "file": "src/component/deletionInternal.ts",
      "line": 13,
      "col": 31,
      "kind": "nullish-coalescing",
      "snippet": "batchSize ?? DELETE_BATCH_DEFAULT",
      "context": "return Math.max(1, Math.min(batchSize ?? DELETE_BATCH_DEFAULT, DELETE_BATCH_MAX));"
    },
    {
      "description": "Applies default deletion grace delay and clamps to min/max bounds for safe scheduling.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_3881decc6019",
      "file": "src/component/deletionUtils.ts",
      "line": 29,
      "col": 14,
      "kind": "nullish-coalescing",
      "snippet": "delayMs ?? DEFAULT_DELETE_GRACE_MS",
      "context": "return Math.max( MIN_DELETE_GRACE_MS, Math.min(delayMs ?? DEFAULT_DELETE_GRACE_MS, MAX_DELETE_GRACE_MS), );"
    },
    {
      "description": "Initializes merged deletion-count totals at 0 while combining count maps.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_ad638580edb9",
      "file": "src/component/deletionUtils.ts",
      "line": 79,
      "col": 26,
      "kind": "nullish-coalescing",
      "snippet": "merged[tableName] ?? 0",
      "context": "merged[tableName] = (merged[tableName] ?? 0) + count;"
    },
    {
      "description": "Falls back to existing message status when durableMessage status is missing; may hide upstream payload incompleteness.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_7687134cd737",
      "file": "src/component/ingest/applyMessages.ts",
      "line": 61,
      "col": 16,
      "kind": "nullish-coalescing",
      "snippet": "event.durableMessage?.status ?? existing.status",
      "context": "return event.durableMessage?.status ?? existing.status;"
    },
    {
      "description": "Defaults missing reasoning text delta to empty string to keep segment insertion stable.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_2c290886c26f",
      "file": "src/component/ingest/applyMessages.ts",
      "line": 114,
      "col": 13,
      "kind": "nullish-coalescing",
      "snippet": "event.reasoningDelta.delta ?? \"\"",
      "context": "await ingest.ctx.db.insert(\"codex_reasoning_segments\", { userScope: userScopeFromActor(ingest.args.actor), ...(ingest.args.actor.userId !== undefined ? { userId: ingest.args.act..."
    },
    {
      "description": "Defaults expected stream cursor to 0 for unseen streams; correct for first event but sensitive if stream identity mapping is wrong.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_aaabcd8a6f19",
      "file": "src/component/ingest/applyStreams.ts",
      "line": 132,
      "col": 32,
      "kind": "nullish-coalescing",
      "snippet": "ingest.streamState.expectedCursorByStreamId.get(event.streamId) ?? 0",
      "context": "streamExpectedCursor = ingest.streamState.expectedCursorByStreamId.get(event.streamId) ?? 0"
    },
    {
      "description": "Defaults checkpoint cursor to 0 when no prior checkpoint exists for this stream.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_2a8a37204e9d",
      "file": "src/component/ingest/applyStreams.ts",
      "line": 151,
      "col": 9,
      "kind": "nullish-coalescing",
      "snippet": "ingest.streamState.streamCheckpointCursorByStreamId.get(event.streamId) ?? 0",
      "context": "ingest.streamState.streamCheckpointCursorByStreamId.set( event.streamId, Math.max( ingest.streamState.streamCheckpointCursorByStreamId.get(event.streamId) ?? 0, Number(existingS..."
    },
    {
      "description": "Defaults checkpoint cursor to 0 when no prior checkpoint exists for this stream.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_2c0c8f0db694",
      "file": "src/component/ingest/applyStreams.ts",
      "line": 216,
      "col": 14,
      "kind": "nullish-coalescing",
      "snippet": "ingest.streamState.streamCheckpointCursorByStreamId.get(event.streamId) ?? 0",
      "context": "ingest.streamState.streamCheckpointCursorByStreamId.set( event.streamId, Math.max(ingest.streamState.streamCheckpointCursorByStreamId.get(event.streamId) ?? 0, event.cursorEnd), );"
    },
    {
      "description": "Prefers payload turnId over envelope turnId, but now fail-closes on non-placeholder mismatches to prevent silent turn-id drift.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_a745ef4c8e9d",
      "file": "src/component/ingest/normalize.ts",
      "line": 71,
      "col": 30,
      "kind": "nullish-coalescing",
      "snippet": "payloadTurnId ?? event.turnId",
      "context": "resolvedTurnId = payloadTurnId ?? event.turnId"
    },
    {
      "description": "For lifecycle events, omits turnId when payload does not provide a canonical turn id.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_41673d0e27bb",
      "file": "src/component/ingest/normalize.ts",
      "line": 86,
      "col": 28,
      "kind": "nullish-coalescing",
      "snippet": "payloadTurnId ?? undefined",
      "context": "resolvedTurnId = payloadTurnId ?? undefined"
    },
    {
      "description": "Returns null when sync error code prefix is absent; explicit sentinel for unknown error format.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_bb2b531066ea",
      "file": "src/component/ingest/sessionGuard.ts",
      "line": 25,
      "col": 10,
      "kind": "nullish-coalescing",
      "snippet": "match?.[1] ?? null",
      "context": "return match?.[1] ?? null;"
    },
    {
      "description": "Returns empty cursor when thread is missing so paginated message response remains valid and done.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_9d87e8cb985b",
      "file": "src/component/messages.ts",
      "line": 46,
      "col": 27,
      "kind": "nullish-coalescing",
      "snippet": "args.paginationOpts.cursor ?? \"\"",
      "context": "return { page: [], isDone: true, continueCursor: args.paginationOpts.cursor ?? \"\", };"
    },
    {
      "description": "Preserves existing pagination cursor or empty string when page is empty to maintain Convex PaginationResult contract.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_4ec916ac2c69",
      "file": "src/component/pagination.ts",
      "line": 44,
      "col": 10,
      "kind": "nullish-coalescing",
      "snippet": "paginationOpts.cursor ?? \"\"",
      "context": "continueCursor = page.length > 0 ? encodeKeysetCursor(getCursor(page[page.length - 1]!)) : (paginationOpts.cursor ?? \"\")"
    },
    {
      "description": "Defaults pending server-request list limit to 100 and clamps to [1,200].",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_b5cfdf9ced62",
      "file": "src/component/serverRequests.ts",
      "line": 248,
      "col": 45,
      "kind": "nullish-coalescing",
      "snippet": "args.limit ?? 100",
      "context": "limit = Math.max(1, Math.min(200, args.limit ?? 100))"
    },
    {
      "description": "Defaults finished-stream cleanup batch size and clamps to configured bounds.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_a78a528dfbfc",
      "file": "src/component/streams.ts",
      "line": 104,
      "col": 16,
      "kind": "nullish-coalescing",
      "snippet": "args.batchSize ?? STREAM_CLEANUP_BATCH_SIZE_DEFAULT",
      "context": "batchSize = Math.max( 1, Math.min(args.batchSize ?? STREAM_CLEANUP_BATCH_SIZE_DEFAULT, STREAM_CLEANUP_BATCH_SIZE_MAX), )"
    },
    {
      "description": "Defaults expired-delta cleanup batch size to 1000 with upper/lower clamps.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_511674e14a50",
      "file": "src/component/streams.ts",
      "line": 203,
      "col": 44,
      "kind": "nullish-coalescing",
      "snippet": "args.batchSize ?? 1000",
      "context": "batchSize = Math.max(1, Math.min(args.batchSize ?? 1000, 5000))"
    },
    {
      "description": "Defaults data-hygiene sample size to 1000 with upper/lower clamps.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_0ba80707296a",
      "file": "src/component/streams.ts",
      "line": 239,
      "col": 45,
      "kind": "nullish-coalescing",
      "snippet": "args.sampleSize ?? 1000",
      "context": "sampleSize = Math.max(1, Math.min(args.sampleSize ?? 1000, 5000))"
    },
    {
      "description": "Defaults ensureLastEventCursor to 0 and clamps non-negative so safe-ingest replay checks always have a baseline cursor.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_13c1f7a035f4",
      "file": "src/component/syncIngest.ts",
      "line": 67,
      "col": 47,
      "kind": "nullish-coalescing",
      "snippet": "args.ensureLastEventCursor ?? 0",
      "context": "ensureCursor = Math.max(0, Math.floor(args.ensureLastEventCursor ?? 0))"
    },
    {
      "description": "Uses checkpoint ackedCursor default 0 when no checkpoint exists for a stream replay window.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_72bb34aa3d7a",
      "file": "src/component/syncReplay.ts",
      "line": 91,
      "col": 63,
      "kind": "nullish-coalescing",
      "snippet": "checkpoint?.ackedCursor ?? 0",
      "context": "effectiveCursor = Math.max(args.requestedCursor, Number(checkpoint?.ackedCursor ?? 0))"
    },
    {
      "description": "Runtime option default: do not persist stream text deltas unless explicitly enabled.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_8440806446fc",
      "file": "src/component/syncRuntime.ts",
      "line": 52,
      "col": 23,
      "kind": "nullish-coalescing",
      "snippet": "options?.saveStreamDeltas ?? false",
      "context": "return { saveStreamDeltas: options?.saveStreamDeltas ?? false, saveReasoningDeltas: options?.saveReasoningDeltas ?? true, exposeRawReasoningDeltas: options?.exposeRawReasoningDe..."
    },
    {
      "description": "Runtime option default: persist reasoning summary deltas unless explicitly disabled.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_2e91802b1372",
      "file": "src/component/syncRuntime.ts",
      "line": 53,
      "col": 26,
      "kind": "nullish-coalescing",
      "snippet": "options?.saveReasoningDeltas ?? true",
      "context": "return { saveStreamDeltas: options?.saveStreamDeltas ?? false, saveReasoningDeltas: options?.saveReasoningDeltas ?? true, exposeRawReasoningDeltas: options?.exposeRawReasoningDe..."
    },
    {
      "description": "Runtime option default: do not expose raw reasoning deltas unless explicitly enabled.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_20182f20f364",
      "file": "src/component/syncRuntime.ts",
      "line": 54,
      "col": 31,
      "kind": "nullish-coalescing",
      "snippet": "options?.exposeRawReasoningDeltas ?? false",
      "context": "return { saveStreamDeltas: options?.saveStreamDeltas ?? false, saveReasoningDeltas: options?.saveReasoningDeltas ?? true, exposeRawReasoningDeltas: options?.exposeRawReasoningDe..."
    },
    {
      "description": "Runtime option default for finished-stream delete delay uses configured constant when unset.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_86bcb55cd47a",
      "file": "src/component/syncRuntime.ts",
      "line": 66,
      "col": 9,
      "kind": "nullish-coalescing",
      "snippet": "options?.finishedStreamDeleteDelayMs ?? DEFAULT_FINISHED_STREAM_DELETE_DELAY_MS",
      "context": "return { saveStreamDeltas: options?.saveStreamDeltas ?? false, saveReasoningDeltas: options?.saveReasoningDeltas ?? true, exposeRawReasoningDeltas: options?.exposeRawReasoningDe..."
    },
    {
      "description": "Thread update preserves existing model when caller omits model in patch args.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_d08a09ab3ea4",
      "file": "src/component/threadHelpers.ts",
      "line": 45,
      "col": 14,
      "kind": "nullish-coalescing",
      "snippet": "args.model ?? existing.model",
      "context": "await ctx.db.patch(existing._id, { updatedAt: ts, model: args.model ?? existing.model, cwd: args.cwd ?? existing.cwd, personality: args.personality ?? existing.personality, loca..."
    },
    {
      "description": "Thread update preserves existing cwd when caller omits cwd in patch args.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_d58c43c373a6",
      "file": "src/component/threadHelpers.ts",
      "line": 46,
      "col": 12,
      "kind": "nullish-coalescing",
      "snippet": "args.cwd ?? existing.cwd",
      "context": "await ctx.db.patch(existing._id, { updatedAt: ts, model: args.model ?? existing.model, cwd: args.cwd ?? existing.cwd, personality: args.personality ?? existing.personality, loca..."
    },
    {
      "description": "Thread update preserves existing personality when caller omits personality in patch args.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_d612a3770568",
      "file": "src/component/threadHelpers.ts",
      "line": 47,
      "col": 20,
      "kind": "nullish-coalescing",
      "snippet": "args.personality ?? existing.personality",
      "context": "await ctx.db.patch(existing._id, { updatedAt: ts, model: args.model ?? existing.model, cwd: args.cwd ?? existing.cwd, personality: args.personality ?? existing.personality, loca..."
    },
    {
      "description": "Thread update preserves existing localThreadId when caller omits localThreadId in patch args.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_0c1b80c41e13",
      "file": "src/component/threadHelpers.ts",
      "line": 48,
      "col": 22,
      "kind": "nullish-coalescing",
      "snippet": "args.localThreadId ?? existing.localThreadId",
      "context": "await ctx.db.patch(existing._id, { updatedAt: ts, model: args.model ?? existing.model, cwd: args.cwd ?? existing.cwd, personality: args.personality ?? existing.personality, loca..."
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_05cb6b4ca66c",
      "file": "src/component/threads.ts",
      "line": 622,
      "col": 51,
      "kind": "nullish-coalescing",
      "snippet": "existing.rebindCount ?? 0",
      "context": "await ctx.db.patch(existing._id, { conversationId, conversationRef: touched.threadRef, runtimeConversationId: args.runtimeConversationId, syncState, syncJobState: \"idle\", syncJo..."
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_047eeba66389",
      "file": "src/component/threads.ts",
      "line": 722,
      "col": 34,
      "kind": "nullish-coalescing",
      "snippet": "args.syncState ?? \"synced\"",
      "context": "nextState: SyncState = args.syncState ?? \"synced\""
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_a666340288ae",
      "file": "src/component/threads.ts",
      "line": 736,
      "col": 21,
      "kind": "nullish-coalescing",
      "snippet": "binding.syncState ?? \"unsynced\"",
      "context": "return { threadId: String(binding.threadId), conversationId: String(binding.conversationId), ...(binding.runtimeConversationId !== undefined ? { runtimeConversationId: String(bi..."
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_23a6541fef1f",
      "file": "src/component/threads.ts",
      "line": 737,
      "col": 34,
      "kind": "nullish-coalescing",
      "snippet": "binding.lastSyncedCursor ?? 0",
      "context": "return { threadId: String(binding.threadId), conversationId: String(binding.conversationId), ...(binding.runtimeConversationId !== undefined ? { runtimeConversationId: String(bi..."
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_794d93b12e6a",
      "file": "src/component/threads.ts",
      "line": 759,
      "col": 25,
      "kind": "nullish-coalescing",
      "snippet": "args.syncJobUpdatedAt ?? ts",
      "context": "await ctx.db.patch(binding._id, { ...(args.runtimeConversationId !== undefined ? { runtimeConversationId: args.runtimeConversationId } : {}), ...(args.sessionId !== undefined ? ..."
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_77090a666417",
      "file": "src/component/threads.ts",
      "line": 795,
      "col": 25,
      "kind": "nullish-coalescing",
      "snippet": "args.syncJobUpdatedAt ?? ts",
      "context": "return { threadId: String(binding.threadId), conversationId: String(binding.conversationId), ...(args.runtimeConversationId !== undefined ? { runtimeConversationId: args.runtime..."
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_94c17e84411d",
      "file": "src/component/threads.ts",
      "line": 835,
      "col": 32,
      "kind": "nullish-coalescing",
      "snippet": "binding.rebindCount ?? 0",
      "context": "rebindCount = Number(binding.rebindCount ?? 0) + 1"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_814fa0421713",
      "file": "src/component/threads.ts",
      "line": 882,
      "col": 22,
      "kind": "nullish-coalescing",
      "snippet": "args.threadId ?? String(binding!.threadId)",
      "context": "threadId = args.threadId ?? String(binding!.threadId)"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_c959a3b47a82",
      "file": "src/component/threads.ts",
      "line": 1039,
      "col": 29,
      "kind": "nullish-coalescing",
      "snippet": "source.totalChunks ?? 0",
      "context": "return { sourceId: args.sourceId, sourceState, totalChunks: Number(source.totalChunks ?? 0), jobId: existingJob ? String(existingJob.jobId) : \"\", scheduled: false, };"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_ba9c28db0c19",
      "file": "src/component/threads.ts",
      "line": 1045,
      "col": 34,
      "kind": "nullish-coalescing",
      "snippet": "args.expectedMessageCount ?? manifest.length",
      "context": "expectedMessageCount = args.expectedMessageCount ?? manifest.length"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_2c21558b7c66",
      "file": "src/component/threads.ts",
      "line": 1063,
      "col": 68,
      "kind": "nullish-coalescing",
      "snippet": "sortedIndices[i] ?? \"none\"",
      "context": "await ctx.db.patch(source._id, { state: \"failed\", updatedAt: ts, lastErrorCode: \"E_SYNC_SOURCE_CHUNK_INDEX_GAP\", lastErrorMessage: `Expected chunk index ${i} but found ${sortedI..."
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_8587082d4063",
      "file": "src/component/threads.ts",
      "line": 1069,
      "col": 75,
      "kind": "nullish-coalescing",
      "snippet": "row.messageCount ?? 0",
      "context": "(sum, row) => sum + Number(row.messageCount ?? 0)"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_75635817d81b",
      "file": "src/component/threads.ts",
      "line": 1070,
      "col": 71,
      "kind": "nullish-coalescing",
      "snippet": "row.byteSize ?? 0",
      "context": "(sum, row) => sum + Number(row.byteSize ?? 0)"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_c3a284aa193d",
      "file": "src/component/threads.ts",
      "line": 1209,
      "col": 35,
      "kind": "nullish-coalescing",
      "snippet": "job.lastCursor ?? 0",
      "context": "await ctx.db.patch(binding._id, { syncState: \"drifted\", syncJobState: \"cancelled\", syncJobUpdatedAt: ts, syncJobLastCursor: Number(job.lastCursor ?? 0), ...(args.errorCode !== u..."
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_0ea5f13b44dc",
      "file": "src/component/threads.ts",
      "line": 1322,
      "col": 38,
      "kind": "nullish-coalescing",
      "snippet": "args.limit ?? 20",
      "context": "rows = await ctx.db .query(\"codex_sync_import_jobs\") .withIndex(\"userScope_userId_conversationId_startedAt\", (q) => q.eq(\"userScope\", userScope).eq(\"userId\", args.actor.userId)...."
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_fb34e786c706",
      "file": "src/component/threads.ts",
      "line": 1372,
      "col": 35,
      "kind": "nullish-coalescing",
      "snippet": "job.processedChunkIndex ?? 0",
      "context": "console.log(JSON.stringify({ event: \"sync_job_worker_start\", jobId: args.jobId, state: job.state, sourceState: source.state, processedChunkIndex: Number(job.processedChunkIndex ..."
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_43aae09c22e0",
      "file": "src/component/threads.ts",
      "line": 1373,
      "col": 27,
      "kind": "nullish-coalescing",
      "snippet": "job.totalChunks ?? 0",
      "context": "console.log(JSON.stringify({ event: \"sync_job_worker_start\", jobId: args.jobId, state: job.state, sourceState: source.state, processedChunkIndex: Number(job.processedChunkIndex ..."
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_6bc639da7b05",
      "file": "src/component/threads.ts",
      "line": 1374,
      "col": 26,
      "kind": "nullish-coalescing",
      "snippet": "job.retryCount ?? 0",
      "context": "console.log(JSON.stringify({ event: \"sync_job_worker_start\", jobId: args.jobId, state: job.state, sourceState: source.state, processedChunkIndex: Number(job.processedChunkIndex ..."
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_a74880f8c678",
      "file": "src/component/threads.ts",
      "line": 1418,
      "col": 30,
      "kind": "nullish-coalescing",
      "snippet": "job.leaseVersion ?? 0",
      "context": "await ctx.db.patch(job._id, { state: \"running\", leaseVersion: Number(job.leaseVersion ?? 0) + 1, updatedAt: ts, });"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_8760aec9c2d4",
      "file": "src/component/threads.ts",
      "line": 1422,
      "col": 33,
      "kind": "nullish-coalescing",
      "snippet": "job.processedChunkIndex ?? 0",
      "context": "currentIndex = Number(job.processedChunkIndex ?? 0)"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_a593afc6c425",
      "file": "src/component/threads.ts",
      "line": 1423,
      "col": 32,
      "kind": "nullish-coalescing",
      "snippet": "job.totalChunks ?? 0",
      "context": "totalChunks = Number(job.totalChunks ?? 0)"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_bf91581110da",
      "file": "src/component/threads.ts",
      "line": 1436,
      "col": 18,
      "kind": "nullish-coalescing",
      "snippet": "source.expectedMessageCount ?? expectedManifest.length",
      "context": "if (Number(source.expectedMessageCount ?? expectedManifest.length) !== expectedManifest.length) { await failJob(\"E_SYNC_MANIFEST_INVALID\", \"expectedMessageCount does not match e..."
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_9cda19b0c83e",
      "file": "src/component/threads.ts",
      "line": 1446,
      "col": 104,
      "kind": "nullish-coalescing",
      "snippet": "row.messageCount ?? 0",
      "context": "(sum, row) => sum + Number(row.messageCount ?? 0)"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_5c85cd8e4cf6",
      "file": "src/component/threads.ts",
      "line": 1446,
      "col": 181,
      "kind": "nullish-coalescing",
      "snippet": "row.byteSize ?? 0",
      "context": "(sum, row) => sum + Number(row.byteSize ?? 0)"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_d24b0f931036",
      "file": "src/component/threads.ts",
      "line": 1447,
      "col": 18,
      "kind": "nullish-coalescing",
      "snippet": "source.expectedChecksum ?? \"\"",
      "context": "if (String(source.expectedChecksum ?? \"\") !== derivedChecksum) { await failJob(\"E_SYNC_SOURCE_CHECKSUM_MISMATCH\", \"Stored source checksum no longer matches source chunks.\"); ret..."
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_24df9e2a4513",
      "file": "src/component/threads.ts",
      "line": 1481,
      "col": 36,
      "kind": "nullish-coalescing",
      "snippet": "job.lastCursor ?? 0",
      "context": "await ctx.db.patch(binding._id, { syncState: \"synced\", lastSyncedCursor: Number(job.lastCursor ?? 0), syncJobState: \"synced\", syncJobUpdatedAt: ts, syncJobLastCursor: Number(job..."
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_b1845cc43c25",
      "file": "src/component/threads.ts",
      "line": 1484,
      "col": 37,
      "kind": "nullish-coalescing",
      "snippet": "job.lastCursor ?? 0",
      "context": "await ctx.db.patch(binding._id, { syncState: \"synced\", lastSyncedCursor: Number(job.lastCursor ?? 0), syncJobState: \"synced\", syncJobUpdatedAt: ts, syncJobLastCursor: Number(job..."
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_d835cc04e7b0",
      "file": "src/component/threads.ts",
      "line": 1528,
      "col": 33,
      "kind": "nullish-coalescing",
      "snippet": "chunk.messageCount ?? 0",
      "context": "console.log(JSON.stringify({ event: \"sync_job_chunk_processing\", jobId: args.jobId, chunkIndex: currentIndex, eventCount: events.length, chunkMessageCount: Number(chunk.messageC..."
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_a37cfccc8b4a",
      "file": "src/component/threads.ts",
      "line": 1537,
      "col": 37,
      "kind": "nullish-coalescing",
      "snippet": "job.retryCount ?? 0",
      "context": "nextRetryCount = Number(job.retryCount ?? 0) + 1"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_eefade1c8fad",
      "file": "src/component/threads.ts",
      "line": 1539,
      "col": 25,
      "kind": "nullish-coalescing",
      "snippet": "SYNC_JOB_RETRY_BACKOFF_MS[Math.min(nextRetryCount - 1, SYNC_JOB_RETRY_BACKOFF_MS.length - 1)] ?? 16000",
      "context": "backoffMs = SYNC_JOB_RETRY_BACKOFF_MS[Math.min(nextRetryCount - 1, SYNC_JOB_RETRY_BACKOFF_MS.length - 1)] ?? 16000"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_378d99cb5526",
      "file": "src/component/threads.ts",
      "line": 1568,
      "col": 45,
      "kind": "nullish-coalescing",
      "snippet": "job.lastCursor ?? 0",
      "context": "nextEventCursor = Math.max(Number(job.lastCursor ?? 0), processed.maxEventCursor)"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_5eb00ff98ed0",
      "file": "src/component/threads.ts",
      "line": 1569,
      "col": 46,
      "kind": "nullish-coalescing",
      "snippet": "job.processedMessageCount ?? 0",
      "context": "nextProcessedMessageCount = Number(job.processedMessageCount ?? 0) + Number(chunk.messageCount ?? 0)"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_ae250bff2c1f",
      "file": "src/component/threads.ts",
      "line": 1569,
      "col": 87,
      "kind": "nullish-coalescing",
      "snippet": "chunk.messageCount ?? 0",
      "context": "nextProcessedMessageCount = Number(job.processedMessageCount ?? 0) + Number(chunk.messageCount ?? 0)"
    },
    {
      "description": "Terminal artifact reconciliation falls back to existing turn error/status when new error is absent; can preserve stale error semantics if upstream omits error unexpectedly.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_0c02b1623346",
      "file": "src/component/turnsInternal.ts",
      "line": 66,
      "col": 11,
      "kind": "nullish-coalescing",
      "snippet": "args.error ?? (typeof turn.error === \"string\" && turn.error.length > 0 ? turn.error : status)",
      "context": "error = status === \"completed\" ? undefined : args.error ?? (typeof turn.error === \"string\" && turn.error.length > 0 ? turn.error : status)"
    },
    {
      "description": "Aborted stream reason falls back to terminal status when explicit error is unavailable; acceptable fallback but loses detailed cause.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_4898b000cc25",
      "file": "src/component/turnsInternal.ts",
      "line": 139,
      "col": 45,
      "kind": "nullish-coalescing",
      "snippet": "error ?? status",
      "context": "await ctx.db.patch(stream._id, { state: { kind: \"aborted\", reason: error ?? status, endedAt: ts }, endedAt: ts, cleanupScheduledAt: ts, cleanupFnId, });"
    },
    {
      "description": "Error code parser returns null when bracketed code prefix is missing; explicit unknown-code sentinel.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_08f60dbcff9a",
      "file": "src/errors.ts",
      "line": 28,
      "col": 10,
      "kind": "nullish-coalescing",
      "snippet": "match?.[1] ?? null",
      "context": "return match?.[1] ?? null;"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_cd76a8ae6c61",
      "file": "src/host/persistence/codexOnlyPersistence.ts",
      "line": 54,
      "col": 25,
      "kind": "nullish-coalescing",
      "snippet": "conversationByThreadId.get(request.threadId) ?? request.threadId",
      "context": "requestById.set(toRequestKey(request.requestId), { requestId: request.requestId, method: request.method, threadId: request.threadId, turnId: request.turnId, itemId: request.item..."
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_a194f058b573",
      "file": "src/host/persistence/codexOnlyPersistence.ts",
      "line": 80,
      "col": 26,
      "kind": "nullish-coalescing",
      "snippet": "args.dispatchId ?? `${args.turnId}-dispatch`",
      "context": "dispatchId = args.dispatchId ?? `${args.turnId}-dispatch`"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_227b197818c6",
      "file": "src/host/persistence/codexOnlyPersistence.ts",
      "line": 105,
      "col": 39,
      "kind": "nullish-coalescing",
      "snippet": "args.leaseMs ?? 15_000",
      "context": "return { dispatchId: next.dispatchId, turnId: next.turnId, idempotencyKey: next.idempotencyKey, inputText: next.inputText, claimToken: `${next.dispatchId}-claim`, leaseExpiresAt..."
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_8d350ec259d2",
      "file": "src/host/runtime/runtime.ts",
      "line": 128,
      "col": 21,
      "kind": "nullish-coalescing",
      "snippet": "asNonNegativeInteger(value.updatedAt) ?? 0",
      "context": "updatedAt = asNonNegativeInteger(value.updatedAt) ?? 0"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_17be8af889ac",
      "file": "src/host/runtime/runtime.ts",
      "line": 129,
      "col": 24,
      "kind": "nullish-coalescing",
      "snippet": "asNonNegativeInteger(value.messageCount) ?? 0",
      "context": "messageCount = asNonNegativeInteger(value.messageCount) ?? 0"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_6dd57179b903",
      "file": "src/host/runtime/runtime.ts",
      "line": 332,
      "col": 25,
      "kind": "nullish-coalescing",
      "snippet": "nextCursorByStreamId.get(streamId) ?? 0",
      "context": "cursorStart = nextCursorByStreamId.get(streamId) ?? 0"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_fb44cf423d29",
      "file": "src/host/runtime/runtime.ts",
      "line": 442,
      "col": 23,
      "kind": "nullish-coalescing",
      "snippet": "args.persistence ?? createCodexOnlyPersistence()",
      "context": "persistence = args.persistence ?? createCodexOnlyPersistence()"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_4f7d3e01fc41",
      "file": "src/host/runtime/runtime.ts",
      "line": 470,
      "col": 18,
      "kind": "nullish-coalescing",
      "snippet": "connectArgs.actor ?? { anonymousId: randomSessionId() }",
      "context": "core.actor = connectArgs.actor ?? { anonymousId: randomSessionId() };"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_3389c35aa9ac",
      "file": "src/host/runtime/runtime.ts",
      "line": 476,
      "col": 26,
      "kind": "nullish-coalescing",
      "snippet": "connectArgs.ingestFlushMs ?? 250",
      "context": "core.ingestFlushMs = connectArgs.ingestFlushMs ?? 250;"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_70bdc092dbd6",
      "file": "src/host/runtime/runtime.ts",
      "line": 482,
      "col": 25,
      "kind": "nullish-coalescing",
      "snippet": "connectArgs.cwd ?? args.bridge?.cwd",
      "context": "resolvedCwd = connectArgs.cwd ?? args.bridge?.cwd"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_92c2ff4aa64d",
      "file": "src/host/runtime/runtime.ts",
      "line": 505,
      "col": 34,
      "kind": "nullish-coalescing",
      "snippet": "code ?? \"unknown\"",
      "context": "core.setProcessExitError(code ?? \"unknown\");"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_353206914355",
      "file": "src/host/runtime/runtime.ts",
      "line": 652,
      "col": 95,
      "kind": "nullish-coalescing",
      "snippet": "params ?? {}",
      "context": "return core.sendRequest(buildThreadResumeRequest(core.requestIdFn(), { threadId: tid, ...(params ?? {}) }));"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_a08d0b6414b8",
      "file": "src/host/runtime/runtime.ts",
      "line": 657,
      "col": 93,
      "kind": "nullish-coalescing",
      "snippet": "params ?? {}",
      "context": "return core.sendRequest(buildThreadForkRequest(core.requestIdFn(), { threadId: tid, ...(params ?? {}) }));"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_9ef88d714137",
      "file": "src/host/runtime/runtime.ts",
      "line": 679,
      "col": 66,
      "kind": "parameter-default",
      "snippet": "includeTurns = false",
      "context": "async (tid, includeTurns = false) => core.sendRequest(buildThreadReadRequest(core.requestIdFn(), { threadId: tid, includeTurns }))"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_8f30d34998a0",
      "file": "src/host/runtime/runtime.ts",
      "line": 834,
      "col": 50,
      "kind": "nullish-coalescing",
      "snippet": "terminal.lastErrorMessage ?? \"\"",
      "context": "warnings.push(`${terminal.lastErrorCode}:${terminal.lastErrorMessage ?? \"\"}`);"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_bbd3d922708c",
      "file": "src/host/runtime/runtime.ts",
      "line": 956,
      "col": 158,
      "kind": "nullish-coalescing",
      "snippet": "a.chatgptPlanType ?? null",
      "context": "core.sendMessage(buildChatgptAuthTokensRefreshResponse(a.requestId, { accessToken: a.accessToken, chatgptAccountId: a.chatgptAccountId, chatgptPlanType: a.chatgptPlanType ?? nul..."
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_ca2fc112480e",
      "file": "src/host/runtime/runtimeCore.ts",
      "line": 94,
      "col": 93,
      "kind": "nullish-coalescing",
      "snippet": "counts.get(kind) ?? 0",
      "context": "counts.set(kind, (counts.get(kind) ?? 0) + 1);"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_113d271c3e7b",
      "file": "src/host/runtime/runtimeCore.ts",
      "line": 236,
      "col": 101,
      "kind": "nullish-coalescing",
      "snippet": "sessionId ?? \"runtime-owner\"",
      "context": "claimed = await args.persistence.claimNextTurnDispatch({ actor, threadId, claimOwner: sessionId ?? \"runtime-owner\" })"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_47f511135a0d",
      "file": "src/host/runtime/runtimeCore.ts",
      "line": 270,
      "col": 87,
      "kind": "nullish-coalescing",
      "snippet": "dispatchByTurnId.get(rtid)?.persistedTurnId ?? rtid",
      "context": "return dispatchByTurnId.get(rtid)?.persistedTurnId ?? rtid;"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_ad7cdd01bd1a",
      "file": "src/host/runtime/runtimeCoreHandlers.ts",
      "line": 162,
      "col": 83,
      "kind": "nullish-coalescing",
      "snippet": "batch[i]?.threadId ?? at",
      "context": "(d, i) => ({ ...d, threadId: batch[i]?.threadId ?? at })"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_9894d287980b",
      "file": "src/host/runtime/runtimeCoreHandlers.ts",
      "line": 216,
      "col": 48,
      "kind": "nullish-coalescing",
      "snippet": "asObject(fp.parsed.params) ?? {}",
      "context": "merged = { ...fp.parsed, params: { ...(asObject(fp.parsed.params) ?? {}), delta: `${fp.delta}${sp.delta}` } }"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_5b2f896ef159",
      "file": "src/host/runtime/runtimeCoreHandlers.ts",
      "line": 246,
      "col": 18,
      "kind": "nullish-coalescing",
      "snippet": "ctx.resolvePersistedTurnId(event.turnId) ?? event.turnId",
      "context": "ptid = ctx.resolvePersistedTurnId(event.turnId) ?? event.turnId"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_3b5d6c5c10d6",
      "file": "src/host/runtime/runtimeCoreHandlers.ts",
      "line": 279,
      "col": 44,
      "kind": "nullish-coalescing",
      "snippet": "ctx.resolvePersistedTurnId(event.turnId) ?? event.turnId",
      "context": "terminalTurnId = event.turnId ? (ctx.resolvePersistedTurnId(event.turnId) ?? event.turnId) : undefined"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_ae8ba0e8aa33",
      "file": "src/host/runtime/runtimeCoreHandlers.ts",
      "line": 281,
      "col": 17,
      "kind": "nullish-coalescing",
      "snippet": "ctx.threadId ?? event.threadId",
      "context": "await ctx.expireTurnServerRequests({ threadId: ctx.threadId ?? event.threadId, ...(terminalTurnId ? { turnId: terminalTurnId } : {}), });"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_4c867093f788",
      "file": "src/host/runtime/runtimeCoreHandlers.ts",
      "line": 305,
      "col": 44,
      "kind": "nullish-coalescing",
      "snippet": "ctx.resolvePersistedTurnId(event.turnId) ?? event.turnId",
      "context": "terminalTurnId = event.turnId ? (ctx.resolvePersistedTurnId(event.turnId) ?? event.turnId) : undefined"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_1527f9711bbf",
      "file": "src/host/runtime/runtimeCoreHandlers.ts",
      "line": 307,
      "col": 17,
      "kind": "nullish-coalescing",
      "snippet": "ctx.threadId ?? event.threadId",
      "context": "await ctx.expireTurnServerRequests({ threadId: ctx.threadId ?? event.threadId, ...(terminalTurnId ? { turnId: terminalTurnId } : {}), });"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_d96607ec6c33",
      "file": "src/host/runtime/runtimeCoreHandlers.ts",
      "line": 315,
      "col": 18,
      "kind": "nullish-coalescing",
      "snippet": "event.turnId ?? psr.turnId",
      "context": "rtid = event.turnId ?? psr.turnId"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_214a267561aa",
      "file": "src/host/runtime/runtimeCoreHandlers.ts",
      "line": 316,
      "col": 18,
      "kind": "nullish-coalescing",
      "snippet": "ctx.resolvePersistedTurnId(rtid) ?? psr.turnId",
      "context": "ptid = ctx.resolvePersistedTurnId(rtid) ?? psr.turnId"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_914d8fbac1e4",
      "file": "src/host/runtime/runtimeCoreHandlers.ts",
      "line": 324,
      "col": 71,
      "kind": "nullish-coalescing",
      "snippet": "asObject(envelope.params) ?? envelope",
      "context": "payload = envelope ? asObject(envelope.params) ?? envelope : null"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_0a4b8011e65a",
      "file": "src/host/runtime/runtimeCoreHandlers.ts",
      "line": 325,
      "col": 80,
      "kind": "nullish-coalescing",
      "snippet": "ctx.resolvePersistedTurnId(event.turnId) ?? ctx.turnId",
      "context": "rtid = ctx.resolvePersistedTurnId(event.turnId) ?? ctx.turnId"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_45846d27e65e",
      "file": "src/host/runtime/runtimeCoreHandlers.ts",
      "line": 384,
      "col": 131,
      "kind": "nullish-coalescing",
      "snippet": "pending.turnId ?? rtid",
      "context": "ctx.dispatchByTurnId.set(rtid, { dispatchId: pending.dispatchId, claimToken: pending.claimToken, persistedTurnId: pending.turnId ?? rtid });"
    },
    {
      "description": "TODO: add manual description",
      "userApproved": false,
      "riskLevel": "default",
      "id": "FB_3ef50c9e521f",
      "file": "src/host/snapshotIdentity.ts",
      "line": 41,
      "col": 23,
      "kind": "nullish-coalescing",
      "snippet": "readOptionalStringField(item, \"messageId\") ?? readOptionalStringField(item, \"message_id\")",
      "context": "messageId = readOptionalStringField(item, \"messageId\") ?? readOptionalStringField(item, \"message_id\")"
    },
    {
      "description": "Reasoning segment key uses \"none\" sentinel when summaryIndex is missing to keep key deterministic.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_1c6f4343a417",
      "file": "src/mapping.ts",
      "line": 97,
      "col": 5,
      "kind": "nullish-coalescing",
      "snippet": "args.summaryIndex ?? \"none\"",
      "context": "return [ args.turnId, args.itemId, args.channel, args.segmentType, args.summaryIndex ?? \"none\", args.contentIndex ?? \"none\", ].join(\":\");"
    },
    {
      "description": "Reasoning segment key uses \"none\" sentinel when contentIndex is missing to keep key deterministic.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_3e615557dd87",
      "file": "src/mapping.ts",
      "line": 98,
      "col": 5,
      "kind": "nullish-coalescing",
      "snippet": "args.contentIndex ?? \"none\"",
      "context": "return [ args.turnId, args.itemId, args.channel, args.segmentType, args.summaryIndex ?? \"none\", args.contentIndex ?? \"none\", ].join(\":\");"
    },
    {
      "description": "Reasoning segment sort treats missing summaryIndex as MAX_SAFE_INTEGER so indexed segments sort before unindexed tails.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_6c51ca86fb4e",
      "file": "src/mapping.ts",
      "line": 130,
      "col": 23,
      "kind": "nullish-coalescing",
      "snippet": "left.summaryIndex ?? Number.MAX_SAFE_INTEGER",
      "context": "leftSummary = left.summaryIndex ?? Number.MAX_SAFE_INTEGER"
    },
    {
      "description": "Reasoning segment sort treats missing summaryIndex as MAX_SAFE_INTEGER for stable ordering.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_f00d79120a8b",
      "file": "src/mapping.ts",
      "line": 131,
      "col": 24,
      "kind": "nullish-coalescing",
      "snippet": "right.summaryIndex ?? Number.MAX_SAFE_INTEGER",
      "context": "rightSummary = right.summaryIndex ?? Number.MAX_SAFE_INTEGER"
    },
    {
      "description": "Reasoning segment sort treats missing contentIndex as MAX_SAFE_INTEGER for stable ordering.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_a3070f6ae9ef",
      "file": "src/mapping.ts",
      "line": 135,
      "col": 23,
      "kind": "nullish-coalescing",
      "snippet": "left.contentIndex ?? Number.MAX_SAFE_INTEGER",
      "context": "leftContent = left.contentIndex ?? Number.MAX_SAFE_INTEGER"
    },
    {
      "description": "Reasoning segment sort treats missing contentIndex as MAX_SAFE_INTEGER so explicit indexes win ordering.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_b34b56f57ea7",
      "file": "src/mapping.ts",
      "line": 136,
      "col": 24,
      "kind": "nullish-coalescing",
      "snippet": "right.contentIndex ?? Number.MAX_SAFE_INTEGER",
      "context": "rightContent = right.contentIndex ?? Number.MAX_SAFE_INTEGER"
    },
    {
      "description": "Overlay extraction defaults missing durable messageId to null and skips entry; protects integrity but may hide malformed payloads.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_1d81e766f491",
      "file": "src/mapping.ts",
      "line": 156,
      "col": 25,
      "kind": "nullish-coalescing",
      "snippet": "durableDelta?.messageId ?? null",
      "context": "messageId = durableDelta?.messageId ?? null"
    },
    {
      "description": "Overlay extraction defaults missing text delta to null and skips entry; avoids corrupt merges but can hide malformed payloads.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_55f0dd7dd787",
      "file": "src/mapping.ts",
      "line": 157,
      "col": 25,
      "kind": "nullish-coalescing",
      "snippet": "durableDelta?.delta ?? null",
      "context": "textDelta = durableDelta?.delta ?? null"
    },
    {
      "description": "Overlay message text concatenation defaults missing existing text to empty string.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_b3e2645adcb8",
      "file": "src/mapping.ts",
      "line": 166,
      "col": 18,
      "kind": "nullish-coalescing",
      "snippet": "existing?.text ?? \"\"",
      "context": "byKey.set(key, { turnId, messageId, text: `${existing?.text ?? \"\"}${textDelta}`, status: existing?.status ?? \"streaming\", ...(existing?.error ? { error: existing.error } : {}), ..."
    },
    {
      "description": "Overlay message status defaults to streaming when no existing status is present; can mask absent status transitions in malformed streams.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_0ed2b78b0b6e",
      "file": "src/mapping.ts",
      "line": 167,
      "col": 17,
      "kind": "nullish-coalescing",
      "snippet": "existing?.status ?? \"streaming\"",
      "context": "byKey.set(key, { turnId, messageId, text: `${existing?.text ?? \"\"}${textDelta}`, status: existing?.status ?? \"streaming\", ...(existing?.error ? { error: existing.error } : {}), ..."
    },
    {
      "description": "When item text is absent, merge falls back to existing overlay text (or empty) which may conceal incomplete payload text fields.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_80a1edd0f220",
      "file": "src/mapping.ts",
      "line": 182,
      "col": 24,
      "kind": "nullish-coalescing",
      "snippet": "message.text ?? (existing?.text ?? \"\")",
      "context": "nextText = message.text ?? (existing?.text ?? \"\")"
    },
    {
      "description": "Overlay message text concatenation defaults missing existing text to empty string.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_1193dc5ab70c",
      "file": "src/mapping.ts",
      "line": 182,
      "col": 41,
      "kind": "nullish-coalescing",
      "snippet": "existing?.text ?? \"\"",
      "context": "nextText = message.text ?? (existing?.text ?? \"\")"
    },
    {
      "description": "Overlay message status defaults to streaming when no existing status is present; can mask absent status transitions in malformed streams.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_93bb2e189bc4",
      "file": "src/mapping.ts",
      "line": 187,
      "col": 51,
      "kind": "nullish-coalescing",
      "snippet": "existing?.status ?? \"streaming\"",
      "context": "byKey.set(key, { turnId, messageId: message.messageId, text: nextText, status: message.status === \"streaming\" ? (existing?.status ?? \"streaming\") : \"completed\", ...(existing?.er..."
    },
    {
      "description": "Reasoning overlay aggregation excludes raw channel by default unless includeRaw is explicitly enabled.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_f6df5ade3a2a",
      "file": "src/mapping.ts",
      "line": 225,
      "col": 22,
      "kind": "nullish-coalescing",
      "snippet": "options?.includeRaw ?? false",
      "context": "includeRaw = options?.includeRaw ?? false"
    },
    {
      "description": "Overlay message text concatenation defaults missing existing text to empty string.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_1f9aece01330",
      "file": "src/mapping.ts",
      "line": 267,
      "col": 16,
      "kind": "nullish-coalescing",
      "snippet": "existing?.text ?? \"\"",
      "context": "byKey.set(key, { turnId, itemId: reasoningDelta.itemId, channel: reasoningDelta.channel, segmentType: reasoningDelta.segmentType, text: reasoningDelta.segmentType === \"textDelta..."
    },
    {
      "description": "Reasoning textDelta concatenation defaults missing delta fragment to empty string.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_c729e01078bf",
      "file": "src/mapping.ts",
      "line": 267,
      "col": 39,
      "kind": "nullish-coalescing",
      "snippet": "reasoningDelta.delta ?? \"\"",
      "context": "byKey.set(key, { turnId, itemId: reasoningDelta.itemId, channel: reasoningDelta.channel, segmentType: reasoningDelta.segmentType, text: reasoningDelta.segmentType === \"textDelta..."
    },
    {
      "description": "Reasoning overlay aggregation excludes raw channel by default unless includeRaw is explicitly enabled.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_ff5b630ce31a",
      "file": "src/mapping.ts",
      "line": 286,
      "col": 22,
      "kind": "nullish-coalescing",
      "snippet": "options?.includeRaw ?? false",
      "context": "includeRaw = options?.includeRaw ?? false"
    },
    {
      "description": "Status-priority comparison treats unknown overlay status as priority 0.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_310953dae2c2",
      "file": "src/mapping.ts",
      "line": 349,
      "col": 8,
      "kind": "nullish-coalescing",
      "snippet": "STATUS_PRIORITY[overlayStatus] ?? 0",
      "context": "if ((STATUS_PRIORITY[overlayStatus] ?? 0) > (STATUS_PRIORITY[durableStatus] ?? 0)) { return overlayStatus; }"
    },
    {
      "description": "Status-priority comparison treats unknown durable status as priority 0.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_546c20846f5c",
      "file": "src/mapping.ts",
      "line": 349,
      "col": 48,
      "kind": "nullish-coalescing",
      "snippet": "STATUS_PRIORITY[durableStatus] ?? 0",
      "context": "if ((STATUS_PRIORITY[overlayStatus] ?? 0) > (STATUS_PRIORITY[durableStatus] ?? 0)) { return overlayStatus; }"
    },
    {
      "description": "Durable text for mcpToolCall falls back to server/tool identifier when item.error.message is missing; useful but may lose actionable error detail.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_eb8ff043bca6",
      "file": "src/protocol/events.ts",
      "line": 421,
      "col": 14,
      "kind": "nullish-coalescing",
      "snippet": "item.error?.message ?? `${item.server}/${item.tool}`",
      "context": "return item.error?.message ?? `${item.server}/${item.tool}`;"
    },
    {
      "description": "Turn-id extraction returns undefined when params.turn.id is absent, preserving explicit missing-turn semantics.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_2afa9802ba21",
      "file": "src/protocol/events.ts",
      "line": 521,
      "col": 14,
      "kind": "nullish-coalescing",
      "snippet": "getStringField(params.turn, \"id\") ?? undefined",
      "context": "return getStringField(params.turn, \"id\") ?? undefined;"
    },
    {
      "description": "Turn-id extraction returns undefined when params.turnId is missing for turn/item thread-scoped events.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_5cf0df84b354",
      "file": "src/protocol/events.ts",
      "line": 526,
      "col": 14,
      "kind": "nullish-coalescing",
      "snippet": "getStringField(params, \"turnId\") ?? undefined",
      "context": "return getStringField(params, \"turnId\") ?? undefined;"
    },
    {
      "description": "Turn-id extraction returns undefined when params.turnId is missing for turn/item thread-scoped events.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_259756b60ee3",
      "file": "src/protocol/events.ts",
      "line": 544,
      "col": 14,
      "kind": "nullish-coalescing",
      "snippet": "getStringField(params, \"turnId\") ?? undefined",
      "context": "return getStringField(params, \"turnId\") ?? undefined;"
    },
    {
      "description": "Payload turn-id extractor returns null when parsed message has no turn id.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_247212fb661e",
      "file": "src/protocol/events.ts",
      "line": 555,
      "col": 10,
      "kind": "nullish-coalescing",
      "snippet": "extractTurnId(parsed) ?? null",
      "context": "return extractTurnId(parsed) ?? null;"
    },
    {
      "description": "Risk: inferring status when payload omits it can hide schema regressions and misclassify malformed item payloads as valid inProgress/completed states.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_a6b31c24f6c9",
      "file": "src/protocol/events.ts",
      "line": 776,
      "col": 13,
      "kind": "nullish-coalescing",
      "snippet": "status ?? (message.method === \"item/started\" ? \"inProgress\" : \"completed\")",
      "context": "return { itemId: item.id, itemType: item.type, status: status ?? (message.method === \"item/started\" ? \"inProgress\" : \"completed\"), payloadJson: JSON.stringify(message), cursorEn..."
    },
    {
      "description": "Item snapshot status fallback derives inProgress/completed from event kind when payload status is absent; may hide schema regressions.",
      "userApproved": false,
      "riskLevel": "medium",
      "id": "FB_b51aef2c67cd",
      "file": "src/protocol/events.ts",
      "line": 801,
      "col": 13,
      "kind": "nullish-coalescing",
      "snippet": "status ?? (kind === \"item/started\" ? \"inProgress\" : \"completed\")",
      "context": "return { itemId: parsed.params.item.id, itemType: parsed.params.item.type, status: status ?? (kind === \"item/started\" ? \"inProgress\" : \"completed\"), payloadJson, cursorEnd, };"
    },
    {
      "description": "AJV error formatter defaults missing error message text to \"invalid\" for stable diagnostics.",
      "userApproved": false,
      "riskLevel": "low",
      "id": "FB_b0d22014ddb4",
      "file": "src/protocol/parser.ts",
      "line": 60,
      "col": 24,
      "kind": "nullish-coalescing",
      "snippet": "err.message ?? \"invalid\"",
      "context": "return `${at}: ${err.message ?? \"invalid\"}`;"
    }
  ]
}
