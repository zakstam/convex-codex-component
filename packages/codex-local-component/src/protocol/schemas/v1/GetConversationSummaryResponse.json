{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "GetConversationSummaryResponse",
  "type": "object",
  "required": [
    "summary"
  ],
  "properties": {
    "summary": {
      "$ref": "#/definitions/ConversationSummary"
    }
  },
  "definitions": {
    "ConversationGitInfo": {
      "type": "object",
      "properties": {
        "branch": {
          "type": [
            "string",
            "null"
          ]
        },
        "origin_url": {
          "type": [
            "string",
            "null"
          ]
        },
        "sha": {
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "ConversationSummary": {
      "type": "object",
      "required": [
        "cliVersion",
        "conversationId",
        "cwd",
        "modelProvider",
        "path",
        "preview",
        "source"
      ],
      "properties": {
        "cliVersion": {
          "type": "string"
        },
        "conversationId": {
          "$ref": "#/definitions/ThreadId"
        },
        "cwd": {
          "type": "string"
        },
        "gitInfo": {
          "anyOf": [
            {
              "$ref": "#/definitions/ConversationGitInfo"
            },
            {
              "type": "null"
            }
          ]
        },
        "modelProvider": {
          "type": "string"
        },
        "path": {
          "type": "string"
        },
        "preview": {
          "type": "string"
        },
        "source": {
          "$ref": "#/definitions/SessionSource"
        },
        "timestamp": {
          "type": [
            "string",
            "null"
          ]
        },
        "updatedAt": {
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "SessionSource": {
      "oneOf": [
        {
          "type": "string",
          "enum": [
            "cli",
            "vscode",
            "exec",
            "mcp",
            "unknown"
          ]
        },
        {
          "type": "object",
          "required": [
            "subagent"
          ],
          "properties": {
            "subagent": {
              "$ref": "#/definitions/SubAgentSource"
            }
          },
          "additionalProperties": false,
          "title": "SubagentSessionSource"
        }
      ]
    },
    "SubAgentSource": {
      "oneOf": [
        {
          "type": "string",
          "enum": [
            "review",
            "compact"
          ]
        },
        {
          "type": "object",
          "required": [
            "thread_spawn"
          ],
          "properties": {
            "thread_spawn": {
              "type": "object",
              "required": [
                "depth",
                "parent_thread_id"
              ],
              "properties": {
                "depth": {
                  "type": "integer",
                  "format": "int32"
                },
                "parent_thread_id": {
                  "$ref": "#/definitions/ThreadId"
                }
              }
            }
          },
          "additionalProperties": false,
          "title": "ThreadSpawnSubAgentSource"
        },
        {
          "type": "object",
          "required": [
            "other"
          ],
          "properties": {
            "other": {
              "type": "string"
            }
          },
          "additionalProperties": false,
          "title": "OtherSubAgentSource"
        }
      ]
    },
    "ThreadId": {
      "type": "string"
    }
  }
}