{
  "version": 1,
  "entries": [
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_0da31f32eecc",
      "file": "src/app-server/client.ts",
      "line": 66,
      "col": 32,
      "snippet": "return { method, id, params } as RequestFor<M>;",
      "context": "prev:): RequestFor<M> { | next:}"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_819ef57bde58",
      "file": "src/component/deletionCascade.ts",
      "line": 24,
      "col": 60,
      "snippet": "await Promise.all(docs.map((doc) => ctx.db.delete(doc._id as never)));",
      "context": "prev:} | next:return docs.length;"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_9ef28baf7bd9",
      "file": "src/component/deletionUtils.ts",
      "line": 40,
      "col": 49,
      "snippet": "const parsed = JSON.parse(deletedCountsJson) as unknown;",
      "context": "prev:try { | next:if (!parsed || typeof parsed !== \"object\" || Array.isArray(parsed)) {"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_e8f9443fce34",
      "file": "src/component/deletionUtils.ts",
      "line": 59,
      "col": 49,
      "snippet": "const parsed = JSON.parse(deletedCountsJson) as unknown;",
      "context": "prev:try { | next:if (!parsed || typeof parsed !== \"object\" || Array.isArray(parsed)) {"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_f4f1bcfff226",
      "file": "src/component/pagination.ts",
      "line": 18,
      "col": 30,
      "snippet": "return JSON.parse(cursor) as T;",
      "context": "prev:try { | next:} catch (error) {"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_fa6f7396a01b",
      "file": "src/component/threads.ts",
      "line": 1023,
      "col": 55,
      "snippet": "const parsed = JSON.parse(event.payloadJson) as { streamId?: unknown };",
      "context": "prev:try { | next:if (typeof parsed.streamId === \"string\") {"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_588e7c71b337",
      "file": "src/component/tokenUsage.ts",
      "line": 51,
      "col": 57,
      "snippet": "// (for example runtime placeholder turn ids). Treat as best-effort.",
      "context": "prev:// Token usage can arrive before the persisted turn record is available | next:if (!turn) {"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_b7420ba788a0",
      "file": "src/host/convexSlice.ts",
      "line": 435,
      "col": 23,
      "snippet": "const record = value as Record<string, unknown>;",
      "context": "prev:} | next:return ("
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_04b0b409a61b",
      "file": "src/host/convexSlice.ts",
      "line": 447,
      "col": 29,
      "snippet": "const streamStats = (state as { streamStats?: unknown[] | null }).streamStats;",
      "context": "prev:} | next:return Array.isArray(streamStats) ? streamStats : null;"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_2a0ca5600914",
      "file": "src/host/convexSlice.ts",
      "line": 455,
      "col": 32,
      "snippet": "const recentMessages = (state as { recentMessages?: DurableHistoryMessage[] | null }).recentMessages;",
      "context": "prev:} | next:return Array.isArray(recentMessages) ? recentMessages : null;"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_b5a6cdf49ed2",
      "file": "src/host/convexSlice.ts",
      "line": 463,
      "col": 28,
      "snippet": "const allStreams = (state as { allStreams?: Array<{ streamId: string }> | null }).allStreams;",
      "context": "prev:} | next:return Array.isArray(allStreams) ? allStreams : null;"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_47bb9910a3fb",
      "file": "src/host/definitions/convexPresetMutations.ts",
      "line": 7,
      "col": 16,
      "snippet": "ensureSession as ensureSessionHandler,",
      "context": "prev:import { | next:ensureConversationBindingByResolve,"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_0b123dd2c176",
      "file": "src/host/persistence/convex/convexPersistence.ts",
      "line": 137,
      "col": 9,
      "snippet": "}) as { threadId: string; created?: boolean; rebindApplied?: boolean };",
      "context": "prev:...(args.cwd ? { cwd: args.cwd } : {}), | next:if (opened.rebindApplied) {"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_55eed7ba416b",
      "file": "src/host/persistence/convex/convexPersistence.ts",
      "line": 161,
      "col": 9,
      "snippet": "}) as { sessionId: string; threadId: string; status: \"created\" | \"active\" };",
      "context": "prev:lastEventCursor: args.lastEventCursor, | next:await client.mutation(chatApi.markConversationSyncProgress, {"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_f3a7b1e7edae",
      "file": "src/host/persistence/convex/convexPersistence.ts",
      "line": 175,
      "col": 113,
      "snippet": "client.mutation(chatApi.ingestBatch, toIngestPayload(args.actor, sessionId, args.threadId, args.deltas)) as Promise<{",
      "context": "prev:const runIngest = async (sessionId: string) => | next:status: \"ok\" | \"partial\" | \"session_recovered\" | \"rejected\";"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_7e6fc44c1d8c",
      "file": "src/host/persistence/convex/convexPersistence.ts",
      "line": 253,
      "col": 35,
      "snippet": "const requestedAt = (request as { createdAt?: number }).createdAt;",
      "context": "prev:upsertPendingServerRequest: async ({ actor, request }) => { | next:await client.mutation(chatApi.upsertPendingServerRequest, {"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_8519bc789bf3",
      "file": "src/host/persistence/convex/convexPersistence.ts",
      "line": 284,
      "col": 9,
      "snippet": "}) as Promise<HostRuntimePersistence[\"listPendingServerRequests\"] extends (...a: never[]) => infer R ? Awaited<R> : never>;",
      "context": "prev:limit: 100, | next:},"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_93f69d7f6b8a",
      "file": "src/host/persistence/convex/convexPersistence.ts",
      "line": 295,
      "col": 9,
      "snippet": "}) as { dispatchId: string; turnId: string; accepted: true };",
      "context": "prev:...(args.dispatchId ? { dispatchId: args.dispatchId } : {}), | next:const claimToken = randomSessionId();"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_2918623de4d5",
      "file": "src/host/runtime/runtime.ts",
      "line": 284,
      "col": 59,
      "snippet": "const { ConvexHttpClient } = require(\"convex/browser\") as { ConvexHttpClient: new (url: string) => { mutation: (...a: unknown[]) => Promise<unknown>; query: (...a: unknown[]) => Promise<unknown> } };",
      "context": "prev:if (isConvexIntegrated(args)) { | next:const client = new ConvexHttpClient(args.convexUrl);"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_50ca2bb01bf4",
      "file": "src/host/runtime/runtimeCore.ts",
      "line": 37,
      "col": 38,
      "snippet": "clearPendingServerRequestRetryTimer as clearRetryTimer,",
      "context": "prev:import { | next:enqueuePendingServerRequestRetry,"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_6c27132a4db8",
      "file": "src/host/runtime/runtimeCore.ts",
      "line": 39,
      "col": 13,
      "snippet": "flushQueue as flushQueueHandler,",
      "context": "prev:enqueuePendingServerRequestRetry, | next:handleBridgeEvent as bridgeEventHandler,"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_3c2a90037361",
      "file": "src/host/runtime/runtimeCore.ts",
      "line": 40,
      "col": 20,
      "snippet": "handleBridgeEvent as bridgeEventHandler,",
      "context": "prev:flushQueue as flushQueueHandler, | next:handleBridgeGlobalMessage as bridgeGlobalHandler,"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_434747fac470",
      "file": "src/host/runtime/runtimeCore.ts",
      "line": 41,
      "col": 28,
      "snippet": "handleBridgeGlobalMessage as bridgeGlobalHandler,",
      "context": "prev:handleBridgeEvent as bridgeEventHandler, | next:type HandlerCtx,"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_1c575836e344",
      "file": "src/host/runtime/runtimeCoreHandlers.ts",
      "line": 196,
      "col": 21,
      "snippet": "const obj = parsed as Record<string, unknown>;",
      "context": "prev:if (typeof parsed !== \"object\" || parsed === null || !(\"method\" in parsed)) return null; | next:if (obj.method !== \"item/agentMessage/delta\") return null;"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_6e8134422081",
      "file": "src/host/runtime/runtimeHelpers.ts",
      "line": 37,
      "col": 62,
      "snippet": "return typeof value === \"object\" && value !== null ? (value as Record<string, unknown>) : null;",
      "context": "prev:export function asObject(value: unknown): Record<string, unknown> | null { | next:}"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_552f395a0796",
      "file": "src/host/tauri.ts",
      "line": 3,
      "col": 33,
      "snippet": "import type { LoginAccountParams as ProtocolLoginAccountParams } from \"../protocol/schemas/v2/LoginAccountParams.js\";",
      "context": "prev:import type { FileChangeApprovalDecision } from \"../protocol/schemas/v2/FileChangeApprovalDecision.js\"; | next:import type { ToolRequestUserInputAnswer } from \"../protocol/schemas/v2/ToolRequestUserInputAnswer.js\";"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_42e66eb43cb2",
      "file": "src/host/tauri.ts",
      "line": 241,
      "col": 34,
      "snippet": "const parsed = JSON.parse(line) as { type?: unknown; payload?: unknown };",
      "context": "prev:export function parseHelperCommand(line: string): HelperCommand { | next:if (typeof parsed !== \"object\" || parsed === null) {"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_55861db3a58c",
      "file": "src/host/tauri.ts",
      "line": 245,
      "col": 82,
      "snippet": "if (typeof parsed.type !== \"string\" || !HELPER_COMMAND_TYPE_SET.has(parsed.type as HelperCommandType)) {",
      "context": "prev:} | next:throw new Error(`Unsupported helper command: ${String(parsed.type)}`);"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_2a9aaee19f0f",
      "file": "src/host/tauri.ts",
      "line": 249,
      "col": 33,
      "snippet": "return { type: parsed.type } as HelperCommand;",
      "context": "prev:if (parsed.type === \"interrupt\" || parsed.type === \"stop\" || parsed.type === \"status\") { | next:}"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_5cf7482544d0",
      "file": "src/host/tauri.ts",
      "line": 254,
      "col": 16,
      "snippet": "return parsed as HelperCommand;",
      "context": "prev:} | next:}"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_242404ffb924",
      "file": "src/protocol/events.ts",
      "line": 160,
      "col": 14,
      "snippet": "return item as ThreadItem;",
      "context": "prev:} | next:}"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_8c118b97a0ad",
      "file": "src/protocol/events.ts",
      "line": 185,
      "col": 25,
      "snippet": "const message = parsed as ServerInboundMessage;",
      "context": "prev:} | next:payloadMessageCache.set(payloadJson, message);"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_e8a823cb640b",
      "file": "src/protocol/events.ts",
      "line": 345,
      "col": 17,
      "snippet": "return message as Extract<ServerInboundMessage, { method: M }>;",
      "context": "prev:} | next:}"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_f30747ee954f",
      "file": "src/protocol/events.ts",
      "line": 478,
      "col": 32,
      "snippet": "const params = message.params as Record<string, unknown>;",
      "context": "prev:} | next:if (typeof params.threadId === \"string\") {"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_e6d80c7c3075",
      "file": "src/protocol/events.ts",
      "line": 510,
      "col": 22,
      "snippet": "? (message.params as Record<string, unknown>)",
      "context": "prev:const params = isMessageRecord(message.params) | next:: null;"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_84e3c4ef1470",
      "file": "src/protocol/events.ts",
      "line": 682,
      "col": 22,
      "snippet": "? (message.params as Record<string, unknown>)",
      "context": "prev:const params = isMessageRecord(message.params) | next:: null;"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_a647c42c19d4",
      "file": "src/protocol/events.ts",
      "line": 813,
      "col": 24,
      "snippet": "? (message.params as Record<string, unknown>)",
      "context": "prev:const params = isMessageRecord(message.params) | next:: null;"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_b5e47f8bb29e",
      "file": "src/protocol/events.ts",
      "line": 835,
      "col": 24,
      "snippet": "? (message.params as Record<string, unknown>)",
      "context": "prev:const params = isMessageRecord(message.params) | next:: null;"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_35b45dd66381",
      "file": "src/protocol/parser.ts",
      "line": 21,
      "col": 62,
      "snippet": "return typeof value === \"object\" && value !== null ? (value as Record<string, unknown>) : null;",
      "context": "prev:function asObject(value: unknown): Record<string, unknown> | null { | next:}"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_7913992cad6c",
      "file": "src/protocol/parser.ts",
      "line": 29,
      "col": 26,
      "snippet": "return validator.errors as AjvError[] | null | undefined;",
      "context": "prev:function validatorErrors(validator: { errors?: unknown }): AjvError[] | null | undefined { | next:}"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_03ec36eac762",
      "file": "src/react/dynamicTools.ts",
      "line": 43,
      "col": 62,
      "snippet": "return typeof value === \"object\" && value !== null ? (value as Record<string, unknown>) : null;",
      "context": "prev:function asObject(value: unknown): Record<string, unknown> | null { | next:}"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_254a05da1361",
      "file": "src/react/dynamicTools.ts",
      "line": 48,
      "col": 43,
      "snippet": "const parsed = JSON.parse(payloadJson) as unknown;",
      "context": "prev:try { | next:const root = asObject(parsed);"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_ad61feca714b",
      "file": "src/react/index.ts",
      "line": 32,
      "col": 3,
      "snippet": "// as a standalone hook. Type exports remain available below.",
      "context": "prev:// useCodexThreads is composed through useCodex({ threads }) — not exported | next:// ── Utilities ────────────────────────────────────────────────────────"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_6e58f1a11d8f",
      "file": "src/react/queryArgs.ts",
      "line": 12,
      "col": 20,
      "snippet": "return [\"skip\"] as OptionalRestArgsOrSkip<Query>;",
      "context": "prev:if (args === \"skip\") { | next:}"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_a0834e839500",
      "file": "src/react/queryArgs.ts",
      "line": 14,
      "col": 16,
      "snippet": "return [args] as OptionalRestArgsOrSkip<Query>;",
      "context": "prev:} | next:}"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_8f90a4081363",
      "file": "src/react/useCodex.ts",
      "line": 244,
      "col": 47,
      "snippet": "// not configured we pass the messages query as a stand-in ref; the \"skip\"",
      "context": "prev:// useQuery must always be called (rules of hooks). When token usage is | next:// args ensure Convex never executes it."
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_de3a2572b320",
      "file": "src/react/useCodexMessages.ts",
      "line": 15,
      "col": 50,
      "snippet": "const paginated = usePaginatedQuery(query, args as PaginatedQueryArgs<Query> | \"skip\", {",
      "context": "prev:): UsePaginatedQueryResult<CodexUIMessage> { | next:initialNumItems: options.initialNumItems,"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_a6c0333475d9",
      "file": "src/react/useCodexReasoning.ts",
      "line": 16,
      "col": 50,
      "snippet": "const paginated = usePaginatedQuery(query, args as PaginatedQueryArgs<Query> | \"skip\", {",
      "context": "prev:): UsePaginatedQueryResult<CodexReasoningSegmentLike> { | next:initialNumItems: options.initialNumItems,"
    },
    {
      "description": "Legacy allowlisted cast; review as needed.",
      "userApproved": false,
      "riskLevel": "default",
      "id": "UC_a685d2655a30",
      "file": "src/react/useCodexThreads.ts",
      "line": 74,
      "col": 19,
      "snippet": "? ((listed as Record<string, unknown>).threads as unknown[] | undefined)",
      "context": "prev:: listed && typeof listed === \"object\" && \"threads\" in listed | next:: undefined;"
    }
  ]
}
