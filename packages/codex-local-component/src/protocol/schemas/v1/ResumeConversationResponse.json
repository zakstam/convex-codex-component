{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ResumeConversationResponse",
  "type": "object",
  "required": [
    "conversationId",
    "model",
    "rolloutPath"
  ],
  "properties": {
    "conversationId": {
      "$ref": "#/definitions/ThreadId"
    },
    "initialMessages": {
      "type": [
        "array",
        "null"
      ],
      "items": {
        "$ref": "#/definitions/EventMsg"
      }
    },
    "model": {
      "type": "string"
    },
    "rolloutPath": {
      "type": "string"
    }
  },
  "definitions": {
    "AbsolutePathBuf": {
      "description": "A path that is guaranteed to be absolute and normalized (though it is not guaranteed to be canonicalized or exist on the filesystem).\n\nIMPORTANT: When deserializing an `AbsolutePathBuf`, a base path must be set using [AbsolutePathBufGuard::new]. If no base path is set, the deserialization will fail unless the path being deserialized is already absolute.",
      "type": "string"
    },
    "AgentMessageContent": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "text",
            "type"
          ],
          "properties": {
            "text": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "Text"
              ],
              "title": "TextAgentMessageContentType"
            }
          },
          "title": "TextAgentMessageContent"
        }
      ]
    },
    "AgentStatus": {
      "description": "Agent lifecycle status, derived from emitted events.",
      "oneOf": [
        {
          "description": "Agent is waiting for initialization.",
          "type": "string",
          "enum": [
            "pending_init"
          ]
        },
        {
          "description": "Agent is currently running.",
          "type": "string",
          "enum": [
            "running"
          ]
        },
        {
          "description": "Agent is done. Contains the final assistant message.",
          "type": "object",
          "required": [
            "completed"
          ],
          "properties": {
            "completed": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          "additionalProperties": false,
          "title": "CompletedAgentStatus"
        },
        {
          "description": "Agent encountered an error.",
          "type": "object",
          "required": [
            "errored"
          ],
          "properties": {
            "errored": {
              "type": "string"
            }
          },
          "additionalProperties": false,
          "title": "ErroredAgentStatus"
        },
        {
          "description": "Agent has been shutdown.",
          "type": "string",
          "enum": [
            "shutdown"
          ]
        },
        {
          "description": "Agent is not found.",
          "type": "string",
          "enum": [
            "not_found"
          ]
        }
      ]
    },
    "AskForApproval": {
      "description": "Determines the conditions under which the user is consulted to approve running the command proposed by Codex.",
      "oneOf": [
        {
          "description": "Under this policy, only \"known safe\" commands—as determined by `is_safe_command()`—that **only read files** are auto‑approved. Everything else will ask the user to approve.",
          "type": "string",
          "enum": [
            "untrusted"
          ]
        },
        {
          "description": "*All* commands are auto‑approved, but they are expected to run inside a sandbox where network access is disabled and writes are confined to a specific set of paths. If the command fails, it will be escalated to the user to approve execution without a sandbox.",
          "type": "string",
          "enum": [
            "on-failure"
          ]
        },
        {
          "description": "The model decides when to ask the user for approval.",
          "type": "string",
          "enum": [
            "on-request"
          ]
        },
        {
          "description": "Never ask the user to approve commands. Failures are immediately returned to the model, and never escalated to the user for approval.",
          "type": "string",
          "enum": [
            "never"
          ]
        }
      ]
    },
    "ByteRange": {
      "type": "object",
      "required": [
        "end",
        "start"
      ],
      "properties": {
        "end": {
          "description": "End byte offset (exclusive) within the UTF-8 text buffer.",
          "type": "integer",
          "format": "uint",
          "minimum": 0.0
        },
        "start": {
          "description": "Start byte offset (inclusive) within the UTF-8 text buffer.",
          "type": "integer",
          "format": "uint",
          "minimum": 0.0
        }
      }
    },
    "CallToolResult": {
      "description": "The server's response to a tool call.",
      "type": "object",
      "required": [
        "content"
      ],
      "properties": {
        "_meta": true,
        "content": {
          "type": "array",
          "items": true
        },
        "isError": {
          "type": [
            "boolean",
            "null"
          ]
        },
        "structuredContent": true
      }
    },
    "CodexErrorInfo": {
      "description": "Codex errors that we expose to clients.",
      "oneOf": [
        {
          "type": "string",
          "enum": [
            "context_window_exceeded",
            "usage_limit_exceeded",
            "internal_server_error",
            "unauthorized",
            "bad_request",
            "sandbox_error",
            "thread_rollback_failed",
            "other"
          ]
        },
        {
          "type": "object",
          "required": [
            "model_cap"
          ],
          "properties": {
            "model_cap": {
              "type": "object",
              "required": [
                "model"
              ],
              "properties": {
                "model": {
                  "type": "string"
                },
                "reset_after_seconds": {
                  "type": [
                    "integer",
                    "null"
                  ],
                  "format": "uint64",
                  "minimum": 0.0
                }
              }
            }
          },
          "additionalProperties": false,
          "title": "ModelCapCodexErrorInfo"
        },
        {
          "type": "object",
          "required": [
            "http_connection_failed"
          ],
          "properties": {
            "http_connection_failed": {
              "type": "object",
              "properties": {
                "http_status_code": {
                  "type": [
                    "integer",
                    "null"
                  ],
                  "format": "uint16",
                  "minimum": 0.0
                }
              }
            }
          },
          "additionalProperties": false,
          "title": "HttpConnectionFailedCodexErrorInfo"
        },
        {
          "description": "Failed to connect to the response SSE stream.",
          "type": "object",
          "required": [
            "response_stream_connection_failed"
          ],
          "properties": {
            "response_stream_connection_failed": {
              "type": "object",
              "properties": {
                "http_status_code": {
                  "type": [
                    "integer",
                    "null"
                  ],
                  "format": "uint16",
                  "minimum": 0.0
                }
              }
            }
          },
          "additionalProperties": false,
          "title": "ResponseStreamConnectionFailedCodexErrorInfo"
        },
        {
          "description": "The response SSE stream disconnected in the middle of a turnbefore completion.",
          "type": "object",
          "required": [
            "response_stream_disconnected"
          ],
          "properties": {
            "response_stream_disconnected": {
              "type": "object",
              "properties": {
                "http_status_code": {
                  "type": [
                    "integer",
                    "null"
                  ],
                  "format": "uint16",
                  "minimum": 0.0
                }
              }
            }
          },
          "additionalProperties": false,
          "title": "ResponseStreamDisconnectedCodexErrorInfo"
        },
        {
          "description": "Reached the retry limit for responses.",
          "type": "object",
          "required": [
            "response_too_many_failed_attempts"
          ],
          "properties": {
            "response_too_many_failed_attempts": {
              "type": "object",
              "properties": {
                "http_status_code": {
                  "type": [
                    "integer",
                    "null"
                  ],
                  "format": "uint16",
                  "minimum": 0.0
                }
              }
            }
          },
          "additionalProperties": false,
          "title": "ResponseTooManyFailedAttemptsCodexErrorInfo"
        }
      ]
    },
    "ContentItem": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "text",
            "type"
          ],
          "properties": {
            "text": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "input_text"
              ],
              "title": "InputTextContentItemType"
            }
          },
          "title": "InputTextContentItem"
        },
        {
          "type": "object",
          "required": [
            "image_url",
            "type"
          ],
          "properties": {
            "image_url": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "input_image"
              ],
              "title": "InputImageContentItemType"
            }
          },
          "title": "InputImageContentItem"
        },
        {
          "type": "object",
          "required": [
            "text",
            "type"
          ],
          "properties": {
            "text": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "output_text"
              ],
              "title": "OutputTextContentItemType"
            }
          },
          "title": "OutputTextContentItem"
        }
      ]
    },
    "CreditsSnapshot": {
      "type": "object",
      "required": [
        "has_credits",
        "unlimited"
      ],
      "properties": {
        "balance": {
          "type": [
            "string",
            "null"
          ]
        },
        "has_credits": {
          "type": "boolean"
        },
        "unlimited": {
          "type": "boolean"
        }
      }
    },
    "CustomPrompt": {
      "type": "object",
      "required": [
        "content",
        "name",
        "path"
      ],
      "properties": {
        "argument_hint": {
          "type": [
            "string",
            "null"
          ]
        },
        "content": {
          "type": "string"
        },
        "description": {
          "type": [
            "string",
            "null"
          ]
        },
        "name": {
          "type": "string"
        },
        "path": {
          "type": "string"
        }
      }
    },
    "Duration": {
      "type": "object",
      "required": [
        "nanos",
        "secs"
      ],
      "properties": {
        "nanos": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0.0
        },
        "secs": {
          "type": "integer",
          "format": "uint64",
          "minimum": 0.0
        }
      }
    },
    "EventMsg": {
      "description": "Response event from the agent NOTE: Make sure none of these values have optional types, as it will mess up the extension code-gen.",
      "oneOf": [
        {
          "description": "Error while executing a submission",
          "type": "object",
          "required": [
            "message",
            "type"
          ],
          "properties": {
            "codex_error_info": {
              "default": null,
              "anyOf": [
                {
                  "$ref": "#/definitions/CodexErrorInfo"
                },
                {
                  "type": "null"
                }
              ]
            },
            "message": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "error"
              ],
              "title": "ErrorEventMsgType"
            }
          },
          "title": "ErrorEventMsg"
        },
        {
          "description": "Warning issued while processing a submission. Unlike `Error`, this indicates the turn continued but the user should still be notified.",
          "type": "object",
          "required": [
            "message",
            "type"
          ],
          "properties": {
            "message": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "warning"
              ],
              "title": "WarningEventMsgType"
            }
          },
          "title": "WarningEventMsg"
        },
        {
          "description": "Conversation history was compacted (either automatically or manually).",
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "context_compacted"
              ],
              "title": "ContextCompactedEventMsgType"
            }
          },
          "title": "ContextCompactedEventMsg"
        },
        {
          "description": "Conversation history was rolled back by dropping the last N user turns.",
          "type": "object",
          "required": [
            "num_turns",
            "type"
          ],
          "properties": {
            "num_turns": {
              "description": "Number of user turns that were removed from context.",
              "type": "integer",
              "format": "uint32",
              "minimum": 0.0
            },
            "type": {
              "type": "string",
              "enum": [
                "thread_rolled_back"
              ],
              "title": "ThreadRolledBackEventMsgType"
            }
          },
          "title": "ThreadRolledBackEventMsg"
        },
        {
          "description": "Agent has started a turn. v1 wire format uses `task_started`; accept `turn_started` for v2 interop.",
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "collaboration_mode_kind": {
              "default": "default",
              "allOf": [
                {
                  "$ref": "#/definitions/ModeKind"
                }
              ]
            },
            "model_context_window": {
              "type": [
                "integer",
                "null"
              ],
              "format": "int64"
            },
            "type": {
              "type": "string",
              "enum": [
                "task_started"
              ],
              "title": "TaskStartedEventMsgType"
            }
          },
          "title": "TaskStartedEventMsg"
        },
        {
          "description": "Agent has completed all actions. v1 wire format uses `task_complete`; accept `turn_complete` for v2 interop.",
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "last_agent_message": {
              "type": [
                "string",
                "null"
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "task_complete"
              ],
              "title": "TaskCompleteEventMsgType"
            }
          },
          "title": "TaskCompleteEventMsg"
        },
        {
          "description": "Usage update for the current session, including totals and last turn. Optional means unknown — UIs should not display when `None`.",
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "info": {
              "anyOf": [
                {
                  "$ref": "#/definitions/TokenUsageInfo"
                },
                {
                  "type": "null"
                }
              ]
            },
            "rate_limits": {
              "anyOf": [
                {
                  "$ref": "#/definitions/RateLimitSnapshot"
                },
                {
                  "type": "null"
                }
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "token_count"
              ],
              "title": "TokenCountEventMsgType"
            }
          },
          "title": "TokenCountEventMsg"
        },
        {
          "description": "Agent text output message",
          "type": "object",
          "required": [
            "message",
            "type"
          ],
          "properties": {
            "message": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "agent_message"
              ],
              "title": "AgentMessageEventMsgType"
            }
          },
          "title": "AgentMessageEventMsg"
        },
        {
          "description": "User/system input message (what was sent to the model)",
          "type": "object",
          "required": [
            "message",
            "type"
          ],
          "properties": {
            "images": {
              "description": "Image URLs sourced from `UserInput::Image`. These are safe to replay in legacy UI history events and correspond to images sent to the model.",
              "type": [
                "array",
                "null"
              ],
              "items": {
                "type": "string"
              }
            },
            "local_images": {
              "description": "Local file paths sourced from `UserInput::LocalImage`. These are kept so the UI can reattach images when editing history, and should not be sent to the model or treated as API-ready URLs.",
              "default": [],
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "message": {
              "type": "string"
            },
            "text_elements": {
              "description": "UI-defined spans within `message` used to render or persist special elements.",
              "default": [],
              "type": "array",
              "items": {
                "$ref": "#/definitions/TextElement"
              }
            },
            "type": {
              "type": "string",
              "enum": [
                "user_message"
              ],
              "title": "UserMessageEventMsgType"
            }
          },
          "title": "UserMessageEventMsg"
        },
        {
          "description": "Agent text output delta message",
          "type": "object",
          "required": [
            "delta",
            "type"
          ],
          "properties": {
            "delta": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "agent_message_delta"
              ],
              "title": "AgentMessageDeltaEventMsgType"
            }
          },
          "title": "AgentMessageDeltaEventMsg"
        },
        {
          "description": "Reasoning event from agent.",
          "type": "object",
          "required": [
            "text",
            "type"
          ],
          "properties": {
            "text": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "agent_reasoning"
              ],
              "title": "AgentReasoningEventMsgType"
            }
          },
          "title": "AgentReasoningEventMsg"
        },
        {
          "description": "Agent reasoning delta event from agent.",
          "type": "object",
          "required": [
            "delta",
            "type"
          ],
          "properties": {
            "delta": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "agent_reasoning_delta"
              ],
              "title": "AgentReasoningDeltaEventMsgType"
            }
          },
          "title": "AgentReasoningDeltaEventMsg"
        },
        {
          "description": "Raw chain-of-thought from agent.",
          "type": "object",
          "required": [
            "text",
            "type"
          ],
          "properties": {
            "text": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "agent_reasoning_raw_content"
              ],
              "title": "AgentReasoningRawContentEventMsgType"
            }
          },
          "title": "AgentReasoningRawContentEventMsg"
        },
        {
          "description": "Agent reasoning content delta event from agent.",
          "type": "object",
          "required": [
            "delta",
            "type"
          ],
          "properties": {
            "delta": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "agent_reasoning_raw_content_delta"
              ],
              "title": "AgentReasoningRawContentDeltaEventMsgType"
            }
          },
          "title": "AgentReasoningRawContentDeltaEventMsg"
        },
        {
          "description": "Signaled when the model begins a new reasoning summary section (e.g., a new titled block).",
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "item_id": {
              "default": "",
              "type": "string"
            },
            "summary_index": {
              "default": 0,
              "type": "integer",
              "format": "int64"
            },
            "type": {
              "type": "string",
              "enum": [
                "agent_reasoning_section_break"
              ],
              "title": "AgentReasoningSectionBreakEventMsgType"
            }
          },
          "title": "AgentReasoningSectionBreakEventMsg"
        },
        {
          "description": "Ack the client's configure message.",
          "type": "object",
          "required": [
            "approval_policy",
            "cwd",
            "history_entry_count",
            "history_log_id",
            "model",
            "model_provider_id",
            "sandbox_policy",
            "session_id",
            "type"
          ],
          "properties": {
            "approval_policy": {
              "description": "When to escalate for approval for execution",
              "allOf": [
                {
                  "$ref": "#/definitions/AskForApproval"
                }
              ]
            },
            "cwd": {
              "description": "Working directory that should be treated as the *root* of the session.",
              "type": "string"
            },
            "forked_from_id": {
              "anyOf": [
                {
                  "$ref": "#/definitions/ThreadId"
                },
                {
                  "type": "null"
                }
              ]
            },
            "history_entry_count": {
              "description": "Current number of entries in the history log.",
              "type": "integer",
              "format": "uint",
              "minimum": 0.0
            },
            "history_log_id": {
              "description": "Identifier of the history log file (inode on Unix, 0 otherwise).",
              "type": "integer",
              "format": "uint64",
              "minimum": 0.0
            },
            "initial_messages": {
              "description": "Optional initial messages (as events) for resumed sessions. When present, UIs can use these to seed the history.",
              "type": [
                "array",
                "null"
              ],
              "items": {
                "$ref": "#/definitions/EventMsg"
              }
            },
            "model": {
              "description": "Tell the client what model is being queried.",
              "type": "string"
            },
            "model_provider_id": {
              "type": "string"
            },
            "reasoning_effort": {
              "description": "The effort the model is putting into reasoning about the user's request.",
              "anyOf": [
                {
                  "$ref": "#/definitions/ReasoningEffort"
                },
                {
                  "type": "null"
                }
              ]
            },
            "rollout_path": {
              "description": "Path in which the rollout is stored. Can be `None` for ephemeral threads",
              "type": [
                "string",
                "null"
              ]
            },
            "sandbox_policy": {
              "description": "How to sandbox commands executed in the system",
              "allOf": [
                {
                  "$ref": "#/definitions/SandboxPolicy"
                }
              ]
            },
            "session_id": {
              "$ref": "#/definitions/ThreadId"
            },
            "thread_name": {
              "description": "Optional user-facing thread name (may be unset).",
              "type": [
                "string",
                "null"
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "session_configured"
              ],
              "title": "SessionConfiguredEventMsgType"
            }
          },
          "title": "SessionConfiguredEventMsg"
        },
        {
          "description": "Updated session metadata (e.g., thread name changes).",
          "type": "object",
          "required": [
            "thread_id",
            "type"
          ],
          "properties": {
            "thread_id": {
              "$ref": "#/definitions/ThreadId"
            },
            "thread_name": {
              "type": [
                "string",
                "null"
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "thread_name_updated"
              ],
              "title": "ThreadNameUpdatedEventMsgType"
            }
          },
          "title": "ThreadNameUpdatedEventMsg"
        },
        {
          "description": "Incremental MCP startup progress updates.",
          "type": "object",
          "required": [
            "server",
            "status",
            "type"
          ],
          "properties": {
            "server": {
              "description": "Server name being started.",
              "type": "string"
            },
            "status": {
              "description": "Current startup status.",
              "allOf": [
                {
                  "$ref": "#/definitions/McpStartupStatus"
                }
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "mcp_startup_update"
              ],
              "title": "McpStartupUpdateEventMsgType"
            }
          },
          "title": "McpStartupUpdateEventMsg"
        },
        {
          "description": "Aggregate MCP startup completion summary.",
          "type": "object",
          "required": [
            "cancelled",
            "failed",
            "ready",
            "type"
          ],
          "properties": {
            "cancelled": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "failed": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/McpStartupFailure"
              }
            },
            "ready": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "type": {
              "type": "string",
              "enum": [
                "mcp_startup_complete"
              ],
              "title": "McpStartupCompleteEventMsgType"
            }
          },
          "title": "McpStartupCompleteEventMsg"
        },
        {
          "type": "object",
          "required": [
            "call_id",
            "invocation",
            "type"
          ],
          "properties": {
            "call_id": {
              "description": "Identifier so this can be paired with the McpToolCallEnd event.",
              "type": "string"
            },
            "invocation": {
              "$ref": "#/definitions/McpInvocation"
            },
            "type": {
              "type": "string",
              "enum": [
                "mcp_tool_call_begin"
              ],
              "title": "McpToolCallBeginEventMsgType"
            }
          },
          "title": "McpToolCallBeginEventMsg"
        },
        {
          "type": "object",
          "required": [
            "call_id",
            "duration",
            "invocation",
            "result",
            "type"
          ],
          "properties": {
            "call_id": {
              "description": "Identifier for the corresponding McpToolCallBegin that finished.",
              "type": "string"
            },
            "duration": {
              "$ref": "#/definitions/Duration"
            },
            "invocation": {
              "$ref": "#/definitions/McpInvocation"
            },
            "result": {
              "description": "Result of the tool call. Note this could be an error.",
              "allOf": [
                {
                  "$ref": "#/definitions/Result_of_CallToolResult_or_String"
                }
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "mcp_tool_call_end"
              ],
              "title": "McpToolCallEndEventMsgType"
            }
          },
          "title": "McpToolCallEndEventMsg"
        },
        {
          "type": "object",
          "required": [
            "call_id",
            "type"
          ],
          "properties": {
            "call_id": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "web_search_begin"
              ],
              "title": "WebSearchBeginEventMsgType"
            }
          },
          "title": "WebSearchBeginEventMsg"
        },
        {
          "type": "object",
          "required": [
            "action",
            "call_id",
            "query",
            "type"
          ],
          "properties": {
            "action": {
              "$ref": "#/definitions/WebSearchAction"
            },
            "call_id": {
              "type": "string"
            },
            "query": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "web_search_end"
              ],
              "title": "WebSearchEndEventMsgType"
            }
          },
          "title": "WebSearchEndEventMsg"
        },
        {
          "description": "Notification that the server is about to execute a command.",
          "type": "object",
          "required": [
            "call_id",
            "command",
            "cwd",
            "parsed_cmd",
            "turn_id",
            "type"
          ],
          "properties": {
            "call_id": {
              "description": "Identifier so this can be paired with the ExecCommandEnd event.",
              "type": "string"
            },
            "command": {
              "description": "The command to be executed.",
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "cwd": {
              "description": "The command's working directory if not the default cwd for the agent.",
              "type": "string"
            },
            "interaction_input": {
              "description": "Raw input sent to a unified exec session (if this is an interaction event).",
              "type": [
                "string",
                "null"
              ]
            },
            "parsed_cmd": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/ParsedCommand"
              }
            },
            "process_id": {
              "description": "Identifier for the underlying PTY process (when available).",
              "type": [
                "string",
                "null"
              ]
            },
            "source": {
              "description": "Where the command originated. Defaults to Agent for backward compatibility.",
              "default": "agent",
              "allOf": [
                {
                  "$ref": "#/definitions/ExecCommandSource"
                }
              ]
            },
            "turn_id": {
              "description": "Turn ID that this command belongs to.",
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "exec_command_begin"
              ],
              "title": "ExecCommandBeginEventMsgType"
            }
          },
          "title": "ExecCommandBeginEventMsg"
        },
        {
          "description": "Incremental chunk of output from a running command.",
          "type": "object",
          "required": [
            "call_id",
            "chunk",
            "stream",
            "type"
          ],
          "properties": {
            "call_id": {
              "description": "Identifier for the ExecCommandBegin that produced this chunk.",
              "type": "string"
            },
            "chunk": {
              "description": "Raw bytes from the stream (may not be valid UTF-8).",
              "type": "string"
            },
            "stream": {
              "description": "Which stream produced this chunk.",
              "allOf": [
                {
                  "$ref": "#/definitions/ExecOutputStream"
                }
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "exec_command_output_delta"
              ],
              "title": "ExecCommandOutputDeltaEventMsgType"
            }
          },
          "title": "ExecCommandOutputDeltaEventMsg"
        },
        {
          "description": "Terminal interaction for an in-progress command (stdin sent and stdout observed).",
          "type": "object",
          "required": [
            "call_id",
            "process_id",
            "stdin",
            "type"
          ],
          "properties": {
            "call_id": {
              "description": "Identifier for the ExecCommandBegin that produced this chunk.",
              "type": "string"
            },
            "process_id": {
              "description": "Process id associated with the running command.",
              "type": "string"
            },
            "stdin": {
              "description": "Stdin sent to the running session.",
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "terminal_interaction"
              ],
              "title": "TerminalInteractionEventMsgType"
            }
          },
          "title": "TerminalInteractionEventMsg"
        },
        {
          "type": "object",
          "required": [
            "call_id",
            "command",
            "cwd",
            "duration",
            "exit_code",
            "formatted_output",
            "parsed_cmd",
            "stderr",
            "stdout",
            "turn_id",
            "type"
          ],
          "properties": {
            "aggregated_output": {
              "description": "Captured aggregated output",
              "default": "",
              "type": "string"
            },
            "call_id": {
              "description": "Identifier for the ExecCommandBegin that finished.",
              "type": "string"
            },
            "command": {
              "description": "The command that was executed.",
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "cwd": {
              "description": "The command's working directory if not the default cwd for the agent.",
              "type": "string"
            },
            "duration": {
              "description": "The duration of the command execution.",
              "allOf": [
                {
                  "$ref": "#/definitions/Duration"
                }
              ]
            },
            "exit_code": {
              "description": "The command's exit code.",
              "type": "integer",
              "format": "int32"
            },
            "formatted_output": {
              "description": "Formatted output from the command, as seen by the model.",
              "type": "string"
            },
            "interaction_input": {
              "description": "Raw input sent to a unified exec session (if this is an interaction event).",
              "type": [
                "string",
                "null"
              ]
            },
            "parsed_cmd": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/ParsedCommand"
              }
            },
            "process_id": {
              "description": "Identifier for the underlying PTY process (when available).",
              "type": [
                "string",
                "null"
              ]
            },
            "source": {
              "description": "Where the command originated. Defaults to Agent for backward compatibility.",
              "default": "agent",
              "allOf": [
                {
                  "$ref": "#/definitions/ExecCommandSource"
                }
              ]
            },
            "stderr": {
              "description": "Captured stderr",
              "type": "string"
            },
            "stdout": {
              "description": "Captured stdout",
              "type": "string"
            },
            "turn_id": {
              "description": "Turn ID that this command belongs to.",
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "exec_command_end"
              ],
              "title": "ExecCommandEndEventMsgType"
            }
          },
          "title": "ExecCommandEndEventMsg"
        },
        {
          "description": "Notification that the agent attached a local image via the view_image tool.",
          "type": "object",
          "required": [
            "call_id",
            "path",
            "type"
          ],
          "properties": {
            "call_id": {
              "description": "Identifier for the originating tool call.",
              "type": "string"
            },
            "path": {
              "description": "Local filesystem path provided to the tool.",
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "view_image_tool_call"
              ],
              "title": "ViewImageToolCallEventMsgType"
            }
          },
          "title": "ViewImageToolCallEventMsg"
        },
        {
          "type": "object",
          "required": [
            "call_id",
            "command",
            "cwd",
            "parsed_cmd",
            "type"
          ],
          "properties": {
            "call_id": {
              "description": "Identifier for the associated exec call, if available.",
              "type": "string"
            },
            "command": {
              "description": "The command to be executed.",
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "cwd": {
              "description": "The command's working directory.",
              "type": "string"
            },
            "parsed_cmd": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/ParsedCommand"
              }
            },
            "proposed_execpolicy_amendment": {
              "description": "Proposed execpolicy amendment that can be applied to allow future runs.",
              "type": [
                "array",
                "null"
              ],
              "items": {
                "type": "string"
              }
            },
            "reason": {
              "description": "Optional human-readable reason for the approval (e.g. retry without sandbox).",
              "type": [
                "string",
                "null"
              ]
            },
            "turn_id": {
              "description": "Turn ID that this command belongs to. Uses `#[serde(default)]` for backwards compatibility.",
              "default": "",
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "exec_approval_request"
              ],
              "title": "ExecApprovalRequestEventMsgType"
            }
          },
          "title": "ExecApprovalRequestEventMsg"
        },
        {
          "type": "object",
          "required": [
            "call_id",
            "questions",
            "type"
          ],
          "properties": {
            "call_id": {
              "description": "Responses API call id for the associated tool call, if available.",
              "type": "string"
            },
            "questions": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/RequestUserInputQuestion"
              }
            },
            "turn_id": {
              "description": "Turn ID that this request belongs to. Uses `#[serde(default)]` for backwards compatibility.",
              "default": "",
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "request_user_input"
              ],
              "title": "RequestUserInputEventMsgType"
            }
          },
          "title": "RequestUserInputEventMsg"
        },
        {
          "type": "object",
          "required": [
            "arguments",
            "callId",
            "tool",
            "turnId",
            "type"
          ],
          "properties": {
            "arguments": true,
            "callId": {
              "type": "string"
            },
            "tool": {
              "type": "string"
            },
            "turnId": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "dynamic_tool_call_request"
              ],
              "title": "DynamicToolCallRequestEventMsgType"
            }
          },
          "title": "DynamicToolCallRequestEventMsg"
        },
        {
          "type": "object",
          "required": [
            "id",
            "message",
            "server_name",
            "type"
          ],
          "properties": {
            "id": {
              "$ref": "#/definitions/RequestId"
            },
            "message": {
              "type": "string"
            },
            "server_name": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "elicitation_request"
              ],
              "title": "ElicitationRequestEventMsgType"
            }
          },
          "title": "ElicitationRequestEventMsg"
        },
        {
          "type": "object",
          "required": [
            "call_id",
            "changes",
            "type"
          ],
          "properties": {
            "call_id": {
              "description": "Responses API call id for the associated patch apply call, if available.",
              "type": "string"
            },
            "changes": {
              "type": "object",
              "additionalProperties": {
                "$ref": "#/definitions/FileChange"
              }
            },
            "grant_root": {
              "description": "When set, the agent is asking the user to allow writes under this root for the remainder of the session.",
              "type": [
                "string",
                "null"
              ]
            },
            "reason": {
              "description": "Optional explanatory reason (e.g. request for extra write access).",
              "type": [
                "string",
                "null"
              ]
            },
            "turn_id": {
              "description": "Turn ID that this patch belongs to. Uses `#[serde(default)]` for backwards compatibility with older senders.",
              "default": "",
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "apply_patch_approval_request"
              ],
              "title": "ApplyPatchApprovalRequestEventMsgType"
            }
          },
          "title": "ApplyPatchApprovalRequestEventMsg"
        },
        {
          "description": "Notification advising the user that something they are using has been deprecated and should be phased out.",
          "type": "object",
          "required": [
            "summary",
            "type"
          ],
          "properties": {
            "details": {
              "description": "Optional extra guidance, such as migration steps or rationale.",
              "type": [
                "string",
                "null"
              ]
            },
            "summary": {
              "description": "Concise summary of what is deprecated.",
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "deprecation_notice"
              ],
              "title": "DeprecationNoticeEventMsgType"
            }
          },
          "title": "DeprecationNoticeEventMsg"
        },
        {
          "type": "object",
          "required": [
            "message",
            "type"
          ],
          "properties": {
            "message": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "background_event"
              ],
              "title": "BackgroundEventEventMsgType"
            }
          },
          "title": "BackgroundEventEventMsg"
        },
        {
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "message": {
              "type": [
                "string",
                "null"
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "undo_started"
              ],
              "title": "UndoStartedEventMsgType"
            }
          },
          "title": "UndoStartedEventMsg"
        },
        {
          "type": "object",
          "required": [
            "success",
            "type"
          ],
          "properties": {
            "message": {
              "type": [
                "string",
                "null"
              ]
            },
            "success": {
              "type": "boolean"
            },
            "type": {
              "type": "string",
              "enum": [
                "undo_completed"
              ],
              "title": "UndoCompletedEventMsgType"
            }
          },
          "title": "UndoCompletedEventMsg"
        },
        {
          "description": "Notification that a model stream experienced an error or disconnect and the system is handling it (e.g., retrying with backoff).",
          "type": "object",
          "required": [
            "message",
            "type"
          ],
          "properties": {
            "additional_details": {
              "description": "Optional details about the underlying stream failure (often the same human-readable message that is surfaced as the terminal error if retries are exhausted).",
              "default": null,
              "type": [
                "string",
                "null"
              ]
            },
            "codex_error_info": {
              "default": null,
              "anyOf": [
                {
                  "$ref": "#/definitions/CodexErrorInfo"
                },
                {
                  "type": "null"
                }
              ]
            },
            "message": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "stream_error"
              ],
              "title": "StreamErrorEventMsgType"
            }
          },
          "title": "StreamErrorEventMsg"
        },
        {
          "description": "Notification that the agent is about to apply a code patch. Mirrors `ExecCommandBegin` so front‑ends can show progress indicators.",
          "type": "object",
          "required": [
            "auto_approved",
            "call_id",
            "changes",
            "type"
          ],
          "properties": {
            "auto_approved": {
              "description": "If true, there was no ApplyPatchApprovalRequest for this patch.",
              "type": "boolean"
            },
            "call_id": {
              "description": "Identifier so this can be paired with the PatchApplyEnd event.",
              "type": "string"
            },
            "changes": {
              "description": "The changes to be applied.",
              "type": "object",
              "additionalProperties": {
                "$ref": "#/definitions/FileChange"
              }
            },
            "turn_id": {
              "description": "Turn ID that this patch belongs to. Uses `#[serde(default)]` for backwards compatibility.",
              "default": "",
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "patch_apply_begin"
              ],
              "title": "PatchApplyBeginEventMsgType"
            }
          },
          "title": "PatchApplyBeginEventMsg"
        },
        {
          "description": "Notification that a patch application has finished.",
          "type": "object",
          "required": [
            "call_id",
            "stderr",
            "stdout",
            "success",
            "type"
          ],
          "properties": {
            "call_id": {
              "description": "Identifier for the PatchApplyBegin that finished.",
              "type": "string"
            },
            "changes": {
              "description": "The changes that were applied (mirrors PatchApplyBeginEvent::changes).",
              "default": {},
              "type": "object",
              "additionalProperties": {
                "$ref": "#/definitions/FileChange"
              }
            },
            "stderr": {
              "description": "Captured stderr (parser errors, IO failures, etc.).",
              "type": "string"
            },
            "stdout": {
              "description": "Captured stdout (summary printed by apply_patch).",
              "type": "string"
            },
            "success": {
              "description": "Whether the patch was applied successfully.",
              "type": "boolean"
            },
            "turn_id": {
              "description": "Turn ID that this patch belongs to. Uses `#[serde(default)]` for backwards compatibility.",
              "default": "",
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "patch_apply_end"
              ],
              "title": "PatchApplyEndEventMsgType"
            }
          },
          "title": "PatchApplyEndEventMsg"
        },
        {
          "type": "object",
          "required": [
            "type",
            "unified_diff"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "turn_diff"
              ],
              "title": "TurnDiffEventMsgType"
            },
            "unified_diff": {
              "type": "string"
            }
          },
          "title": "TurnDiffEventMsg"
        },
        {
          "description": "Response to GetHistoryEntryRequest.",
          "type": "object",
          "required": [
            "log_id",
            "offset",
            "type"
          ],
          "properties": {
            "entry": {
              "description": "The entry at the requested offset, if available and parseable.",
              "anyOf": [
                {
                  "$ref": "#/definitions/HistoryEntry"
                },
                {
                  "type": "null"
                }
              ]
            },
            "log_id": {
              "type": "integer",
              "format": "uint64",
              "minimum": 0.0
            },
            "offset": {
              "type": "integer",
              "format": "uint",
              "minimum": 0.0
            },
            "type": {
              "type": "string",
              "enum": [
                "get_history_entry_response"
              ],
              "title": "GetHistoryEntryResponseEventMsgType"
            }
          },
          "title": "GetHistoryEntryResponseEventMsg"
        },
        {
          "description": "List of MCP tools available to the agent.",
          "type": "object",
          "required": [
            "auth_statuses",
            "resource_templates",
            "resources",
            "tools",
            "type"
          ],
          "properties": {
            "auth_statuses": {
              "description": "Authentication status for each configured MCP server.",
              "type": "object",
              "additionalProperties": {
                "$ref": "#/definitions/McpAuthStatus"
              }
            },
            "resource_templates": {
              "description": "Known resource templates grouped by server name.",
              "type": "object",
              "additionalProperties": {
                "type": "array",
                "items": {
                  "$ref": "#/definitions/ResourceTemplate"
                }
              }
            },
            "resources": {
              "description": "Known resources grouped by server name.",
              "type": "object",
              "additionalProperties": {
                "type": "array",
                "items": {
                  "$ref": "#/definitions/Resource"
                }
              }
            },
            "tools": {
              "description": "Fully qualified tool name -> tool definition.",
              "type": "object",
              "additionalProperties": {
                "$ref": "#/definitions/Tool"
              }
            },
            "type": {
              "type": "string",
              "enum": [
                "mcp_list_tools_response"
              ],
              "title": "McpListToolsResponseEventMsgType"
            }
          },
          "title": "McpListToolsResponseEventMsg"
        },
        {
          "description": "List of custom prompts available to the agent.",
          "type": "object",
          "required": [
            "custom_prompts",
            "type"
          ],
          "properties": {
            "custom_prompts": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/CustomPrompt"
              }
            },
            "type": {
              "type": "string",
              "enum": [
                "list_custom_prompts_response"
              ],
              "title": "ListCustomPromptsResponseEventMsgType"
            }
          },
          "title": "ListCustomPromptsResponseEventMsg"
        },
        {
          "description": "List of skills available to the agent.",
          "type": "object",
          "required": [
            "skills",
            "type"
          ],
          "properties": {
            "skills": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/SkillsListEntry"
              }
            },
            "type": {
              "type": "string",
              "enum": [
                "list_skills_response"
              ],
              "title": "ListSkillsResponseEventMsgType"
            }
          },
          "title": "ListSkillsResponseEventMsg"
        },
        {
          "description": "List of remote skills available to the agent.",
          "type": "object",
          "required": [
            "skills",
            "type"
          ],
          "properties": {
            "skills": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/RemoteSkillSummary"
              }
            },
            "type": {
              "type": "string",
              "enum": [
                "list_remote_skills_response"
              ],
              "title": "ListRemoteSkillsResponseEventMsgType"
            }
          },
          "title": "ListRemoteSkillsResponseEventMsg"
        },
        {
          "description": "Remote skill downloaded to local cache.",
          "type": "object",
          "required": [
            "id",
            "name",
            "path",
            "type"
          ],
          "properties": {
            "id": {
              "type": "string"
            },
            "name": {
              "type": "string"
            },
            "path": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "remote_skill_downloaded"
              ],
              "title": "RemoteSkillDownloadedEventMsgType"
            }
          },
          "title": "RemoteSkillDownloadedEventMsg"
        },
        {
          "description": "Notification that skill data may have been updated and clients may want to reload.",
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "skills_update_available"
              ],
              "title": "SkillsUpdateAvailableEventMsgType"
            }
          },
          "title": "SkillsUpdateAvailableEventMsg"
        },
        {
          "type": "object",
          "required": [
            "plan",
            "type"
          ],
          "properties": {
            "explanation": {
              "description": "Arguments for the `update_plan` todo/checklist tool (not plan mode).",
              "default": null,
              "type": [
                "string",
                "null"
              ]
            },
            "plan": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/PlanItemArg"
              }
            },
            "type": {
              "type": "string",
              "enum": [
                "plan_update"
              ],
              "title": "PlanUpdateEventMsgType"
            }
          },
          "title": "PlanUpdateEventMsg"
        },
        {
          "type": "object",
          "required": [
            "reason",
            "type"
          ],
          "properties": {
            "reason": {
              "$ref": "#/definitions/TurnAbortReason"
            },
            "type": {
              "type": "string",
              "enum": [
                "turn_aborted"
              ],
              "title": "TurnAbortedEventMsgType"
            }
          },
          "title": "TurnAbortedEventMsg"
        },
        {
          "description": "Notification that the agent is shutting down.",
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "shutdown_complete"
              ],
              "title": "ShutdownCompleteEventMsgType"
            }
          },
          "title": "ShutdownCompleteEventMsg"
        },
        {
          "description": "Entered review mode.",
          "type": "object",
          "required": [
            "target",
            "type"
          ],
          "properties": {
            "target": {
              "$ref": "#/definitions/ReviewTarget"
            },
            "type": {
              "type": "string",
              "enum": [
                "entered_review_mode"
              ],
              "title": "EnteredReviewModeEventMsgType"
            },
            "user_facing_hint": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          "title": "EnteredReviewModeEventMsg"
        },
        {
          "description": "Exited review mode with an optional final result to apply.",
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "review_output": {
              "anyOf": [
                {
                  "$ref": "#/definitions/ReviewOutputEvent"
                },
                {
                  "type": "null"
                }
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "exited_review_mode"
              ],
              "title": "ExitedReviewModeEventMsgType"
            }
          },
          "title": "ExitedReviewModeEventMsg"
        },
        {
          "type": "object",
          "required": [
            "item",
            "type"
          ],
          "properties": {
            "item": {
              "$ref": "#/definitions/ResponseItem"
            },
            "type": {
              "type": "string",
              "enum": [
                "raw_response_item"
              ],
              "title": "RawResponseItemEventMsgType"
            }
          },
          "title": "RawResponseItemEventMsg"
        },
        {
          "type": "object",
          "required": [
            "item",
            "thread_id",
            "turn_id",
            "type"
          ],
          "properties": {
            "item": {
              "$ref": "#/definitions/TurnItem"
            },
            "thread_id": {
              "$ref": "#/definitions/ThreadId"
            },
            "turn_id": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "item_started"
              ],
              "title": "ItemStartedEventMsgType"
            }
          },
          "title": "ItemStartedEventMsg"
        },
        {
          "type": "object",
          "required": [
            "item",
            "thread_id",
            "turn_id",
            "type"
          ],
          "properties": {
            "item": {
              "$ref": "#/definitions/TurnItem"
            },
            "thread_id": {
              "$ref": "#/definitions/ThreadId"
            },
            "turn_id": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "item_completed"
              ],
              "title": "ItemCompletedEventMsgType"
            }
          },
          "title": "ItemCompletedEventMsg"
        },
        {
          "type": "object",
          "required": [
            "delta",
            "item_id",
            "thread_id",
            "turn_id",
            "type"
          ],
          "properties": {
            "delta": {
              "type": "string"
            },
            "item_id": {
              "type": "string"
            },
            "thread_id": {
              "type": "string"
            },
            "turn_id": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "agent_message_content_delta"
              ],
              "title": "AgentMessageContentDeltaEventMsgType"
            }
          },
          "title": "AgentMessageContentDeltaEventMsg"
        },
        {
          "type": "object",
          "required": [
            "delta",
            "item_id",
            "thread_id",
            "turn_id",
            "type"
          ],
          "properties": {
            "delta": {
              "type": "string"
            },
            "item_id": {
              "type": "string"
            },
            "thread_id": {
              "type": "string"
            },
            "turn_id": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "plan_delta"
              ],
              "title": "PlanDeltaEventMsgType"
            }
          },
          "title": "PlanDeltaEventMsg"
        },
        {
          "type": "object",
          "required": [
            "delta",
            "item_id",
            "thread_id",
            "turn_id",
            "type"
          ],
          "properties": {
            "delta": {
              "type": "string"
            },
            "item_id": {
              "type": "string"
            },
            "summary_index": {
              "default": 0,
              "type": "integer",
              "format": "int64"
            },
            "thread_id": {
              "type": "string"
            },
            "turn_id": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "reasoning_content_delta"
              ],
              "title": "ReasoningContentDeltaEventMsgType"
            }
          },
          "title": "ReasoningContentDeltaEventMsg"
        },
        {
          "type": "object",
          "required": [
            "delta",
            "item_id",
            "thread_id",
            "turn_id",
            "type"
          ],
          "properties": {
            "content_index": {
              "default": 0,
              "type": "integer",
              "format": "int64"
            },
            "delta": {
              "type": "string"
            },
            "item_id": {
              "type": "string"
            },
            "thread_id": {
              "type": "string"
            },
            "turn_id": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "reasoning_raw_content_delta"
              ],
              "title": "ReasoningRawContentDeltaEventMsgType"
            }
          },
          "title": "ReasoningRawContentDeltaEventMsg"
        },
        {
          "description": "Collab interaction: agent spawn begin.",
          "type": "object",
          "required": [
            "call_id",
            "prompt",
            "sender_thread_id",
            "type"
          ],
          "properties": {
            "call_id": {
              "description": "Identifier for the collab tool call.",
              "type": "string"
            },
            "prompt": {
              "description": "Initial prompt sent to the agent. Can be empty to prevent CoT leaking at the beginning.",
              "type": "string"
            },
            "sender_thread_id": {
              "description": "Thread ID of the sender.",
              "allOf": [
                {
                  "$ref": "#/definitions/ThreadId"
                }
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "collab_agent_spawn_begin"
              ],
              "title": "CollabAgentSpawnBeginEventMsgType"
            }
          },
          "title": "CollabAgentSpawnBeginEventMsg"
        },
        {
          "description": "Collab interaction: agent spawn end.",
          "type": "object",
          "required": [
            "call_id",
            "prompt",
            "sender_thread_id",
            "status",
            "type"
          ],
          "properties": {
            "call_id": {
              "description": "Identifier for the collab tool call.",
              "type": "string"
            },
            "new_thread_id": {
              "description": "Thread ID of the newly spawned agent, if it was created.",
              "anyOf": [
                {
                  "$ref": "#/definitions/ThreadId"
                },
                {
                  "type": "null"
                }
              ]
            },
            "prompt": {
              "description": "Initial prompt sent to the agent. Can be empty to prevent CoT leaking at the beginning.",
              "type": "string"
            },
            "sender_thread_id": {
              "description": "Thread ID of the sender.",
              "allOf": [
                {
                  "$ref": "#/definitions/ThreadId"
                }
              ]
            },
            "status": {
              "description": "Last known status of the new agent reported to the sender agent.",
              "allOf": [
                {
                  "$ref": "#/definitions/AgentStatus"
                }
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "collab_agent_spawn_end"
              ],
              "title": "CollabAgentSpawnEndEventMsgType"
            }
          },
          "title": "CollabAgentSpawnEndEventMsg"
        },
        {
          "description": "Collab interaction: agent interaction begin.",
          "type": "object",
          "required": [
            "call_id",
            "prompt",
            "receiver_thread_id",
            "sender_thread_id",
            "type"
          ],
          "properties": {
            "call_id": {
              "description": "Identifier for the collab tool call.",
              "type": "string"
            },
            "prompt": {
              "description": "Prompt sent from the sender to the receiver. Can be empty to prevent CoT leaking at the beginning.",
              "type": "string"
            },
            "receiver_thread_id": {
              "description": "Thread ID of the receiver.",
              "allOf": [
                {
                  "$ref": "#/definitions/ThreadId"
                }
              ]
            },
            "sender_thread_id": {
              "description": "Thread ID of the sender.",
              "allOf": [
                {
                  "$ref": "#/definitions/ThreadId"
                }
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "collab_agent_interaction_begin"
              ],
              "title": "CollabAgentInteractionBeginEventMsgType"
            }
          },
          "title": "CollabAgentInteractionBeginEventMsg"
        },
        {
          "description": "Collab interaction: agent interaction end.",
          "type": "object",
          "required": [
            "call_id",
            "prompt",
            "receiver_thread_id",
            "sender_thread_id",
            "status",
            "type"
          ],
          "properties": {
            "call_id": {
              "description": "Identifier for the collab tool call.",
              "type": "string"
            },
            "prompt": {
              "description": "Prompt sent from the sender to the receiver. Can be empty to prevent CoT leaking at the beginning.",
              "type": "string"
            },
            "receiver_thread_id": {
              "description": "Thread ID of the receiver.",
              "allOf": [
                {
                  "$ref": "#/definitions/ThreadId"
                }
              ]
            },
            "sender_thread_id": {
              "description": "Thread ID of the sender.",
              "allOf": [
                {
                  "$ref": "#/definitions/ThreadId"
                }
              ]
            },
            "status": {
              "description": "Last known status of the receiver agent reported to the sender agent.",
              "allOf": [
                {
                  "$ref": "#/definitions/AgentStatus"
                }
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "collab_agent_interaction_end"
              ],
              "title": "CollabAgentInteractionEndEventMsgType"
            }
          },
          "title": "CollabAgentInteractionEndEventMsg"
        },
        {
          "description": "Collab interaction: waiting begin.",
          "type": "object",
          "required": [
            "call_id",
            "receiver_thread_ids",
            "sender_thread_id",
            "type"
          ],
          "properties": {
            "call_id": {
              "description": "ID of the waiting call.",
              "type": "string"
            },
            "receiver_thread_ids": {
              "description": "Thread ID of the receivers.",
              "type": "array",
              "items": {
                "$ref": "#/definitions/ThreadId"
              }
            },
            "sender_thread_id": {
              "description": "Thread ID of the sender.",
              "allOf": [
                {
                  "$ref": "#/definitions/ThreadId"
                }
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "collab_waiting_begin"
              ],
              "title": "CollabWaitingBeginEventMsgType"
            }
          },
          "title": "CollabWaitingBeginEventMsg"
        },
        {
          "description": "Collab interaction: waiting end.",
          "type": "object",
          "required": [
            "call_id",
            "sender_thread_id",
            "statuses",
            "type"
          ],
          "properties": {
            "call_id": {
              "description": "ID of the waiting call.",
              "type": "string"
            },
            "sender_thread_id": {
              "description": "Thread ID of the sender.",
              "allOf": [
                {
                  "$ref": "#/definitions/ThreadId"
                }
              ]
            },
            "statuses": {
              "description": "Last known status of the receiver agents reported to the sender agent.",
              "type": "object",
              "additionalProperties": {
                "$ref": "#/definitions/AgentStatus"
              }
            },
            "type": {
              "type": "string",
              "enum": [
                "collab_waiting_end"
              ],
              "title": "CollabWaitingEndEventMsgType"
            }
          },
          "title": "CollabWaitingEndEventMsg"
        },
        {
          "description": "Collab interaction: close begin.",
          "type": "object",
          "required": [
            "call_id",
            "receiver_thread_id",
            "sender_thread_id",
            "type"
          ],
          "properties": {
            "call_id": {
              "description": "Identifier for the collab tool call.",
              "type": "string"
            },
            "receiver_thread_id": {
              "description": "Thread ID of the receiver.",
              "allOf": [
                {
                  "$ref": "#/definitions/ThreadId"
                }
              ]
            },
            "sender_thread_id": {
              "description": "Thread ID of the sender.",
              "allOf": [
                {
                  "$ref": "#/definitions/ThreadId"
                }
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "collab_close_begin"
              ],
              "title": "CollabCloseBeginEventMsgType"
            }
          },
          "title": "CollabCloseBeginEventMsg"
        },
        {
          "description": "Collab interaction: close end.",
          "type": "object",
          "required": [
            "call_id",
            "receiver_thread_id",
            "sender_thread_id",
            "status",
            "type"
          ],
          "properties": {
            "call_id": {
              "description": "Identifier for the collab tool call.",
              "type": "string"
            },
            "receiver_thread_id": {
              "description": "Thread ID of the receiver.",
              "allOf": [
                {
                  "$ref": "#/definitions/ThreadId"
                }
              ]
            },
            "sender_thread_id": {
              "description": "Thread ID of the sender.",
              "allOf": [
                {
                  "$ref": "#/definitions/ThreadId"
                }
              ]
            },
            "status": {
              "description": "Last known status of the receiver agent reported to the sender agent before the close.",
              "allOf": [
                {
                  "$ref": "#/definitions/AgentStatus"
                }
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "collab_close_end"
              ],
              "title": "CollabCloseEndEventMsgType"
            }
          },
          "title": "CollabCloseEndEventMsg"
        }
      ]
    },
    "ExecCommandSource": {
      "type": "string",
      "enum": [
        "agent",
        "user_shell",
        "unified_exec_startup",
        "unified_exec_interaction"
      ]
    },
    "ExecOutputStream": {
      "type": "string",
      "enum": [
        "stdout",
        "stderr"
      ]
    },
    "FileChange": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "content",
            "type"
          ],
          "properties": {
            "content": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "add"
              ],
              "title": "AddFileChangeType"
            }
          },
          "title": "AddFileChange"
        },
        {
          "type": "object",
          "required": [
            "content",
            "type"
          ],
          "properties": {
            "content": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "delete"
              ],
              "title": "DeleteFileChangeType"
            }
          },
          "title": "DeleteFileChange"
        },
        {
          "type": "object",
          "required": [
            "type",
            "unified_diff"
          ],
          "properties": {
            "move_path": {
              "type": [
                "string",
                "null"
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "update"
              ],
              "title": "UpdateFileChangeType"
            },
            "unified_diff": {
              "type": "string"
            }
          },
          "title": "UpdateFileChange"
        }
      ]
    },
    "FunctionCallOutputBody": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "array",
          "items": {
            "$ref": "#/definitions/FunctionCallOutputContentItem"
          }
        }
      ]
    },
    "FunctionCallOutputContentItem": {
      "description": "Responses API compatible content items that can be returned by a tool call. This is a subset of ContentItem with the types we support as function call outputs.",
      "oneOf": [
        {
          "type": "object",
          "required": [
            "text",
            "type"
          ],
          "properties": {
            "text": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "input_text"
              ],
              "title": "InputTextFunctionCallOutputContentItemType"
            }
          },
          "title": "InputTextFunctionCallOutputContentItem"
        },
        {
          "type": "object",
          "required": [
            "image_url",
            "type"
          ],
          "properties": {
            "image_url": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "input_image"
              ],
              "title": "InputImageFunctionCallOutputContentItemType"
            }
          },
          "title": "InputImageFunctionCallOutputContentItem"
        }
      ]
    },
    "FunctionCallOutputPayload": {
      "description": "The payload we send back to OpenAI when reporting a tool call result.\n\n`body` serializes directly as the wire value for `function_call_output.output`. `success` remains internal metadata for downstream handling.",
      "type": "object",
      "required": [
        "body"
      ],
      "properties": {
        "body": {
          "$ref": "#/definitions/FunctionCallOutputBody"
        },
        "success": {
          "type": [
            "boolean",
            "null"
          ]
        }
      }
    },
    "GhostCommit": {
      "description": "Details of a ghost commit created from a repository state.",
      "type": "object",
      "required": [
        "id",
        "preexisting_untracked_dirs",
        "preexisting_untracked_files"
      ],
      "properties": {
        "id": {
          "type": "string"
        },
        "parent": {
          "type": [
            "string",
            "null"
          ]
        },
        "preexisting_untracked_dirs": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "preexisting_untracked_files": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "HistoryEntry": {
      "type": "object",
      "required": [
        "conversation_id",
        "text",
        "ts"
      ],
      "properties": {
        "conversation_id": {
          "type": "string"
        },
        "text": {
          "type": "string"
        },
        "ts": {
          "type": "integer",
          "format": "uint64",
          "minimum": 0.0
        }
      }
    },
    "LocalShellAction": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "command",
            "type"
          ],
          "properties": {
            "command": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "env": {
              "type": [
                "object",
                "null"
              ],
              "additionalProperties": {
                "type": "string"
              }
            },
            "timeout_ms": {
              "type": [
                "integer",
                "null"
              ],
              "format": "uint64",
              "minimum": 0.0
            },
            "type": {
              "type": "string",
              "enum": [
                "exec"
              ],
              "title": "ExecLocalShellActionType"
            },
            "user": {
              "type": [
                "string",
                "null"
              ]
            },
            "working_directory": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          "title": "ExecLocalShellAction"
        }
      ]
    },
    "LocalShellStatus": {
      "type": "string",
      "enum": [
        "completed",
        "in_progress",
        "incomplete"
      ]
    },
    "McpAuthStatus": {
      "type": "string",
      "enum": [
        "unsupported",
        "not_logged_in",
        "bearer_token",
        "o_auth"
      ]
    },
    "McpInvocation": {
      "type": "object",
      "required": [
        "server",
        "tool"
      ],
      "properties": {
        "arguments": {
          "description": "Arguments to the tool call."
        },
        "server": {
          "description": "Name of the MCP server as defined in the config.",
          "type": "string"
        },
        "tool": {
          "description": "Name of the tool as given by the MCP server.",
          "type": "string"
        }
      }
    },
    "McpStartupFailure": {
      "type": "object",
      "required": [
        "error",
        "server"
      ],
      "properties": {
        "error": {
          "type": "string"
        },
        "server": {
          "type": "string"
        }
      }
    },
    "McpStartupStatus": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "state"
          ],
          "properties": {
            "state": {
              "type": "string",
              "enum": [
                "starting"
              ]
            }
          },
          "title": "StateMcpStartupStatus"
        },
        {
          "type": "object",
          "required": [
            "state"
          ],
          "properties": {
            "state": {
              "type": "string",
              "enum": [
                "ready"
              ]
            }
          },
          "title": "StateMcpStartupStatus2"
        },
        {
          "type": "object",
          "required": [
            "error",
            "state"
          ],
          "properties": {
            "error": {
              "type": "string"
            },
            "state": {
              "type": "string",
              "enum": [
                "failed"
              ]
            }
          }
        },
        {
          "type": "object",
          "required": [
            "state"
          ],
          "properties": {
            "state": {
              "type": "string",
              "enum": [
                "cancelled"
              ]
            }
          },
          "title": "StateMcpStartupStatus3"
        }
      ]
    },
    "MessagePhase": {
      "type": "string",
      "enum": [
        "commentary",
        "final_answer"
      ]
    },
    "ModeKind": {
      "description": "Initial collaboration mode to use when the TUI starts.",
      "type": "string",
      "enum": [
        "plan",
        "default"
      ]
    },
    "NetworkAccess": {
      "description": "Represents whether outbound network access is available to the agent.",
      "type": "string",
      "enum": [
        "restricted",
        "enabled"
      ]
    },
    "ParsedCommand": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "cmd",
            "name",
            "path",
            "type"
          ],
          "properties": {
            "cmd": {
              "type": "string"
            },
            "name": {
              "type": "string"
            },
            "path": {
              "description": "(Best effort) Path to the file being read by the command. When possible, this is an absolute path, though when relative, it should be resolved against the `cwd`` that will be used to run the command to derive the absolute path.",
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "read"
              ],
              "title": "ReadParsedCommandType"
            }
          },
          "title": "ReadParsedCommand"
        },
        {
          "type": "object",
          "required": [
            "cmd",
            "type"
          ],
          "properties": {
            "cmd": {
              "type": "string"
            },
            "path": {
              "type": [
                "string",
                "null"
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "list_files"
              ],
              "title": "ListFilesParsedCommandType"
            }
          },
          "title": "ListFilesParsedCommand"
        },
        {
          "type": "object",
          "required": [
            "cmd",
            "type"
          ],
          "properties": {
            "cmd": {
              "type": "string"
            },
            "path": {
              "type": [
                "string",
                "null"
              ]
            },
            "query": {
              "type": [
                "string",
                "null"
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "search"
              ],
              "title": "SearchParsedCommandType"
            }
          },
          "title": "SearchParsedCommand"
        },
        {
          "type": "object",
          "required": [
            "cmd",
            "type"
          ],
          "properties": {
            "cmd": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "unknown"
              ],
              "title": "UnknownParsedCommandType"
            }
          },
          "title": "UnknownParsedCommand"
        }
      ]
    },
    "PlanItemArg": {
      "type": "object",
      "required": [
        "status",
        "step"
      ],
      "properties": {
        "status": {
          "$ref": "#/definitions/StepStatus"
        },
        "step": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "PlanType": {
      "type": "string",
      "enum": [
        "free",
        "go",
        "plus",
        "pro",
        "team",
        "business",
        "enterprise",
        "edu",
        "unknown"
      ]
    },
    "RateLimitSnapshot": {
      "type": "object",
      "properties": {
        "credits": {
          "anyOf": [
            {
              "$ref": "#/definitions/CreditsSnapshot"
            },
            {
              "type": "null"
            }
          ]
        },
        "plan_type": {
          "anyOf": [
            {
              "$ref": "#/definitions/PlanType"
            },
            {
              "type": "null"
            }
          ]
        },
        "primary": {
          "anyOf": [
            {
              "$ref": "#/definitions/RateLimitWindow"
            },
            {
              "type": "null"
            }
          ]
        },
        "secondary": {
          "anyOf": [
            {
              "$ref": "#/definitions/RateLimitWindow"
            },
            {
              "type": "null"
            }
          ]
        }
      }
    },
    "RateLimitWindow": {
      "type": "object",
      "required": [
        "used_percent"
      ],
      "properties": {
        "resets_at": {
          "description": "Unix timestamp (seconds since epoch) when the window resets.",
          "type": [
            "integer",
            "null"
          ],
          "format": "int64"
        },
        "used_percent": {
          "description": "Percentage (0-100) of the window that has been consumed.",
          "type": "number",
          "format": "double"
        },
        "window_minutes": {
          "description": "Rolling window duration, in minutes.",
          "type": [
            "integer",
            "null"
          ],
          "format": "int64"
        }
      }
    },
    "ReasoningEffort": {
      "description": "See https://platform.openai.com/docs/guides/reasoning?api-mode=responses#get-started-with-reasoning",
      "type": "string",
      "enum": [
        "none",
        "minimal",
        "low",
        "medium",
        "high",
        "xhigh"
      ]
    },
    "ReasoningItemContent": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "text",
            "type"
          ],
          "properties": {
            "text": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "reasoning_text"
              ],
              "title": "ReasoningTextReasoningItemContentType"
            }
          },
          "title": "ReasoningTextReasoningItemContent"
        },
        {
          "type": "object",
          "required": [
            "text",
            "type"
          ],
          "properties": {
            "text": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "text"
              ],
              "title": "TextReasoningItemContentType"
            }
          },
          "title": "TextReasoningItemContent"
        }
      ]
    },
    "ReasoningItemReasoningSummary": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "text",
            "type"
          ],
          "properties": {
            "text": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "summary_text"
              ],
              "title": "SummaryTextReasoningItemReasoningSummaryType"
            }
          },
          "title": "SummaryTextReasoningItemReasoningSummary"
        }
      ]
    },
    "RemoteSkillSummary": {
      "type": "object",
      "required": [
        "description",
        "id",
        "name"
      ],
      "properties": {
        "description": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        }
      }
    },
    "RequestId": {
      "description": "ID of a request, which can be either a string or an integer.",
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "integer",
          "format": "int64"
        }
      ]
    },
    "RequestUserInputQuestion": {
      "type": "object",
      "required": [
        "header",
        "id",
        "question"
      ],
      "properties": {
        "header": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "isOther": {
          "default": false,
          "type": "boolean"
        },
        "isSecret": {
          "default": false,
          "type": "boolean"
        },
        "options": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "$ref": "#/definitions/RequestUserInputQuestionOption"
          }
        },
        "question": {
          "type": "string"
        }
      }
    },
    "RequestUserInputQuestionOption": {
      "type": "object",
      "required": [
        "description",
        "label"
      ],
      "properties": {
        "description": {
          "type": "string"
        },
        "label": {
          "type": "string"
        }
      }
    },
    "Resource": {
      "description": "A known resource that the server is capable of reading.",
      "type": "object",
      "required": [
        "name",
        "uri"
      ],
      "properties": {
        "_meta": true,
        "annotations": true,
        "description": {
          "type": [
            "string",
            "null"
          ]
        },
        "icons": {
          "type": [
            "array",
            "null"
          ],
          "items": true
        },
        "mimeType": {
          "type": [
            "string",
            "null"
          ]
        },
        "name": {
          "type": "string"
        },
        "size": {
          "type": [
            "integer",
            "null"
          ],
          "format": "int64"
        },
        "title": {
          "type": [
            "string",
            "null"
          ]
        },
        "uri": {
          "type": "string"
        }
      }
    },
    "ResourceTemplate": {
      "description": "A template description for resources available on the server.",
      "type": "object",
      "required": [
        "name",
        "uriTemplate"
      ],
      "properties": {
        "annotations": true,
        "description": {
          "type": [
            "string",
            "null"
          ]
        },
        "mimeType": {
          "type": [
            "string",
            "null"
          ]
        },
        "name": {
          "type": "string"
        },
        "title": {
          "type": [
            "string",
            "null"
          ]
        },
        "uriTemplate": {
          "type": "string"
        }
      }
    },
    "ResponseItem": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "content",
            "role",
            "type"
          ],
          "properties": {
            "content": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/ContentItem"
              }
            },
            "end_turn": {
              "type": [
                "boolean",
                "null"
              ]
            },
            "id": {
              "writeOnly": true,
              "type": [
                "string",
                "null"
              ]
            },
            "phase": {
              "anyOf": [
                {
                  "$ref": "#/definitions/MessagePhase"
                },
                {
                  "type": "null"
                }
              ]
            },
            "role": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "message"
              ],
              "title": "MessageResponseItemType"
            }
          },
          "title": "MessageResponseItem"
        },
        {
          "type": "object",
          "required": [
            "id",
            "summary",
            "type"
          ],
          "properties": {
            "content": {
              "default": null,
              "type": [
                "array",
                "null"
              ],
              "items": {
                "$ref": "#/definitions/ReasoningItemContent"
              }
            },
            "encrypted_content": {
              "type": [
                "string",
                "null"
              ]
            },
            "id": {
              "writeOnly": true,
              "type": "string"
            },
            "summary": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/ReasoningItemReasoningSummary"
              }
            },
            "type": {
              "type": "string",
              "enum": [
                "reasoning"
              ],
              "title": "ReasoningResponseItemType"
            }
          },
          "title": "ReasoningResponseItem"
        },
        {
          "type": "object",
          "required": [
            "action",
            "status",
            "type"
          ],
          "properties": {
            "action": {
              "$ref": "#/definitions/LocalShellAction"
            },
            "call_id": {
              "description": "Set when using the Responses API.",
              "type": [
                "string",
                "null"
              ]
            },
            "id": {
              "description": "Legacy id field retained for compatibility with older payloads.",
              "writeOnly": true,
              "type": [
                "string",
                "null"
              ]
            },
            "status": {
              "$ref": "#/definitions/LocalShellStatus"
            },
            "type": {
              "type": "string",
              "enum": [
                "local_shell_call"
              ],
              "title": "LocalShellCallResponseItemType"
            }
          },
          "title": "LocalShellCallResponseItem"
        },
        {
          "type": "object",
          "required": [
            "arguments",
            "call_id",
            "name",
            "type"
          ],
          "properties": {
            "arguments": {
              "type": "string"
            },
            "call_id": {
              "type": "string"
            },
            "id": {
              "writeOnly": true,
              "type": [
                "string",
                "null"
              ]
            },
            "name": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "function_call"
              ],
              "title": "FunctionCallResponseItemType"
            }
          },
          "title": "FunctionCallResponseItem"
        },
        {
          "type": "object",
          "required": [
            "call_id",
            "output",
            "type"
          ],
          "properties": {
            "call_id": {
              "type": "string"
            },
            "output": {
              "$ref": "#/definitions/FunctionCallOutputPayload"
            },
            "type": {
              "type": "string",
              "enum": [
                "function_call_output"
              ],
              "title": "FunctionCallOutputResponseItemType"
            }
          },
          "title": "FunctionCallOutputResponseItem"
        },
        {
          "type": "object",
          "required": [
            "call_id",
            "input",
            "name",
            "type"
          ],
          "properties": {
            "call_id": {
              "type": "string"
            },
            "id": {
              "writeOnly": true,
              "type": [
                "string",
                "null"
              ]
            },
            "input": {
              "type": "string"
            },
            "name": {
              "type": "string"
            },
            "status": {
              "type": [
                "string",
                "null"
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "custom_tool_call"
              ],
              "title": "CustomToolCallResponseItemType"
            }
          },
          "title": "CustomToolCallResponseItem"
        },
        {
          "type": "object",
          "required": [
            "call_id",
            "output",
            "type"
          ],
          "properties": {
            "call_id": {
              "type": "string"
            },
            "output": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "custom_tool_call_output"
              ],
              "title": "CustomToolCallOutputResponseItemType"
            }
          },
          "title": "CustomToolCallOutputResponseItem"
        },
        {
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "action": {
              "anyOf": [
                {
                  "$ref": "#/definitions/WebSearchAction"
                },
                {
                  "type": "null"
                }
              ]
            },
            "id": {
              "writeOnly": true,
              "type": [
                "string",
                "null"
              ]
            },
            "status": {
              "type": [
                "string",
                "null"
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "web_search_call"
              ],
              "title": "WebSearchCallResponseItemType"
            }
          },
          "title": "WebSearchCallResponseItem"
        },
        {
          "type": "object",
          "required": [
            "ghost_commit",
            "type"
          ],
          "properties": {
            "ghost_commit": {
              "$ref": "#/definitions/GhostCommit"
            },
            "type": {
              "type": "string",
              "enum": [
                "ghost_snapshot"
              ],
              "title": "GhostSnapshotResponseItemType"
            }
          },
          "title": "GhostSnapshotResponseItem"
        },
        {
          "type": "object",
          "required": [
            "encrypted_content",
            "type"
          ],
          "properties": {
            "encrypted_content": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "compaction"
              ],
              "title": "CompactionResponseItemType"
            }
          },
          "title": "CompactionResponseItem"
        },
        {
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "other"
              ],
              "title": "OtherResponseItemType"
            }
          },
          "title": "OtherResponseItem"
        }
      ]
    },
    "Result_of_CallToolResult_or_String": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "Ok"
          ],
          "properties": {
            "Ok": {
              "$ref": "#/definitions/CallToolResult"
            }
          },
          "title": "OkResult_of_CallToolResult_or_String"
        },
        {
          "type": "object",
          "required": [
            "Err"
          ],
          "properties": {
            "Err": {
              "type": "string"
            }
          },
          "title": "ErrResult_of_CallToolResult_or_String"
        }
      ]
    },
    "ReviewCodeLocation": {
      "description": "Location of the code related to a review finding.",
      "type": "object",
      "required": [
        "absolute_file_path",
        "line_range"
      ],
      "properties": {
        "absolute_file_path": {
          "type": "string"
        },
        "line_range": {
          "$ref": "#/definitions/ReviewLineRange"
        }
      }
    },
    "ReviewFinding": {
      "description": "A single review finding describing an observed issue or recommendation.",
      "type": "object",
      "required": [
        "body",
        "code_location",
        "confidence_score",
        "priority",
        "title"
      ],
      "properties": {
        "body": {
          "type": "string"
        },
        "code_location": {
          "$ref": "#/definitions/ReviewCodeLocation"
        },
        "confidence_score": {
          "type": "number",
          "format": "float"
        },
        "priority": {
          "type": "integer",
          "format": "int32"
        },
        "title": {
          "type": "string"
        }
      }
    },
    "ReviewLineRange": {
      "description": "Inclusive line range in a file associated with the finding.",
      "type": "object",
      "required": [
        "end",
        "start"
      ],
      "properties": {
        "end": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0.0
        },
        "start": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0.0
        }
      }
    },
    "ReviewOutputEvent": {
      "description": "Structured review result produced by a child review session.",
      "type": "object",
      "required": [
        "findings",
        "overall_confidence_score",
        "overall_correctness",
        "overall_explanation"
      ],
      "properties": {
        "findings": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ReviewFinding"
          }
        },
        "overall_confidence_score": {
          "type": "number",
          "format": "float"
        },
        "overall_correctness": {
          "type": "string"
        },
        "overall_explanation": {
          "type": "string"
        }
      }
    },
    "ReviewTarget": {
      "oneOf": [
        {
          "description": "Review the working tree: staged, unstaged, and untracked files.",
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "uncommittedChanges"
              ],
              "title": "UncommittedChangesReviewTargetType"
            }
          },
          "title": "UncommittedChangesReviewTarget"
        },
        {
          "description": "Review changes between the current branch and the given base branch.",
          "type": "object",
          "required": [
            "branch",
            "type"
          ],
          "properties": {
            "branch": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "baseBranch"
              ],
              "title": "BaseBranchReviewTargetType"
            }
          },
          "title": "BaseBranchReviewTarget"
        },
        {
          "description": "Review the changes introduced by a specific commit.",
          "type": "object",
          "required": [
            "sha",
            "type"
          ],
          "properties": {
            "sha": {
              "type": "string"
            },
            "title": {
              "description": "Optional human-readable label (e.g., commit subject) for UIs.",
              "type": [
                "string",
                "null"
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "commit"
              ],
              "title": "CommitReviewTargetType"
            }
          },
          "title": "CommitReviewTarget"
        },
        {
          "description": "Arbitrary instructions provided by the user.",
          "type": "object",
          "required": [
            "instructions",
            "type"
          ],
          "properties": {
            "instructions": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "custom"
              ],
              "title": "CustomReviewTargetType"
            }
          },
          "title": "CustomReviewTarget"
        }
      ]
    },
    "SandboxPolicy": {
      "description": "Determines execution restrictions for model shell commands.",
      "oneOf": [
        {
          "description": "No restrictions whatsoever. Use with caution.",
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "danger-full-access"
              ],
              "title": "DangerFullAccessSandboxPolicyType"
            }
          },
          "title": "DangerFullAccessSandboxPolicy"
        },
        {
          "description": "Read-only access to the entire file-system.",
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "read-only"
              ],
              "title": "ReadOnlySandboxPolicyType"
            }
          },
          "title": "ReadOnlySandboxPolicy"
        },
        {
          "description": "Indicates the process is already in an external sandbox. Allows full disk access while honoring the provided network setting.",
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "network_access": {
              "description": "Whether the external sandbox permits outbound network traffic.",
              "default": "restricted",
              "allOf": [
                {
                  "$ref": "#/definitions/NetworkAccess"
                }
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "external-sandbox"
              ],
              "title": "ExternalSandboxSandboxPolicyType"
            }
          },
          "title": "ExternalSandboxSandboxPolicy"
        },
        {
          "description": "Same as `ReadOnly` but additionally grants write access to the current working directory (\"workspace\").",
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "exclude_slash_tmp": {
              "description": "When set to `true`, will NOT include the `/tmp` among the default writable roots on UNIX. Defaults to `false`.",
              "default": false,
              "type": "boolean"
            },
            "exclude_tmpdir_env_var": {
              "description": "When set to `true`, will NOT include the per-user `TMPDIR` environment variable among the default writable roots. Defaults to `false`.",
              "default": false,
              "type": "boolean"
            },
            "network_access": {
              "description": "When set to `true`, outbound network access is allowed. `false` by default.",
              "default": false,
              "type": "boolean"
            },
            "type": {
              "type": "string",
              "enum": [
                "workspace-write"
              ],
              "title": "WorkspaceWriteSandboxPolicyType"
            },
            "writable_roots": {
              "description": "Additional folders (beyond cwd and possibly TMPDIR) that should be writable from within the sandbox.",
              "type": "array",
              "items": {
                "$ref": "#/definitions/AbsolutePathBuf"
              }
            }
          },
          "title": "WorkspaceWriteSandboxPolicy"
        }
      ]
    },
    "SkillDependencies": {
      "type": "object",
      "required": [
        "tools"
      ],
      "properties": {
        "tools": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/SkillToolDependency"
          }
        }
      }
    },
    "SkillErrorInfo": {
      "type": "object",
      "required": [
        "message",
        "path"
      ],
      "properties": {
        "message": {
          "type": "string"
        },
        "path": {
          "type": "string"
        }
      }
    },
    "SkillInterface": {
      "type": "object",
      "properties": {
        "brand_color": {
          "type": [
            "string",
            "null"
          ]
        },
        "default_prompt": {
          "type": [
            "string",
            "null"
          ]
        },
        "display_name": {
          "type": [
            "string",
            "null"
          ]
        },
        "icon_large": {
          "type": [
            "string",
            "null"
          ]
        },
        "icon_small": {
          "type": [
            "string",
            "null"
          ]
        },
        "short_description": {
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "SkillMetadata": {
      "type": "object",
      "required": [
        "description",
        "enabled",
        "name",
        "path",
        "scope"
      ],
      "properties": {
        "dependencies": {
          "anyOf": [
            {
              "$ref": "#/definitions/SkillDependencies"
            },
            {
              "type": "null"
            }
          ]
        },
        "description": {
          "type": "string"
        },
        "enabled": {
          "type": "boolean"
        },
        "interface": {
          "anyOf": [
            {
              "$ref": "#/definitions/SkillInterface"
            },
            {
              "type": "null"
            }
          ]
        },
        "name": {
          "type": "string"
        },
        "path": {
          "type": "string"
        },
        "scope": {
          "$ref": "#/definitions/SkillScope"
        },
        "short_description": {
          "description": "Legacy short_description from SKILL.md. Prefer SKILL.json interface.short_description.",
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "SkillScope": {
      "type": "string",
      "enum": [
        "user",
        "repo",
        "system",
        "admin"
      ]
    },
    "SkillToolDependency": {
      "type": "object",
      "required": [
        "type",
        "value"
      ],
      "properties": {
        "command": {
          "type": [
            "string",
            "null"
          ]
        },
        "description": {
          "type": [
            "string",
            "null"
          ]
        },
        "transport": {
          "type": [
            "string",
            "null"
          ]
        },
        "type": {
          "type": "string"
        },
        "url": {
          "type": [
            "string",
            "null"
          ]
        },
        "value": {
          "type": "string"
        }
      }
    },
    "SkillsListEntry": {
      "type": "object",
      "required": [
        "cwd",
        "errors",
        "skills"
      ],
      "properties": {
        "cwd": {
          "type": "string"
        },
        "errors": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/SkillErrorInfo"
          }
        },
        "skills": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/SkillMetadata"
          }
        }
      }
    },
    "StepStatus": {
      "type": "string",
      "enum": [
        "pending",
        "in_progress",
        "completed"
      ]
    },
    "TextElement": {
      "type": "object",
      "required": [
        "byte_range"
      ],
      "properties": {
        "byte_range": {
          "description": "Byte range in the parent `text` buffer that this element occupies.",
          "allOf": [
            {
              "$ref": "#/definitions/ByteRange"
            }
          ]
        },
        "placeholder": {
          "description": "Optional human-readable placeholder for the element, displayed in the UI.",
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "ThreadId": {
      "type": "string"
    },
    "TokenUsage": {
      "type": "object",
      "required": [
        "cached_input_tokens",
        "input_tokens",
        "output_tokens",
        "reasoning_output_tokens",
        "total_tokens"
      ],
      "properties": {
        "cached_input_tokens": {
          "type": "integer",
          "format": "int64"
        },
        "input_tokens": {
          "type": "integer",
          "format": "int64"
        },
        "output_tokens": {
          "type": "integer",
          "format": "int64"
        },
        "reasoning_output_tokens": {
          "type": "integer",
          "format": "int64"
        },
        "total_tokens": {
          "type": "integer",
          "format": "int64"
        }
      }
    },
    "TokenUsageInfo": {
      "type": "object",
      "required": [
        "last_token_usage",
        "total_token_usage"
      ],
      "properties": {
        "last_token_usage": {
          "$ref": "#/definitions/TokenUsage"
        },
        "model_context_window": {
          "type": [
            "integer",
            "null"
          ],
          "format": "int64"
        },
        "total_token_usage": {
          "$ref": "#/definitions/TokenUsage"
        }
      }
    },
    "Tool": {
      "description": "Definition for a tool the client can call.",
      "type": "object",
      "required": [
        "inputSchema",
        "name"
      ],
      "properties": {
        "_meta": true,
        "annotations": true,
        "description": {
          "type": [
            "string",
            "null"
          ]
        },
        "icons": {
          "type": [
            "array",
            "null"
          ],
          "items": true
        },
        "inputSchema": true,
        "name": {
          "type": "string"
        },
        "outputSchema": true,
        "title": {
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "TurnAbortReason": {
      "type": "string",
      "enum": [
        "interrupted",
        "replaced",
        "review_ended"
      ]
    },
    "TurnItem": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "content",
            "id",
            "type"
          ],
          "properties": {
            "content": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/UserInput"
              }
            },
            "id": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "UserMessage"
              ],
              "title": "UserMessageTurnItemType"
            }
          },
          "title": "UserMessageTurnItem"
        },
        {
          "type": "object",
          "required": [
            "content",
            "id",
            "type"
          ],
          "properties": {
            "content": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/AgentMessageContent"
              }
            },
            "id": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "AgentMessage"
              ],
              "title": "AgentMessageTurnItemType"
            }
          },
          "title": "AgentMessageTurnItem"
        },
        {
          "type": "object",
          "required": [
            "id",
            "text",
            "type"
          ],
          "properties": {
            "id": {
              "type": "string"
            },
            "text": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "Plan"
              ],
              "title": "PlanTurnItemType"
            }
          },
          "title": "PlanTurnItem"
        },
        {
          "type": "object",
          "required": [
            "id",
            "summary_text",
            "type"
          ],
          "properties": {
            "id": {
              "type": "string"
            },
            "raw_content": {
              "default": [],
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "summary_text": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "type": {
              "type": "string",
              "enum": [
                "Reasoning"
              ],
              "title": "ReasoningTurnItemType"
            }
          },
          "title": "ReasoningTurnItem"
        },
        {
          "type": "object",
          "required": [
            "action",
            "id",
            "query",
            "type"
          ],
          "properties": {
            "action": {
              "$ref": "#/definitions/WebSearchAction"
            },
            "id": {
              "type": "string"
            },
            "query": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "WebSearch"
              ],
              "title": "WebSearchTurnItemType"
            }
          },
          "title": "WebSearchTurnItem"
        },
        {
          "type": "object",
          "required": [
            "id",
            "type"
          ],
          "properties": {
            "id": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "ContextCompaction"
              ],
              "title": "ContextCompactionTurnItemType"
            }
          },
          "title": "ContextCompactionTurnItem"
        }
      ]
    },
    "UserInput": {
      "description": "User input",
      "oneOf": [
        {
          "type": "object",
          "required": [
            "text",
            "type"
          ],
          "properties": {
            "text": {
              "type": "string"
            },
            "text_elements": {
              "description": "UI-defined spans within `text` that should be treated as special elements. These are byte ranges into the UTF-8 `text` buffer and are used to render or persist rich input markers (e.g., image placeholders) across history and resume without mutating the literal text.",
              "default": [],
              "type": "array",
              "items": {
                "$ref": "#/definitions/TextElement"
              }
            },
            "type": {
              "type": "string",
              "enum": [
                "text"
              ],
              "title": "TextUserInputType"
            }
          },
          "title": "TextUserInput"
        },
        {
          "description": "Pre‑encoded data: URI image.",
          "type": "object",
          "required": [
            "image_url",
            "type"
          ],
          "properties": {
            "image_url": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "image"
              ],
              "title": "ImageUserInputType"
            }
          },
          "title": "ImageUserInput"
        },
        {
          "description": "Local image path provided by the user.  This will be converted to an `Image` variant (base64 data URL) during request serialization.",
          "type": "object",
          "required": [
            "path",
            "type"
          ],
          "properties": {
            "path": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "local_image"
              ],
              "title": "LocalImageUserInputType"
            }
          },
          "title": "LocalImageUserInput"
        },
        {
          "description": "Skill selected by the user (name + path to SKILL.md).",
          "type": "object",
          "required": [
            "name",
            "path",
            "type"
          ],
          "properties": {
            "name": {
              "type": "string"
            },
            "path": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "skill"
              ],
              "title": "SkillUserInputType"
            }
          },
          "title": "SkillUserInput"
        },
        {
          "description": "Explicit mention selected by the user (name + app://connector id).",
          "type": "object",
          "required": [
            "name",
            "path",
            "type"
          ],
          "properties": {
            "name": {
              "type": "string"
            },
            "path": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "mention"
              ],
              "title": "MentionUserInputType"
            }
          },
          "title": "MentionUserInput"
        }
      ]
    },
    "WebSearchAction": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "queries": {
              "type": [
                "array",
                "null"
              ],
              "items": {
                "type": "string"
              }
            },
            "query": {
              "type": [
                "string",
                "null"
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "search"
              ],
              "title": "SearchWebSearchActionType"
            }
          },
          "title": "SearchWebSearchAction"
        },
        {
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "open_page"
              ],
              "title": "OpenPageWebSearchActionType"
            },
            "url": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          "title": "OpenPageWebSearchAction"
        },
        {
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "pattern": {
              "type": [
                "string",
                "null"
              ]
            },
            "type": {
              "type": "string",
              "enum": [
                "find_in_page"
              ],
              "title": "FindInPageWebSearchActionType"
            },
            "url": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          "title": "FindInPageWebSearchAction"
        },
        {
          "type": "object",
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "other"
              ],
              "title": "OtherWebSearchActionType"
            }
          },
          "title": "OtherWebSearchAction"
        }
      ]
    }
  }
}