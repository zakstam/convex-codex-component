{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ConfigRequirementsReadResponse",
  "type": "object",
  "properties": {
    "requirements": {
      "description": "Null if no requirements are configured (e.g. no requirements.toml/MDM entries).",
      "anyOf": [
        {
          "$ref": "#/definitions/ConfigRequirements"
        },
        {
          "type": "null"
        }
      ]
    }
  },
  "definitions": {
    "AskForApproval": {
      "type": "string",
      "enum": [
        "untrusted",
        "on-failure",
        "on-request",
        "never"
      ]
    },
    "ConfigRequirements": {
      "type": "object",
      "properties": {
        "allowedApprovalPolicies": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "$ref": "#/definitions/AskForApproval"
          }
        },
        "allowedSandboxModes": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "$ref": "#/definitions/SandboxMode"
          }
        },
        "allowedWebSearchModes": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "$ref": "#/definitions/WebSearchMode"
          }
        },
        "enforceResidency": {
          "anyOf": [
            {
              "$ref": "#/definitions/ResidencyRequirement"
            },
            {
              "type": "null"
            }
          ]
        }
      }
    },
    "NetworkRequirements": {
      "type": "object",
      "properties": {
        "allowLocalBinding": {
          "type": [
            "boolean",
            "null"
          ]
        },
        "allowUnixSockets": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "type": "string"
          }
        },
        "allowUpstreamProxy": {
          "type": [
            "boolean",
            "null"
          ]
        },
        "allowedDomains": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "type": "string"
          }
        },
        "dangerouslyAllowNonLoopbackAdmin": {
          "type": [
            "boolean",
            "null"
          ]
        },
        "dangerouslyAllowNonLoopbackProxy": {
          "type": [
            "boolean",
            "null"
          ]
        },
        "deniedDomains": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "type": "string"
          }
        },
        "enabled": {
          "type": [
            "boolean",
            "null"
          ]
        },
        "httpPort": {
          "type": [
            "integer",
            "null"
          ],
          "format": "uint16",
          "minimum": 0.0
        },
        "socksPort": {
          "type": [
            "integer",
            "null"
          ],
          "format": "uint16",
          "minimum": 0.0
        }
      }
    },
    "ResidencyRequirement": {
      "type": "string",
      "enum": [
        "us"
      ]
    },
    "SandboxMode": {
      "type": "string",
      "enum": [
        "read-only",
        "workspace-write",
        "danger-full-access"
      ]
    },
    "WebSearchMode": {
      "type": "string",
      "enum": [
        "disabled",
        "cached",
        "live"
      ]
    }
  }
}